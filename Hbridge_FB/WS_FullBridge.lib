******************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
******************************************************************************************************************************************************************************

*******************************************************************************
**	Wolfspeed, Inc
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not limited to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************
**	To find other WOLFSPEED SiC models, please visit:
**	https://www.wolfspeed.com/power/tools-and-support/all-models
*******************************************************************************
**	This library model file is intended for use in LTspice ONLY
**	Use in any other software will result in syntax or compilation errors!
*******************************************************************************

*********************************************************************
****	
****	
****	Wolfspeed SiC Module Full-Bridge SPICE Library
****		Version 2.0	Date: 2025-07-21
****	
****		Models avilable in this library:
****		CBB011M12GM4,CBB017M12FM4,CBB021M12FM3,CBB032M12FM3
****	
*********************************************************************
**** Six Pack Module Layout ****
****      DC+ ****
****   Q1    Q3    ****
****   Q2    Q4    ****
****  DC-1  DC-2   ****
**** DC-1 / DC-2 are disconnected internally
****	
****	Node Definitions:
****		Electrical
****		DC+   =  Drain
****		DC-1  = Q2 source (Phase 1)
****		DC-2  = Q4 source (Phase 2)
****		AC1   = AC terminal (Phase 1)
****		AC2   = AC terminal (Phase 2)
****		Gn    = Qn Gate
****		Kn    = Qn Kelvin
****		TjQn  = Qn Junction Temperature
****		TcQn  = Qn Case Thermal Connection [apply coolant temperature as a voltage]
****		Electrical (EMI)
****		Baseplate = Node for studying current induced 
****					through heatsink into grounding system
*********************************************************************
****	Model Complexity Control:
****		BPC      = enable basepalte capacitance
****					0: no BPC (zero current on Baseplate node)
****					1: Include BPC (slower)
****		Thermals = enable closed loop thermals
****					0: Fixed Tj defined by TEMP
****					1: Include BPC (slower)
****		level    = change the complexity / accuracy of the model
****					1: Body diode at -4V only
****					2: Full third quadrant conduction
****					3: Full third quadrant conduction with reverse recovery
****	Parameter Definitions:
****		Vths = Threshold voltage shift (V)
****		Rdss = Drain Resistance shift (Ω)
****		Rp   = Inductor parallel res (Ω)
****				low pass filter on ringing
****				100 (default) good balance of bandwidth and sim-time
****				1m   removes impact of packaging but greatly improves sim time
*********************************************************************



.SUBCKT Module_FullBridge DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate

*Convergence Assistance
BI1 0 G1 I = white(2e6*time)/100 Rpar=10Meg
BI2 0 G2 I = white(2e6*time)/100 Rpar=10Meg
BI3 0 G3 I = white(2e6*time)/100 Rpar=10Meg
BI4 0 G4 I = white(2e6*time)/100 Rpar=10Meg

*** SiC MOSFETS ***
* High Side *
XDie_Electrical_Q1 D GQ1 SQ1 TjQ1 IQ1 {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m
XDie_Electrical_Q3 D GQ3 SQ3 TjQ3 IQ3 {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

* Low Side *
XDie_Electrical_Q2 SQ1 GQ2 SQ2 TjQ2 IQ2 {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m
XDie_Electrical_Q4 SQ3 GQ4 SQ4 TjQ4 IQ4 {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

*** Thermal Networks ***
* High Side *
XDie_Thermal_Q1 TjQ1 TcQ1 D SQ1 IQ1 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj}
XDie_Thermal_Q3 TjQ3 TcQ3 D SQ3 IQ3 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj}
* Low Side *
XDie_Thermal_Q2 TjQ2 TcQ2 SQ1 SQ2 IQ2 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj}
XDie_Thermal_Q4 TjQ4 TcQ4 SQ3 SQ4 IQ4 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj}

*** Baseplate Capacitance ***
XBPC D SQ1 SQ3 SQ2 SQ4 Baseplate {BPC} PARAMS: Cug={Cug} CA1G={CA1G} CA2G={CA2G} CL1G={CL1G} CL2G={CL2G}

*** Parasitic Parameters ***
Ld DC+ D {Ld} Rser={Rdesr} Rpar={Rp}

LP1P SQ1 AC1 {Lac1} Rser={Rpesr} Rpar={Rp}
LP2P SQ3 AC2 {Lac2} Rser={Rpesr} Rpar={Rp}

LP1S SQ2 DC-1 {Ls1} Rser={Rsesr} Rpar={Rp}
LP2S SQ4 DC-2 {Ls2} Rser={Rsesr} Rpar={Rp}

LQ1G G1 GQ1 {LgQ1/2} Rser={Rgi/2}
LQ2G G2 GQ2 {LgQ2/2} Rser={Rgi/2}
LQ3G G3 GQ3 {LgQ3/2} Rser={Rgi/2}
LQ4G G4 GQ4 {LgQ4/2} Rser={Rgi/2}

LQ1K K1 SQ1 {LgQ1/2} Rser={Rgi/2}
LQ2K K2 SQ2 {LgQ2/2} Rser={Rgi/2}
LQ3K K3 SQ3 {LgQ3/2} Rser={Rgi/2}
LQ4K K4 SQ4 {LgQ4/2} Rser={Rgi/2}

.ENDS Module_FullBridge

*** SUBCKT 1/2: BPC ***
.SUBCKT 1 D SQ1 SQ3 SQ2 SQ4 Baseplate
R Baseplate 0 1
.ENDS

.SUBCKT 2 D SQ1 SQ3 SQ2 SQ4 Baseplate
C1 D Baseplate {Cug}
C2 SQ1 Baseplate {CA1G}
C3 SQ3 Baseplate {CA2G}
C4 SQ2 Baseplate {CL1G}
C5 SQ4 Baseplate {CL2G}
.ENDS
 
*** SUBCKT 3/4: THERMALS ***
.SUBCKT 3 Tj Tc Vd Vs Vi
Vt Tj1 0 {Tj}
Rt Tj1 Tj 1m
RTground Tc 0 10k
.ENDS 3

.SUBCKT 4 Tj Tc Vd Vs Vi
Gpwr 0 Tj Value {abs(V(Vd,Vs)*(V(Vi)))}
Rtj Tj 0 10k
Ct1 Tj 0 {Ct1}
Ct2 1 0 {Ct2}
Ct3 2 0 {Ct3}
Ct4 3 0 {Ct4}
Rt1 Tj 1 {Rt1}
Rt2 1 2 {Rt2}
Rt3 2 3 {Rt3}
Rt4 3 Tc {Rt4}
RTground Tc 0 10k
.ic V(Tj) = {Tj} V(1) = {Tj} V(2) = {Tj} V(3) = {Tj}
.ENDS 4
 
 
.SUBCKT CBB011M12GM4 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} AFm=3 AFnomM=3 die=10 Ld=8.00n Ls1=8.80n Ls2=20.13n Lac1=9.80n Lac2=9.40n Rdesr=1.48m Rpesr=1.68m Rsesr=1.68m PackageRgi=0.00 DieRgi=3.50 LgQ1=17.10n LgQ2=12.80n LgQ3=15.10n LgQ4=12.80n Cug=92.00p Ca1g=85.00p Ca2g=93.00p Cl1g=49.00p Cl2g=50.00p Rt1={AFnomM*4.37m/AFm} Rt2={AFnomM*25.10m/AFm} Rt3={AFnomM*117.81m/AFm} Rt4={AFnomM*281.72m/AFm} Ct1={AFm*438.89u/AFnomM} Ct2={AFm*6.47m/AFnomM} Ct3={AFm*39.11m/AFnomM} Ct4={AFm*183.93m/AFnomM} CgdOffset=-5.94p agd=1.70 ags=650.35m ads=1 tau1=18.04 tau2=22.70 tm1=6.19 tm2=10.59 Lqe=2.500000e-08 Rqe=8.69 Cqe=1.000000e-07 Rgis=2.00
 
*** Behavior Optimization *** 
 
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate Module_FullBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} die={die+level} CgdOffset={CgdOffset} Rdss={Rdss} Vths={Vths} AFm={AFm} Rp={Rp} Tj={Tj} Ld={Ld} Lac1={Lac1} Lac2={Lac2} Ls1={Ls1} Ls2={Ls2} LgQ1={LgQ1} LgQ2={LgQ2} LgQ3={LgQ3} LgQ4={LgQ4} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} Cug={Cug} Ca1g={Ca1g} Ca2g={Ca2g} Cl1g={Cl1g} Cl2g={Cl2g}  Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4}Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CBB011M12GM4

 
.SUBCKT CBB017M12FM4 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} AFm=2 AFnomM=2 die=10 Ld=5.00n Ls1=13.65n Ls2=10.94n Lac1=14.49n Lac2=15.73n Rdesr=1.90m Rpesr=3.50m Rsesr=3.50m PackageRgi=0.00 DieRgi=3.50 LgQ1=11.70n LgQ2=11.50n LgQ3=19.10n LgQ4=12.50n Cug=189.00p Ca1g=35.00p Ca2g=47.00p Cl1g=26.00p Cl2g=27.00p Rt1={AFnomM*6.28m/AFm} Rt2={AFnomM*34.67m/AFm} Rt3={AFnomM*165.64m/AFm} Rt4={AFnomM*540.64m/AFm} Ct1={AFm*282.82u/AFnomM} Ct2={AFm*4.30m/AFnomM} Ct3={AFm*25.60m/AFnomM} Ct4={AFm*94.76m/AFnomM} CgdOffset=-4.07p agd=822.33m ags=1.13 ads=1 tau1=19.00 tau2=21.84 tm1=1.09 tm2=3.63 Lqe=2.500000e-08 Rqe=13.02 Cqe=1.000000e-07 Rgis=1.90
 
*** Behavior Optimization *** 
 
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate Module_FullBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} die={die+level} CgdOffset={CgdOffset} Rdss={Rdss} Vths={Vths} AFm={AFm} Rp={Rp} Tj={Tj} Ld={Ld} Lac1={Lac1} Lac2={Lac2} Ls1={Ls1} Ls2={Ls2} LgQ1={LgQ1} LgQ2={LgQ2} LgQ3={LgQ3} LgQ4={LgQ4} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} Cug={Cug} Ca1g={Ca1g} Ca2g={Ca2g} Cl1g={Cl1g} Cl2g={Cl2g}  Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4}Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CBB017M12FM4

 
.SUBCKT CBB021M12FM3 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} AFm=1 AFnomM=1 die=20 Ld=12.71n Ls1=5.74n Ls2=4.76n Lac1=11.12n Lac2=10.53n Rdesr=1.98m Rpesr=1.85m Rsesr=1.85m PackageRgi=0.00 DieRgi=3.30 LgQ1=14.85n LgQ2=15.51n LgQ3=14.96n LgQ4=14.84n Cug=52.70p Ca1g=30.20p Ca2g=30.30p Cl1g=17.80p Cl2g=19.30p Rt1={AFnomM*10.73m/AFm} Rt2={AFnomM*68.13m/AFm} Rt3={AFnomM*370.65m/AFm} Rt4={AFnomM*700.49m/AFm} Ct1={AFm*211.52u/AFnomM} Ct2={AFm*3.30m/AFnomM} Ct3={AFm*21.73m/AFnomM} Ct4={AFm*90.88m/AFnomM} CgdOffset=-6.88p agd=1.61 ags=1.14 ads=1 tau1=1.00 tau2=45.49 tm1=50.00 tm2=17.09 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 Rgis=1.43
 
*** Behavior Optimization *** 
 
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate Module_FullBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} die={die+level} CgdOffset={CgdOffset} Rdss={Rdss} Vths={Vths} AFm={AFm} Rp={Rp} Tj={Tj} Ld={Ld} Lac1={Lac1} Lac2={Lac2} Ls1={Ls1} Ls2={Ls2} LgQ1={LgQ1} LgQ2={LgQ2} LgQ3={LgQ3} LgQ4={LgQ4} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} Cug={Cug} Ca1g={Ca1g} Ca2g={Ca2g} Cl1g={Cl1g} Cl2g={Cl2g}  Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4}Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CBB021M12FM3

 
.SUBCKT CBB032M12FM3 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} AFm=1 AFnomM=1 die=30 Ld=12.71n Ls1=5.74n Ls2=4.76n Lac1=11.12n Lac2=10.53n Rdesr=1.98m Rpesr=1.85m Rsesr=1.85m PackageRgi=0.00 DieRgi=1.70 LgQ1=14.85n LgQ2=15.51n LgQ3=14.96n LgQ4=14.84n Cug=52.70p Ca1g=30.20p Ca2g=30.30p Cl1g=17.80p Cl2g=19.30p Rt1={AFnomM*13.87m/AFm} Rt2={AFnomM*87.11m/AFm} Rt3={AFnomM*418.19m/AFm} Rt4={AFnomM*730.84m/AFm} Ct1={AFm*183.46u/AFnomM} Ct2={AFm*2.43m/AFnomM} Ct3={AFm*15.47m/AFnomM} Ct4={AFm*75.82m/AFnomM} CgdOffset=-4.87p agd=1.21 ags=1.22 ads=1 tau1=1.00 tau2=36.85 tm1=50.00 tm2=5.96 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 Rgis=1.45
 
*** Behavior Optimization *** 
 
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 DC+ DC-1 DC-2 AC1 AC2 G1 G2 G3 G4 K1 K2 K3 K4 TjQ1 TjQ2 TjQ3 TjQ4 TcQ1 TcQ2 TcQ3 TcQ4 Baseplate Module_FullBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} die={die+level} CgdOffset={CgdOffset} Rdss={Rdss} Vths={Vths} AFm={AFm} Rp={Rp} Tj={Tj} Ld={Ld} Lac1={Lac1} Lac2={Lac2} Ls1={Ls1} Ls2={Ls2} LgQ1={LgQ1} LgQ2={LgQ2} LgQ3={LgQ3} LgQ4={LgQ4} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} Cug={Cug} Ca1g={Ca1g} Ca2g={Ca2g} Cl1g={Cl1g} Cl2g={Cl2g}  Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4}Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CBB032M12FM3



**********************************************************************
********************* SiC MOSFET Models ******************************
**********************************************************************
.SUBCKT 11 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.5133e-06,1,6.8338e-05,1.5,0.00030901,2,0.0013972,2.5,0.0063179,3,0.028568,3.5,0.10072,4,0.27737,4.5,0.63803,5,1.3289,5.5,2.495,6,4.3538,6.5,7.024,7,10.7488,7.5,15.7268,8,22.277,8.5,30.4448,9,40.4374,9.5,51.9957,10,65.3211,10.5,79.6158,11,94.2399,11.5,110.3904,12,127.5271,12.5,145.7613,13,165.2433,13.5,185.0169,14,203.5532,14.5,219.8658,15,233.2404,15.5,243.941,16,253.0219,16.5,260.3839,17,267.3835,17.5,273.9825,18,280.3866,18.5,286.3849,19,292.124,19.5,298.0037,20,304.075,20.5,309.9993,21,316.1972,21.5,322.5372,22,328.6926,22.5,334.6727,23,340.4861,23.5,346.1411,24,351.645,24.5,357.0048,25,362.2272,25.5,367.3183,26,372.2837,26.5,377.129,27,381.8591,27.5,386.4788,28,390.9926,28.5,395.4047,29,399.7191,29.5,403.9998,30,408.1567)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.92027,5.5,0.8257,6,0.71508,6.5,0.5986,7,0.47354,7.5,0.41971,8,0.37189,8.5,0.33397,9,0.29663,9.5,0.26519,10,0.23816,10.5,0.21804,11,0.20233,11.5,0.18818,12,0.17399,12.5,0.16118,13,0.14824,13.5,0.1364,14,0.12757,14.5,0.12143,15,0.11802,15.5,0.11667,16,0.11596,16.5,0.11596,17,0.11596,17.5,0.11596,18,0.11596,18.5,0.11596,19,0.11596,19.5,0.11596,20,0.11596,20.5,0.11596,21,0.11596,21.5,0.11596,22,0.11596,22.5,0.11596,23,0.11596,23.5,0.11596,24,0.11596,24.5,0.11596,25,0.11596,25.5,0.11596,26,0.11596,26.5,0.11596,27,0.11596,27.5,0.11596,28,0.11596,28.5,0.11596,29,0.11596,29.5,0.11596,30,0.11596)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00010441,3.5,0.00042125,4,0.0010171,4.5,0.0021745,5,0.0039708,5.5,0.00652,6,0.0095883,6.5,0.014649,7,0.021527,7.5,0.030301,8,0.038773,8.5,0.049437,9,0.059247,9.5,0.067465,10,0.073146,10.5,0.085404,11,0.15563,11.5,0.2298,12,0.33935,12.5,0.44944,13,0.5558,13.5,0.6013,14,0.64169,14.5,0.64589,15,0.64956,15.5,0.64983,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,-40,-0.0047727,-30,-0.0039903,-20,-0.003139,-10,-0.0022189,0,-0.0012299,10,-0.00017197,20,0.0009548,30,0.0021504,40,0.0034149,50,0.0047483,60,0.0061505,70,0.0076216,80,0.0091616,90,0.01077,100,0.012448,110,0.014195,120,0.01601,130,0.017895,140,0.019848,150,0.02187,160,0.023961,170,0.026121,180,0.028349,190,0.030647,200,0.033013,300,0.056677,400,0.080341,500,0.10401,600,0.12767,700,0.15133,800,0.175,900,0.19866,1000,0.22233,1100,0.24599,1200,0.26965,1300,0.29332,1400,0.31698,1500,0.34065,1600,0.36431,1700,0.38798,1800,0.41164,1900,0.4353,2000,0.45897)}
.func VthFwd(Tj) {table(Tj,-40,-0.79395,-30,-0.69496,-20,-0.59318,-10,-0.48862,0,-0.38126,10,-0.27112,20,-0.15819,30,-0.042464,40,0.076047,50,0.19735,60,0.32144,70,0.44832,80,0.57798,90,0.71044,100,0.84569,110,0.98372,120,1.1245,130,1.2682,140,1.4146,150,1.5638,160,1.7157,170,1.8705,180,2.0281,190,2.1884,200,2.3515,300,3.9829,400,5.6143,500,6,600,6,700,6,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.005,2.399,0.006,2.396,0.007,2.397,0.008,2.396,0.010,2.396,0.013,2.394,0.016,2.391,0.020,2.388,0.024,2.386,0.030,2.381,0.037,2.377,0.046,2.373,0.057,2.365,0.071,2.358,0.087,2.351,0.108,2.342,0.133,2.330,0.165,2.320,0.203,2.304,0.251,2.288,0.311,2.265,0.384,2.241,0.474,2.211,0.586,2.177,0.725,2.136,0.895,2.089,1.106,2.036,1.367,1.976,1.690,1.911,2.088,1.840,2.581,1.763,3.189,1.680,3.941,1.592,4.871,1.500,6.019,1.402,7.439,1.282,9.193,1.162,11.361,1.043,14.040,0.926,17.350,0.817,21.442,0.730,26.498,0.651,32.746,0.578,40.468,0.513,50.011,0.456,61.804,0.406,76.378,0.364,94.389,0.326,116.646,0.293,144.152,0.263,178.145,0.237,220.153,0.213,272.067,0.192,336.223,0.173,415.507,0.157,513.487,0.141,634.572,0.128,784.209,0.117,969.132,0.106,1197.662,0.098)}

.func Cdg(V) {table(V,0.005,1.590,0.006,1.588,0.007,1.587,0.008,1.585,0.010,1.583,0.013,1.580,0.016,1.577,0.020,1.572,0.024,1.567,0.030,1.560,0.037,1.551,0.046,1.540,0.057,1.528,0.071,1.512,0.087,1.492,0.108,1.467,0.133,1.436,0.165,1.398,0.203,1.353,0.251,1.298,0.311,1.235,0.384,1.164,0.474,1.089,0.586,1.012,0.725,0.937,0.895,0.866,1.106,0.798,1.367,0.731,1.690,0.665,2.088,0.601,2.581,0.538,3.189,0.477,3.941,0.419,4.871,0.363,6.019,0.308,7.439,0.240,9.193,0.180,11.361,0.129,14.040,0.088,17.350,0.058,21.442,0.050,26.498,0.044,32.746,0.038,40.468,0.034,50.011,0.030,61.804,0.027,76.378,0.025,94.389,0.023,116.646,0.021,144.152,0.019,178.145,0.018,220.153,0.016,272.067,0.015,336.223,0.014,415.507,0.013,513.487,0.012,634.572,0.011,784.209,0.010,969.132,0.010,1197.662,0.009)}

.func Cgs(V) {table(V,-5.360,3.603,-4.567,2.692,-3.774,2.510,-2.981,2.274,-2.188,2.389,-1.394,2.662,-0.601,3.003,0.192,3.383,0.985,3.755,1.778,4.044,2.571,4.211,3.364,4.308,4.157,4.353,4.950,4.379,5.743,4.396,6.537,4.410,7.330,4.420,8.123,4.429,8.916,4.436,9.709,4.443,10.502,4.449,11.295,4.455,12.088,4.460,12.881,4.464,13.674,4.469,14.468,4.473,15.261,4.477,16.054,4.480,16.847,4.484,17.640,4.486)}


.param Is_ideal=1.000000e-05
.param n_ideal=3.180157e-01
.param Rs_ideal=4.471726e-02
.ENDS 11

.SUBCKT 12 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.5133e-06,1,6.8338e-05,1.5,0.00030901,2,0.0013972,2.5,0.0063179,3,0.028568,3.5,0.10072,4,0.27737,4.5,0.63803,5,1.3289,5.5,2.495,6,4.3538,6.5,7.024,7,10.7488,7.5,15.7268,8,22.277,8.5,30.4448,9,40.4374,9.5,51.9957,10,65.3211,10.5,79.6158,11,94.2399,11.5,110.3904,12,127.5271,12.5,145.7613,13,165.2433,13.5,185.0169,14,203.5532,14.5,219.8658,15,233.2404,15.5,243.941,16,253.0219,16.5,260.3839,17,267.3835,17.5,273.9825,18,280.3866,18.5,286.3849,19,292.124,19.5,298.0037,20,304.075,20.5,309.9993,21,316.1972,21.5,322.5372,22,328.6926,22.5,334.6727,23,340.4861,23.5,346.1411,24,351.645,24.5,357.0048,25,362.2272,25.5,367.3183,26,372.2837,26.5,377.129,27,381.8591,27.5,386.4788,28,390.9926,28.5,395.4047,29,399.7191,29.5,403.9998,30,408.1567)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.92027,5.5,0.8257,6,0.71508,6.5,0.5986,7,0.47354,7.5,0.41971,8,0.37189,8.5,0.33397,9,0.29663,9.5,0.26519,10,0.23816,10.5,0.21804,11,0.20233,11.5,0.18818,12,0.17399,12.5,0.16118,13,0.14824,13.5,0.1364,14,0.12757,14.5,0.12143,15,0.11802,15.5,0.11667,16,0.11596,16.5,0.11596,17,0.11596,17.5,0.11596,18,0.11596,18.5,0.11596,19,0.11596,19.5,0.11596,20,0.11596,20.5,0.11596,21,0.11596,21.5,0.11596,22,0.11596,22.5,0.11596,23,0.11596,23.5,0.11596,24,0.11596,24.5,0.11596,25,0.11596,25.5,0.11596,26,0.11596,26.5,0.11596,27,0.11596,27.5,0.11596,28,0.11596,28.5,0.11596,29,0.11596,29.5,0.11596,30,0.11596)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00010441,3.5,0.00042125,4,0.0010171,4.5,0.0021745,5,0.0039708,5.5,0.00652,6,0.0095883,6.5,0.014649,7,0.021527,7.5,0.030301,8,0.038773,8.5,0.049437,9,0.059247,9.5,0.067465,10,0.073146,10.5,0.085404,11,0.15563,11.5,0.2298,12,0.33935,12.5,0.44944,13,0.5558,13.5,0.6013,14,0.64169,14.5,0.64589,15,0.64956,15.5,0.64983,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,-40,-0.0047727,-30,-0.0039903,-20,-0.003139,-10,-0.0022189,0,-0.0012299,10,-0.00017197,20,0.0009548,30,0.0021504,40,0.0034149,50,0.0047483,60,0.0061505,70,0.0076216,80,0.0091616,90,0.01077,100,0.012448,110,0.014195,120,0.01601,130,0.017895,140,0.019848,150,0.02187,160,0.023961,170,0.026121,180,0.028349,190,0.030647,200,0.033013,300,0.056677,400,0.080341,500,0.10401,600,0.12767,700,0.15133,800,0.175,900,0.19866,1000,0.22233,1100,0.24599,1200,0.26965,1300,0.29332,1400,0.31698,1500,0.34065,1600,0.36431,1700,0.38798,1800,0.41164,1900,0.4353,2000,0.45897)}
.func VthFwd(Tj) {table(Tj,-40,-0.79395,-30,-0.69496,-20,-0.59318,-10,-0.48862,0,-0.38126,10,-0.27112,20,-0.15819,30,-0.042464,40,0.076047,50,0.19735,60,0.32144,70,0.44832,80,0.57798,90,0.71044,100,0.84569,110,0.98372,120,1.1245,130,1.2682,140,1.4146,150,1.5638,160,1.7157,170,1.8705,180,2.0281,190,2.1884,200,2.3515,300,3.9829,400,5.6143,500,6,600,6,700,6,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.31802,-4,0.30239,-3,0.27549,-2,0.23997,-1,0.20172,0,0.16707,1,0.1439,2,0.14387,3,0.29318,4,0.30477,5,0.25055,6,0.20969,7,0.17319,8,0.15077,9,0.13968,10,0.1245,11,0.11898,12,0.11825,13,0.10867,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.044717,-4,0.043436,-3,0.045399,-2,0.049174,-1,0.051824,0,0.051815,1,0.046541,2,0.038559,3,0.027063,4,0.026832,5,0.031403,6,0.036827,7,0.04234,8,0.049371,9,0.058908,10,0.073633,11,0.090477,12,0.11197,13,0.1348,14,0.13697,15,0.13652,16,0.15032,17,0.16868,18,0.18933)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,3.9431e-05,3,0.035501,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,1.0718,-30,1.0277,-20,0.99562,-10,0.97556,0,0.96752,10,0.9715,20,0.98749,30,1.0155,40,1.0555,50,1.1076,60,1.1717,70,1.2478,80,1.3359,90,1.436,100,1.5482,110,1.6724,120,1.8086,130,1.9568,140,2.117,150,2.2893,160,2.4735,170,2.6698,180,2.8781,190,3.0985,200,3.3308,300,5.6543,400,7.9779,500,10.3014,600,12.6249,700,14.9484,800,17.272,900,19.5955,1000,21.919,1100,24.2425,1200,26.5661,1300,28.8896,1400,31.2131,1500,33.5366,1600,35.8602,1700,38.1837,1800,40.5072,1900,42.8307,2000,45.1543)}
.func nscal(Tj) {table(Tj,-40,1.0132,-30,1.0112,-20,1.0091,-10,1.0071,0,1.0051,10,1.0031,20,1.001,30,0.99898,40,0.99695,50,0.99491,60,0.99287,70,0.99083,80,0.98878,90,0.98674,100,0.98469,110,0.98265,120,0.9806,130,0.97855,140,0.9765,150,0.97445,160,0.97239,170,0.97034,180,0.96828,190,0.96623,200,0.96417,300,0.94358,400,0.92299,500,0.9024,600,0.88181,700,0.86122,800,0.84063,900,0.82004,1000,0.79945,1100,0.77886,1200,0.75827,1300,0.73768,1400,0.71709,1500,0.6965,1600,0.67591,1700,0.65532,1800,0.63473,1900,0.61414,2000,0.59355)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.005,2.399,0.006,2.396,0.007,2.397,0.008,2.396,0.010,2.396,0.013,2.394,0.016,2.391,0.020,2.388,0.024,2.386,0.030,2.381,0.037,2.377,0.046,2.373,0.057,2.365,0.071,2.358,0.087,2.351,0.108,2.342,0.133,2.330,0.165,2.320,0.203,2.304,0.251,2.288,0.311,2.265,0.384,2.241,0.474,2.211,0.586,2.177,0.725,2.136,0.895,2.089,1.106,2.036,1.367,1.976,1.690,1.911,2.088,1.840,2.581,1.763,3.189,1.680,3.941,1.592,4.871,1.500,6.019,1.402,7.439,1.282,9.193,1.162,11.361,1.043,14.040,0.926,17.350,0.817,21.442,0.730,26.498,0.651,32.746,0.578,40.468,0.513,50.011,0.456,61.804,0.406,76.378,0.364,94.389,0.326,116.646,0.293,144.152,0.263,178.145,0.237,220.153,0.213,272.067,0.192,336.223,0.173,415.507,0.157,513.487,0.141,634.572,0.128,784.209,0.117,969.132,0.106,1197.662,0.098)}

.func Cdg(V) {table(V,0.005,1.590,0.006,1.588,0.007,1.587,0.008,1.585,0.010,1.583,0.013,1.580,0.016,1.577,0.020,1.572,0.024,1.567,0.030,1.560,0.037,1.551,0.046,1.540,0.057,1.528,0.071,1.512,0.087,1.492,0.108,1.467,0.133,1.436,0.165,1.398,0.203,1.353,0.251,1.298,0.311,1.235,0.384,1.164,0.474,1.089,0.586,1.012,0.725,0.937,0.895,0.866,1.106,0.798,1.367,0.731,1.690,0.665,2.088,0.601,2.581,0.538,3.189,0.477,3.941,0.419,4.871,0.363,6.019,0.308,7.439,0.240,9.193,0.180,11.361,0.129,14.040,0.088,17.350,0.058,21.442,0.050,26.498,0.044,32.746,0.038,40.468,0.034,50.011,0.030,61.804,0.027,76.378,0.025,94.389,0.023,116.646,0.021,144.152,0.019,178.145,0.018,220.153,0.016,272.067,0.015,336.223,0.014,415.507,0.013,513.487,0.012,634.572,0.011,784.209,0.010,969.132,0.010,1197.662,0.009)}

.func Cgs(V) {table(V,-5.360,3.603,-4.567,2.692,-3.774,2.510,-2.981,2.274,-2.188,2.389,-1.394,2.662,-0.601,3.003,0.192,3.383,0.985,3.755,1.778,4.044,2.571,4.211,3.364,4.308,4.157,4.353,4.950,4.379,5.743,4.396,6.537,4.410,7.330,4.420,8.123,4.429,8.916,4.436,9.709,4.443,10.502,4.449,11.295,4.455,12.088,4.460,12.881,4.464,13.674,4.469,14.468,4.473,15.261,4.477,16.054,4.480,16.847,4.484,17.640,4.486)}


.ENDS 12

.SUBCKT 13 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.5133e-06,1,6.8338e-05,1.5,0.00030901,2,0.0013972,2.5,0.0063179,3,0.028568,3.5,0.10072,4,0.27737,4.5,0.63803,5,1.3289,5.5,2.495,6,4.3538,6.5,7.024,7,10.7488,7.5,15.7268,8,22.277,8.5,30.4448,9,40.4374,9.5,51.9957,10,65.3211,10.5,79.6158,11,94.2399,11.5,110.3904,12,127.5271,12.5,145.7613,13,165.2433,13.5,185.0169,14,203.5532,14.5,219.8658,15,233.2404,15.5,243.941,16,253.0219,16.5,260.3839,17,267.3835,17.5,273.9825,18,280.3866,18.5,286.3849,19,292.124,19.5,298.0037,20,304.075,20.5,309.9993,21,316.1972,21.5,322.5372,22,328.6926,22.5,334.6727,23,340.4861,23.5,346.1411,24,351.645,24.5,357.0048,25,362.2272,25.5,367.3183,26,372.2837,26.5,377.129,27,381.8591,27.5,386.4788,28,390.9926,28.5,395.4047,29,399.7191,29.5,403.9998,30,408.1567)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.92027,5.5,0.8257,6,0.71508,6.5,0.5986,7,0.47354,7.5,0.41971,8,0.37189,8.5,0.33397,9,0.29663,9.5,0.26519,10,0.23816,10.5,0.21804,11,0.20233,11.5,0.18818,12,0.17399,12.5,0.16118,13,0.14824,13.5,0.1364,14,0.12757,14.5,0.12143,15,0.11802,15.5,0.11667,16,0.11596,16.5,0.11596,17,0.11596,17.5,0.11596,18,0.11596,18.5,0.11596,19,0.11596,19.5,0.11596,20,0.11596,20.5,0.11596,21,0.11596,21.5,0.11596,22,0.11596,22.5,0.11596,23,0.11596,23.5,0.11596,24,0.11596,24.5,0.11596,25,0.11596,25.5,0.11596,26,0.11596,26.5,0.11596,27,0.11596,27.5,0.11596,28,0.11596,28.5,0.11596,29,0.11596,29.5,0.11596,30,0.11596)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00010441,3.5,0.00042125,4,0.0010171,4.5,0.0021745,5,0.0039708,5.5,0.00652,6,0.0095883,6.5,0.014649,7,0.021527,7.5,0.030301,8,0.038773,8.5,0.049437,9,0.059247,9.5,0.067465,10,0.073146,10.5,0.085404,11,0.15563,11.5,0.2298,12,0.33935,12.5,0.44944,13,0.5558,13.5,0.6013,14,0.64169,14.5,0.64589,15,0.64956,15.5,0.64983,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,-40,-0.0047727,-30,-0.0039903,-20,-0.003139,-10,-0.0022189,0,-0.0012299,10,-0.00017197,20,0.0009548,30,0.0021504,40,0.0034149,50,0.0047483,60,0.0061505,70,0.0076216,80,0.0091616,90,0.01077,100,0.012448,110,0.014195,120,0.01601,130,0.017895,140,0.019848,150,0.02187,160,0.023961,170,0.026121,180,0.028349,190,0.030647,200,0.033013,300,0.056677,400,0.080341,500,0.10401,600,0.12767,700,0.15133,800,0.175,900,0.19866,1000,0.22233,1100,0.24599,1200,0.26965,1300,0.29332,1400,0.31698,1500,0.34065,1600,0.36431,1700,0.38798,1800,0.41164,1900,0.4353,2000,0.45897)}
.func VthFwd(Tj) {table(Tj,-40,-0.79395,-30,-0.69496,-20,-0.59318,-10,-0.48862,0,-0.38126,10,-0.27112,20,-0.15819,30,-0.042464,40,0.076047,50,0.19735,60,0.32144,70,0.44832,80,0.57798,90,0.71044,100,0.84569,110,0.98372,120,1.1245,130,1.2682,140,1.4146,150,1.5638,160,1.7157,170,1.8705,180,2.0281,190,2.1884,200,2.3515,300,3.9829,400,5.6143,500,6,600,6,700,6,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.31802,-4,0.30239,-3,0.27549,-2,0.23997,-1,0.20172,0,0.16707,1,0.1439,2,0.14387,3,0.29318,4,0.30477,5,0.25055,6,0.20969,7,0.17319,8,0.15077,9,0.13968,10,0.1245,11,0.11898,12,0.11825,13,0.10867,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.044717,-4,0.043436,-3,0.045399,-2,0.049174,-1,0.051824,0,0.051815,1,0.046541,2,0.038559,3,0.027063,4,0.026832,5,0.031403,6,0.036827,7,0.04234,8,0.049371,9,0.058908,10,0.073633,11,0.090477,12,0.11197,13,0.1348,14,0.13697,15,0.13652,16,0.15032,17,0.16868,18,0.18933)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,3.9431e-05,3,0.035501,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,1.0718,-30,1.0277,-20,0.99562,-10,0.97556,0,0.96752,10,0.9715,20,0.98749,30,1.0155,40,1.0555,50,1.1076,60,1.1717,70,1.2478,80,1.3359,90,1.436,100,1.5482,110,1.6724,120,1.8086,130,1.9568,140,2.117,150,2.2893,160,2.4735,170,2.6698,180,2.8781,190,3.0985,200,3.3308,300,5.6543,400,7.9779,500,10.3014,600,12.6249,700,14.9484,800,17.272,900,19.5955,1000,21.919,1100,24.2425,1200,26.5661,1300,28.8896,1400,31.2131,1500,33.5366,1600,35.8602,1700,38.1837,1800,40.5072,1900,42.8307,2000,45.1543)}
.func nscal(Tj) {table(Tj,-40,1.0132,-30,1.0112,-20,1.0091,-10,1.0071,0,1.0051,10,1.0031,20,1.001,30,0.99898,40,0.99695,50,0.99491,60,0.99287,70,0.99083,80,0.98878,90,0.98674,100,0.98469,110,0.98265,120,0.9806,130,0.97855,140,0.9765,150,0.97445,160,0.97239,170,0.97034,180,0.96828,190,0.96623,200,0.96417,300,0.94358,400,0.92299,500,0.9024,600,0.88181,700,0.86122,800,0.84063,900,0.82004,1000,0.79945,1100,0.77886,1200,0.75827,1300,0.73768,1400,0.71709,1500,0.6965,1600,0.67591,1700,0.65532,1800,0.63473,1900,0.61414,2000,0.59355)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.005,2.399,0.006,2.396,0.007,2.397,0.008,2.396,0.010,2.396,0.013,2.394,0.016,2.391,0.020,2.388,0.024,2.386,0.030,2.381,0.037,2.377,0.046,2.373,0.057,2.365,0.071,2.358,0.087,2.351,0.108,2.342,0.133,2.330,0.165,2.320,0.203,2.304,0.251,2.288,0.311,2.265,0.384,2.241,0.474,2.211,0.586,2.177,0.725,2.136,0.895,2.089,1.106,2.036,1.367,1.976,1.690,1.911,2.088,1.840,2.581,1.763,3.189,1.680,3.941,1.592,4.871,1.500,6.019,1.402,7.439,1.282,9.193,1.162,11.361,1.043,14.040,0.926,17.350,0.817,21.442,0.730,26.498,0.651,32.746,0.578,40.468,0.513,50.011,0.456,61.804,0.406,76.378,0.364,94.389,0.326,116.646,0.293,144.152,0.263,178.145,0.237,220.153,0.213,272.067,0.192,336.223,0.173,415.507,0.157,513.487,0.141,634.572,0.128,784.209,0.117,969.132,0.106,1197.662,0.098)}

.func Cdg(V) {table(V,0.005,1.590,0.006,1.588,0.007,1.587,0.008,1.585,0.010,1.583,0.013,1.580,0.016,1.577,0.020,1.572,0.024,1.567,0.030,1.560,0.037,1.551,0.046,1.540,0.057,1.528,0.071,1.512,0.087,1.492,0.108,1.467,0.133,1.436,0.165,1.398,0.203,1.353,0.251,1.298,0.311,1.235,0.384,1.164,0.474,1.089,0.586,1.012,0.725,0.937,0.895,0.866,1.106,0.798,1.367,0.731,1.690,0.665,2.088,0.601,2.581,0.538,3.189,0.477,3.941,0.419,4.871,0.363,6.019,0.308,7.439,0.240,9.193,0.180,11.361,0.129,14.040,0.088,17.350,0.058,21.442,0.050,26.498,0.044,32.746,0.038,40.468,0.034,50.011,0.030,61.804,0.027,76.378,0.025,94.389,0.023,116.646,0.021,144.152,0.019,178.145,0.018,220.153,0.016,272.067,0.015,336.223,0.014,415.507,0.013,513.487,0.012,634.572,0.011,784.209,0.010,969.132,0.010,1197.662,0.009)}

.func Cgs(V) {table(V,-5.360,3.603,-4.567,2.692,-3.774,2.510,-2.981,2.274,-2.188,2.389,-1.394,2.662,-0.601,3.003,0.192,3.383,0.985,3.755,1.778,4.044,2.571,4.211,3.364,4.308,4.157,4.353,4.950,4.379,5.743,4.396,6.537,4.410,7.330,4.420,8.123,4.429,8.916,4.436,9.709,4.443,10.502,4.449,11.295,4.455,12.088,4.460,12.881,4.464,13.674,4.469,14.468,4.473,15.261,4.477,16.054,4.480,16.847,4.484,17.640,4.486)}


.ENDS 13

.SUBCKT 21 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,6.3238e-06,1,9.1422e-05,1.5,0.00044691,2,0.0021847,2.5,0.01068,3,0.053493,3.5,0.18591,4,0.50095,4.5,1.1292,5,2.2294,5.5,4.029,6,6.7698,6.5,10.6618,7,15.9645,7.5,22.8969,8,31.5814,8.5,42.314,9,54.8558,9.5,69.0827,10,85.2136,10.5,103.6687,11,123.5931,11.5,145.8745,12,169.1801,12.5,192.5075,13,213.4552,13.5,232.3223,14,248.0041,14.5,261.0868,15,272.0019,15.5,282.1943,16,291.3761,16.5,299.7153,17,307.4516,17.5,315.5356,18,324.0896,18.5,333.33,19,343.2087,19.5,353.9341,20,364.4952,20.5,374.8998,21,385.1554,21.5,395.2687,22,405.2461,22.5,415.0937,23,424.817,23.5,434.4213,24,443.9116,24.5,453.2925,25,462.5684,25.5,471.7435,26,480.8216,26.5,489.8065,27,498.7017,27.5,507.5104,28,516.2359,28.5,524.881,29,533.4488,29.5,541.9898,30,550.4322)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.98369,5.5,0.94641,6,0.88598,6.5,0.81058,7,0.71927,7.5,0.63161,8,0.55439,8.5,0.48861,9,0.43282,9.5,0.38753,10,0.34882,10.5,0.31346,11,0.28518,11.5,0.25698,12,0.2318,12.5,0.21131,13,0.19802,13.5,0.18932,14,0.18554,14.5,0.18417,15,0.18417,15.5,0.18417,16,0.18417,16.5,0.18417,17,0.18417,17.5,0.18417,18,0.18417,18.5,0.18417,19,0.18417,19.5,0.18417,20,0.18417,20.5,0.18417,21,0.18417,21.5,0.18417,22,0.18417,22.5,0.18417,23,0.18417,23.5,0.18417,24,0.18417,24.5,0.18417,25,0.18417,25.5,0.18417,26,0.18417,26.5,0.18417,27,0.18417,27.5,0.18417,28,0.18417,28.5,0.18417,29,0.18417,29.5,0.18417,30,0.18417)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9102e-05,3,0.00015936,3.5,0.0003471,4,0.00074157,4.5,0.0015175,5,0.00275,5.5,0.0046456,6,0.0070895,6.5,0.01089,7,0.017251,7.5,0.025917,8,0.03846,8.5,0.05217,9,0.073353,9.5,0.10648,10,0.14773,10.5,0.18686,11,0.24671,11.5,0.29777,12,0.33608,12.5,0.36345,13,0.3884,13.5,0.3908,14,0.39296,14.5,0.39297,15,0.39297,15.5,0.39297,16,0.39297,16.5,0.39297,17,0.39297,17.5,0.39297,18,0.39297,18.5,0.39297,19,0.39297,19.5,0.39297,20,0.39297,20.5,0.39297,21,0.39297,21.5,0.39297,22,0.39297,22.5,0.39297,23,0.39297,23.5,0.39297,24,0.39297,24.5,0.39297,25,0.39297,25.5,0.39297,26,0.39297,26.5,0.39297,27,0.39297,27.5,0.39297,28,0.39297,28.5,0.39297,29,0.39297,29.5,0.39297,30,0.39297)}
.func RTJ(Tj) {table(Tj,25,-0.00012956,35,0.00050247,45,0.0012205,55,0.0020247,65,0.0029149,75,0.0038911,85,0.0049534,95,0.0061017,105,0.0073361,115,0.0086565,125,0.010063,135,0.011556,145,0.013134,155,0.014799,165,0.01655,175,0.018386,275,0.036754,375,0.055121,475,0.073489,575,0.091856,675,0.11022,775,0.12859,875,0.14696,975,0.16533,1075,0.18369,1175,0.20206,1275,0.22043,1375,0.2388,1475,0.25716,1575,0.27553,1675,0.2939,1775,0.31227,1875,0.33063,1975,0.349)}
.func VthFwd(Tj) {table(Tj,25,-0.57184,35,-0.5018,45,-0.43312,55,-0.36581,65,-0.29986,75,-0.23529,85,-0.17208,95,-0.11024,105,-0.049765,115,0.0093406,125,0.067078,135,0.12345,145,0.17845,155,0.23209,165,0.28435,175,0.33525,275,0.84425,375,1.3532,475,1.8622,575,2.3712,675,2.8802,775,3.3892,875,3.8982,975,4.4072,1075,4.9162,1175,5.4252,1275,5.9342,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.093,0.017,3.093,0.021,3.092,0.025,3.089,0.030,3.088,0.037,3.085,0.044,3.079,0.054,3.075,0.065,3.071,0.079,3.063,0.096,3.056,0.116,3.047,0.141,3.035,0.171,3.022,0.207,3.006,0.251,2.986,0.305,2.964,0.369,2.939,0.448,2.909,0.543,2.875,0.658,2.835,0.798,2.788,0.967,2.735,1.172,2.675,1.421,2.607,1.723,2.533,2.088,2.451,2.531,2.362,3.069,2.267,3.720,2.166,4.510,2.057,5.467,1.940,6.628,1.813,8.035,1.652,9.741,1.486,11.808,1.323,14.315,1.167,17.354,1.019,21.038,0.909,25.504,0.812,30.917,0.725,37.480,0.648,45.437,0.584,55.082,0.527,66.774,0.478,80.949,0.433,98.132,0.393,118.964,0.357,144.217,0.325,174.831,0.296,211.943,0.269,256.934,0.245,311.475,0.223,377.594,0.204,457.749,0.190,554.919,0.179,672.715,0.172,815.517,0.168,988.632,0.167,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.017,1.564,0.021,1.559,0.025,1.555,0.030,1.548,0.037,1.540,0.044,1.531,0.054,1.519,0.065,1.505,0.079,1.489,0.096,1.470,0.116,1.446,0.141,1.418,0.171,1.385,0.207,1.348,0.251,1.305,0.305,1.258,0.369,1.208,0.448,1.155,0.543,1.102,0.658,1.048,0.798,0.995,0.967,0.942,1.172,0.887,1.421,0.830,1.723,0.772,2.088,0.713,2.531,0.655,3.069,0.598,3.720,0.542,4.510,0.488,5.467,0.434,6.628,0.379,8.035,0.299,9.741,0.225,11.808,0.161,14.315,0.106,17.354,0.061,21.038,0.050,25.504,0.043,30.917,0.038,37.480,0.033,45.437,0.030,55.082,0.027,66.774,0.025,80.949,0.023,98.132,0.021,118.964,0.020,144.217,0.019,174.831,0.017,211.943,0.016,256.934,0.015,311.475,0.014,377.594,0.013,457.749,0.013,554.919,0.012,672.715,0.012,815.517,0.012,988.632,0.012,1198.496,0.013)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.836,-8.407,6.783,-7.545,6.689,-6.683,6.366,-5.821,5.854,-4.960,5.345,-4.098,4.873,-3.236,4.480,-2.374,4.391,-1.513,4.661,-0.651,5.050,0.211,5.499,1.072,5.967,1.934,6.384,2.796,6.644,3.658,6.801,4.519,6.884,5.381,6.928,6.243,6.955,7.104,6.974,7.966,6.990,8.828,7.003,9.690,7.015,10.551,7.025,11.413,7.035,12.275,7.044,13.137,7.052,13.998,7.060,14.860,7.067)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.668319e-01
.param Rs_ideal=2.750863e-02
.ENDS 21

.SUBCKT 22 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,6.3238e-06,1,9.1422e-05,1.5,0.00044691,2,0.0021847,2.5,0.01068,3,0.053493,3.5,0.18591,4,0.50095,4.5,1.1292,5,2.2294,5.5,4.029,6,6.7698,6.5,10.6618,7,15.9645,7.5,22.8969,8,31.5814,8.5,42.314,9,54.8558,9.5,69.0827,10,85.2136,10.5,103.6687,11,123.5931,11.5,145.8745,12,169.1801,12.5,192.5075,13,213.4552,13.5,232.3223,14,248.0041,14.5,261.0868,15,272.0019,15.5,282.1943,16,291.3761,16.5,299.7153,17,307.4516,17.5,315.5356,18,324.0896,18.5,333.33,19,343.2087,19.5,353.9341,20,364.4952,20.5,374.8998,21,385.1554,21.5,395.2687,22,405.2461,22.5,415.0937,23,424.817,23.5,434.4213,24,443.9116,24.5,453.2925,25,462.5684,25.5,471.7435,26,480.8216,26.5,489.8065,27,498.7017,27.5,507.5104,28,516.2359,28.5,524.881,29,533.4488,29.5,541.9898,30,550.4322)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.98369,5.5,0.94641,6,0.88598,6.5,0.81058,7,0.71927,7.5,0.63161,8,0.55439,8.5,0.48861,9,0.43282,9.5,0.38753,10,0.34882,10.5,0.31346,11,0.28518,11.5,0.25698,12,0.2318,12.5,0.21131,13,0.19802,13.5,0.18932,14,0.18554,14.5,0.18417,15,0.18417,15.5,0.18417,16,0.18417,16.5,0.18417,17,0.18417,17.5,0.18417,18,0.18417,18.5,0.18417,19,0.18417,19.5,0.18417,20,0.18417,20.5,0.18417,21,0.18417,21.5,0.18417,22,0.18417,22.5,0.18417,23,0.18417,23.5,0.18417,24,0.18417,24.5,0.18417,25,0.18417,25.5,0.18417,26,0.18417,26.5,0.18417,27,0.18417,27.5,0.18417,28,0.18417,28.5,0.18417,29,0.18417,29.5,0.18417,30,0.18417)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9102e-05,3,0.00015936,3.5,0.0003471,4,0.00074157,4.5,0.0015175,5,0.00275,5.5,0.0046456,6,0.0070895,6.5,0.01089,7,0.017251,7.5,0.025917,8,0.03846,8.5,0.05217,9,0.073353,9.5,0.10648,10,0.14773,10.5,0.18686,11,0.24671,11.5,0.29777,12,0.33608,12.5,0.36345,13,0.3884,13.5,0.3908,14,0.39296,14.5,0.39297,15,0.39297,15.5,0.39297,16,0.39297,16.5,0.39297,17,0.39297,17.5,0.39297,18,0.39297,18.5,0.39297,19,0.39297,19.5,0.39297,20,0.39297,20.5,0.39297,21,0.39297,21.5,0.39297,22,0.39297,22.5,0.39297,23,0.39297,23.5,0.39297,24,0.39297,24.5,0.39297,25,0.39297,25.5,0.39297,26,0.39297,26.5,0.39297,27,0.39297,27.5,0.39297,28,0.39297,28.5,0.39297,29,0.39297,29.5,0.39297,30,0.39297)}
.func RTJ(Tj) {table(Tj,25,-0.00012956,35,0.00050247,45,0.0012205,55,0.0020247,65,0.0029149,75,0.0038911,85,0.0049534,95,0.0061017,105,0.0073361,115,0.0086565,125,0.010063,135,0.011556,145,0.013134,155,0.014799,165,0.01655,175,0.018386,275,0.036754,375,0.055121,475,0.073489,575,0.091856,675,0.11022,775,0.12859,875,0.14696,975,0.16533,1075,0.18369,1175,0.20206,1275,0.22043,1375,0.2388,1475,0.25716,1575,0.27553,1675,0.2939,1775,0.31227,1875,0.33063,1975,0.349)}
.func VthFwd(Tj) {table(Tj,25,-0.57184,35,-0.5018,45,-0.43312,55,-0.36581,65,-0.29986,75,-0.23529,85,-0.17208,95,-0.11024,105,-0.049765,115,0.0093406,125,0.067078,135,0.12345,145,0.17845,155,0.23209,165,0.28435,175,0.33525,275,0.84425,375,1.3532,475,1.8622,575,2.3712,675,2.8802,775,3.3892,875,3.8982,975,4.4072,1075,4.9162,1175,5.4252,1275,5.9342,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.26683,-4,0.25329,-3,0.23201,-2,0.20187,-1,0.16926,0,0.14269,1,0.12372,2,0.24071,3,0.27244,4,0.20308,5,0.15037,6,0.11862,7,0.10031,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.12028,18,0.16335)}
.func Rs(Vgs) {table(Vgs,-5,0.027509,-4,0.027126,-3,0.029009,-2,0.033275,-1,0.03729,0,0.037475,1,0.034103,2,0.024693,3,0.023938,4,0.028837,5,0.03362,6,0.039502,7,0.048133,8,0.055581,9,0.06624,10,0.080712,11,0.099054,12,0.11041,13,0.11052,14,0.12772,15,0.16741,16,0.20863,17,0.25826,18,0.28527)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,0.016519,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2318,35,1.0859,45,0.97547,55,0.90037,65,0.86063,75,0.85625,85,0.88723,95,0.95357,105,1.0553,115,1.1923,125,1.3648,135,1.5725,145,1.8157,155,2.0942,165,2.408,175,2.7573,275,6.2495,375,9.7418,475,13.234,575,16.7262,675,20.2185,775,23.7107,875,27.203,975,30.6952,1075,34.1874,1175,37.6797,1275,41.1719,1375,44.6642,1475,48.1564,1575,51.6486,1675,55.1409,1775,58.6331,1875,62.1254,1975,65.6176)}
.func nscal(Tj) {table(Tj,25,1.0629,35,1.0384,45,1.0188,55,1.0042,65,0.9946,75,0.98993,85,0.99024,95,0.9955,105,1.0057,115,1.0209,125,1.0411,135,1.0662,145,1.0963,155,1.1314,165,1.1714,175,1.2164,275,1.6663,375,2.1162,475,2.5661,575,3.0159,675,3.4658,775,3.9157,875,4.3656,975,4.8155,1075,5.2654,1175,5.7153,1275,6.1652,1375,6.6151,1475,7.0649,1575,7.5148,1675,7.9647,1775,8.4146,1875,8.8645,1975,9.3144)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.093,0.017,3.093,0.021,3.092,0.025,3.089,0.030,3.088,0.037,3.085,0.044,3.079,0.054,3.075,0.065,3.071,0.079,3.063,0.096,3.056,0.116,3.047,0.141,3.035,0.171,3.022,0.207,3.006,0.251,2.986,0.305,2.964,0.369,2.939,0.448,2.909,0.543,2.875,0.658,2.835,0.798,2.788,0.967,2.735,1.172,2.675,1.421,2.607,1.723,2.533,2.088,2.451,2.531,2.362,3.069,2.267,3.720,2.166,4.510,2.057,5.467,1.940,6.628,1.813,8.035,1.652,9.741,1.486,11.808,1.323,14.315,1.167,17.354,1.019,21.038,0.909,25.504,0.812,30.917,0.725,37.480,0.648,45.437,0.584,55.082,0.527,66.774,0.478,80.949,0.433,98.132,0.393,118.964,0.357,144.217,0.325,174.831,0.296,211.943,0.269,256.934,0.245,311.475,0.223,377.594,0.204,457.749,0.190,554.919,0.179,672.715,0.172,815.517,0.168,988.632,0.167,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.017,1.564,0.021,1.559,0.025,1.555,0.030,1.548,0.037,1.540,0.044,1.531,0.054,1.519,0.065,1.505,0.079,1.489,0.096,1.470,0.116,1.446,0.141,1.418,0.171,1.385,0.207,1.348,0.251,1.305,0.305,1.258,0.369,1.208,0.448,1.155,0.543,1.102,0.658,1.048,0.798,0.995,0.967,0.942,1.172,0.887,1.421,0.830,1.723,0.772,2.088,0.713,2.531,0.655,3.069,0.598,3.720,0.542,4.510,0.488,5.467,0.434,6.628,0.379,8.035,0.299,9.741,0.225,11.808,0.161,14.315,0.106,17.354,0.061,21.038,0.050,25.504,0.043,30.917,0.038,37.480,0.033,45.437,0.030,55.082,0.027,66.774,0.025,80.949,0.023,98.132,0.021,118.964,0.020,144.217,0.019,174.831,0.017,211.943,0.016,256.934,0.015,311.475,0.014,377.594,0.013,457.749,0.013,554.919,0.012,672.715,0.012,815.517,0.012,988.632,0.012,1198.496,0.013)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.836,-8.407,6.783,-7.545,6.689,-6.683,6.366,-5.821,5.854,-4.960,5.345,-4.098,4.873,-3.236,4.480,-2.374,4.391,-1.513,4.661,-0.651,5.050,0.211,5.499,1.072,5.967,1.934,6.384,2.796,6.644,3.658,6.801,4.519,6.884,5.381,6.928,6.243,6.955,7.104,6.974,7.966,6.990,8.828,7.003,9.690,7.015,10.551,7.025,11.413,7.035,12.275,7.044,13.137,7.052,13.998,7.060,14.860,7.067)}


.ENDS 22

.SUBCKT 23 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,6.3238e-06,1,9.1422e-05,1.5,0.00044691,2,0.0021847,2.5,0.01068,3,0.053493,3.5,0.18591,4,0.50095,4.5,1.1292,5,2.2294,5.5,4.029,6,6.7698,6.5,10.6618,7,15.9645,7.5,22.8969,8,31.5814,8.5,42.314,9,54.8558,9.5,69.0827,10,85.2136,10.5,103.6687,11,123.5931,11.5,145.8745,12,169.1801,12.5,192.5075,13,213.4552,13.5,232.3223,14,248.0041,14.5,261.0868,15,272.0019,15.5,282.1943,16,291.3761,16.5,299.7153,17,307.4516,17.5,315.5356,18,324.0896,18.5,333.33,19,343.2087,19.5,353.9341,20,364.4952,20.5,374.8998,21,385.1554,21.5,395.2687,22,405.2461,22.5,415.0937,23,424.817,23.5,434.4213,24,443.9116,24.5,453.2925,25,462.5684,25.5,471.7435,26,480.8216,26.5,489.8065,27,498.7017,27.5,507.5104,28,516.2359,28.5,524.881,29,533.4488,29.5,541.9898,30,550.4322)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.98369,5.5,0.94641,6,0.88598,6.5,0.81058,7,0.71927,7.5,0.63161,8,0.55439,8.5,0.48861,9,0.43282,9.5,0.38753,10,0.34882,10.5,0.31346,11,0.28518,11.5,0.25698,12,0.2318,12.5,0.21131,13,0.19802,13.5,0.18932,14,0.18554,14.5,0.18417,15,0.18417,15.5,0.18417,16,0.18417,16.5,0.18417,17,0.18417,17.5,0.18417,18,0.18417,18.5,0.18417,19,0.18417,19.5,0.18417,20,0.18417,20.5,0.18417,21,0.18417,21.5,0.18417,22,0.18417,22.5,0.18417,23,0.18417,23.5,0.18417,24,0.18417,24.5,0.18417,25,0.18417,25.5,0.18417,26,0.18417,26.5,0.18417,27,0.18417,27.5,0.18417,28,0.18417,28.5,0.18417,29,0.18417,29.5,0.18417,30,0.18417)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9102e-05,3,0.00015936,3.5,0.0003471,4,0.00074157,4.5,0.0015175,5,0.00275,5.5,0.0046456,6,0.0070895,6.5,0.01089,7,0.017251,7.5,0.025917,8,0.03846,8.5,0.05217,9,0.073353,9.5,0.10648,10,0.14773,10.5,0.18686,11,0.24671,11.5,0.29777,12,0.33608,12.5,0.36345,13,0.3884,13.5,0.3908,14,0.39296,14.5,0.39297,15,0.39297,15.5,0.39297,16,0.39297,16.5,0.39297,17,0.39297,17.5,0.39297,18,0.39297,18.5,0.39297,19,0.39297,19.5,0.39297,20,0.39297,20.5,0.39297,21,0.39297,21.5,0.39297,22,0.39297,22.5,0.39297,23,0.39297,23.5,0.39297,24,0.39297,24.5,0.39297,25,0.39297,25.5,0.39297,26,0.39297,26.5,0.39297,27,0.39297,27.5,0.39297,28,0.39297,28.5,0.39297,29,0.39297,29.5,0.39297,30,0.39297)}
.func RTJ(Tj) {table(Tj,25,-0.00012956,35,0.00050247,45,0.0012205,55,0.0020247,65,0.0029149,75,0.0038911,85,0.0049534,95,0.0061017,105,0.0073361,115,0.0086565,125,0.010063,135,0.011556,145,0.013134,155,0.014799,165,0.01655,175,0.018386,275,0.036754,375,0.055121,475,0.073489,575,0.091856,675,0.11022,775,0.12859,875,0.14696,975,0.16533,1075,0.18369,1175,0.20206,1275,0.22043,1375,0.2388,1475,0.25716,1575,0.27553,1675,0.2939,1775,0.31227,1875,0.33063,1975,0.349)}
.func VthFwd(Tj) {table(Tj,25,-0.57184,35,-0.5018,45,-0.43312,55,-0.36581,65,-0.29986,75,-0.23529,85,-0.17208,95,-0.11024,105,-0.049765,115,0.0093406,125,0.067078,135,0.12345,145,0.17845,155,0.23209,165,0.28435,175,0.33525,275,0.84425,375,1.3532,475,1.8622,575,2.3712,675,2.8802,775,3.3892,875,3.8982,975,4.4072,1075,4.9162,1175,5.4252,1275,5.9342,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.26683,-4,0.25329,-3,0.23201,-2,0.20187,-1,0.16926,0,0.14269,1,0.12372,2,0.24071,3,0.27244,4,0.20308,5,0.15037,6,0.11862,7,0.10031,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.12028,18,0.16335)}
.func Rs(Vgs) {table(Vgs,-5,0.027509,-4,0.027126,-3,0.029009,-2,0.033275,-1,0.03729,0,0.037475,1,0.034103,2,0.024693,3,0.023938,4,0.028837,5,0.03362,6,0.039502,7,0.048133,8,0.055581,9,0.06624,10,0.080712,11,0.099054,12,0.11041,13,0.11052,14,0.12772,15,0.16741,16,0.20863,17,0.25826,18,0.28527)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,0.016519,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2318,35,1.0859,45,0.97547,55,0.90037,65,0.86063,75,0.85625,85,0.88723,95,0.95357,105,1.0553,115,1.1923,125,1.3648,135,1.5725,145,1.8157,155,2.0942,165,2.408,175,2.7573,275,6.2495,375,9.7418,475,13.234,575,16.7262,675,20.2185,775,23.7107,875,27.203,975,30.6952,1075,34.1874,1175,37.6797,1275,41.1719,1375,44.6642,1475,48.1564,1575,51.6486,1675,55.1409,1775,58.6331,1875,62.1254,1975,65.6176)}
.func nscal(Tj) {table(Tj,25,1.0629,35,1.0384,45,1.0188,55,1.0042,65,0.9946,75,0.98993,85,0.99024,95,0.9955,105,1.0057,115,1.0209,125,1.0411,135,1.0662,145,1.0963,155,1.1314,165,1.1714,175,1.2164,275,1.6663,375,2.1162,475,2.5661,575,3.0159,675,3.4658,775,3.9157,875,4.3656,975,4.8155,1075,5.2654,1175,5.7153,1275,6.1652,1375,6.6151,1475,7.0649,1575,7.5148,1675,7.9647,1775,8.4146,1875,8.8645,1975,9.3144)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.093,0.017,3.093,0.021,3.092,0.025,3.089,0.030,3.088,0.037,3.085,0.044,3.079,0.054,3.075,0.065,3.071,0.079,3.063,0.096,3.056,0.116,3.047,0.141,3.035,0.171,3.022,0.207,3.006,0.251,2.986,0.305,2.964,0.369,2.939,0.448,2.909,0.543,2.875,0.658,2.835,0.798,2.788,0.967,2.735,1.172,2.675,1.421,2.607,1.723,2.533,2.088,2.451,2.531,2.362,3.069,2.267,3.720,2.166,4.510,2.057,5.467,1.940,6.628,1.813,8.035,1.652,9.741,1.486,11.808,1.323,14.315,1.167,17.354,1.019,21.038,0.909,25.504,0.812,30.917,0.725,37.480,0.648,45.437,0.584,55.082,0.527,66.774,0.478,80.949,0.433,98.132,0.393,118.964,0.357,144.217,0.325,174.831,0.296,211.943,0.269,256.934,0.245,311.475,0.223,377.594,0.204,457.749,0.190,554.919,0.179,672.715,0.172,815.517,0.168,988.632,0.167,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.017,1.564,0.021,1.559,0.025,1.555,0.030,1.548,0.037,1.540,0.044,1.531,0.054,1.519,0.065,1.505,0.079,1.489,0.096,1.470,0.116,1.446,0.141,1.418,0.171,1.385,0.207,1.348,0.251,1.305,0.305,1.258,0.369,1.208,0.448,1.155,0.543,1.102,0.658,1.048,0.798,0.995,0.967,0.942,1.172,0.887,1.421,0.830,1.723,0.772,2.088,0.713,2.531,0.655,3.069,0.598,3.720,0.542,4.510,0.488,5.467,0.434,6.628,0.379,8.035,0.299,9.741,0.225,11.808,0.161,14.315,0.106,17.354,0.061,21.038,0.050,25.504,0.043,30.917,0.038,37.480,0.033,45.437,0.030,55.082,0.027,66.774,0.025,80.949,0.023,98.132,0.021,118.964,0.020,144.217,0.019,174.831,0.017,211.943,0.016,256.934,0.015,311.475,0.014,377.594,0.013,457.749,0.013,554.919,0.012,672.715,0.012,815.517,0.012,988.632,0.012,1198.496,0.013)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.836,-8.407,6.783,-7.545,6.689,-6.683,6.366,-5.821,5.854,-4.960,5.345,-4.098,4.873,-3.236,4.480,-2.374,4.391,-1.513,4.661,-0.651,5.050,0.211,5.499,1.072,5.967,1.934,6.384,2.796,6.644,3.658,6.801,4.519,6.884,5.381,6.928,6.243,6.955,7.104,6.974,7.966,6.990,8.828,7.003,9.690,7.015,10.551,7.025,11.413,7.035,12.275,7.044,13.137,7.052,13.998,7.060,14.860,7.067)}


.ENDS 23

.SUBCKT 31 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.9785e-06,1,8.1165e-05,1.5,0.00038434,2,0.00182,2.5,0.0086182,3,0.04081,3.5,0.13573,4,0.35531,4.5,0.77588,5,1.5042,5.5,2.6684,6,4.4189,6.5,6.9119,7,10.2733,7.5,14.6325,8,20.1841,8.5,27.0343,9,35.2991,9.5,45.014,10,56.5446,10.5,68.8711,11,82.464,11.5,95.8913,12,109.2593,12.5,122.8695,13,136.6889,13.5,149.5232,14,161.5379,14.5,172.5505,15,181.4785,15.5,188.9438,16,194.9511,16.5,200.6984,17,205.8148,17.5,211.1155,18,216.658,18.5,222.8372,19,229.3591,19.5,236.4051,20,243.309,20.5,250.0775,21,256.7168,21.5,263.2325,22,269.6303,22.5,275.915,23,282.0914,23.5,288.164,24,294.1369,24.5,300.0141,25,305.7992,25.5,311.4958,26,317.1071,26.5,322.6363,27,328.0862,27.5,333.4597,28,338.7595,28.5,343.9879,29,349.1475,29.5,354.2833,30,359.3312)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99751,5.5,0.97359,6,0.92721,6.5,0.85977,7,0.7765,7.5,0.68181,8,0.59392,8.5,0.51747,9,0.45264,9.5,0.39591,10,0.34406,10.5,0.3049,11,0.27221,11.5,0.24738,12,0.2278,12.5,0.21328,13,0.19897,13.5,0.18828,14,0.17916,14.5,0.17253,15,0.16987,15.5,0.16895,16,0.16895,16.5,0.16895,17,0.16895,17.5,0.16895,18,0.16895,18.5,0.16895,19,0.16895,19.5,0.16895,20,0.16895,20.5,0.16895,21,0.16895,21.5,0.16895,22,0.16895,22.5,0.16895,23,0.16895,23.5,0.16895,24,0.16895,24.5,0.16895,25,0.16895,25.5,0.16895,26,0.16895,26.5,0.16895,27,0.16895,27.5,0.16895,28,0.16895,28.5,0.16895,29,0.16895,29.5,0.16895,30,0.16895)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.5538e-05,3.5,0.00024216,4,0.00045738,4.5,0.00086912,5,0.0016065,5.5,0.0026652,6,0.004083,6.5,0.0059679,7,0.0088976,7.5,0.013142,8,0.018084,8.5,0.023537,9,0.03066,9.5,0.03798,10,0.044757,10.5,0.061559,11,0.077419,11.5,0.14512,12,0.25479,12.5,0.38231,13,0.50393,13.5,0.62706,14,0.69616,14.5,0.72185,15,0.72861,15.5,0.73013,16,0.73013,16.5,0.73013,17,0.73013,17.5,0.73013,18,0.73013,18.5,0.73013,19,0.73013,19.5,0.73013,20,0.73013,20.5,0.73013,21,0.73013,21.5,0.73013,22,0.73013,22.5,0.73013,23,0.73013,23.5,0.73013,24,0.73013,24.5,0.73013,25,0.73013,25.5,0.73013,26,0.73013,26.5,0.73013,27,0.73013,27.5,0.73013,28,0.73013,28.5,0.73013,29,0.73013,29.5,0.73013,30,0.73013)}
.func RTJ(Tj) {table(Tj,25,-0.0016322,35,-0.00038574,45,0.00094864,55,0.002371,65,0.0038813,75,0.0054795,85,0.0071657,95,0.0089398,105,0.010802,115,0.012752,125,0.01479,135,0.016916,145,0.01913,155,0.021432,165,0.023821,175,0.026299,275,0.051077,375,0.075854,475,0.10063,575,0.12541,675,0.15019,775,0.17496,875,0.19974,975,0.22452,1075,0.2493,1175,0.27407,1275,0.29885,1375,0.32363,1475,0.34841,1575,0.37318,1675,0.39796,1775,0.42274,1875,0.44752,1975,0.47229)}
.func VthFwd(Tj) {table(Tj,25,-0.65545,35,-0.57401,45,-0.49429,55,-0.41628,65,-0.33999,75,-0.26542,85,-0.19257,95,-0.12143,105,-0.052008,115,0.015695,125,0.081681,135,0.14595,145,0.2085,155,0.26934,165,0.32846,175,0.38586,275,0.95987,375,1.5339,475,2.1079,575,2.6819,675,3.2559,775,3.8299,875,4.4039,975,4.9779,1075,5.552,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.271,0.016,2.268,0.020,2.266,0.024,2.265,0.029,2.262,0.035,2.260,0.043,2.258,0.052,2.254,0.063,2.250,0.077,2.244,0.093,2.239,0.113,2.232,0.137,2.224,0.166,2.213,0.202,2.200,0.245,2.185,0.297,2.167,0.360,2.147,0.437,2.124,0.529,2.098,0.642,2.068,0.779,2.033,0.945,1.994,1.146,1.949,1.391,1.899,1.687,1.844,2.046,1.784,2.482,1.719,3.011,1.649,3.652,1.576,4.430,1.498,5.374,1.416,6.519,1.321,7.907,1.202,9.592,1.082,11.635,0.962,14.114,0.846,17.120,0.742,20.767,0.663,25.191,0.592,30.557,0.528,37.067,0.472,44.963,0.425,54.541,0.383,66.160,0.347,80.253,0.314,97.349,0.285,118.087,0.259,143.243,0.236,173.757,0.214,210.771,0.195,255.671,0.178,310.135,0.163,376.201,0.149,456.341,0.138,553.553,0.130,671.474,0.125,814.514,0.122,988.025,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.016,1.043,0.020,1.040,0.024,1.037,0.029,1.033,0.035,1.028,0.043,1.022,0.052,1.014,0.063,1.005,0.077,0.994,0.093,0.981,0.113,0.964,0.137,0.946,0.166,0.924,0.202,0.899,0.245,0.869,0.297,0.835,0.360,0.799,0.437,0.761,0.529,0.722,0.642,0.683,0.779,0.645,0.945,0.608,1.146,0.570,1.391,0.531,1.687,0.492,2.046,0.453,2.482,0.414,3.011,0.377,3.652,0.340,4.430,0.304,5.374,0.268,6.519,0.229,7.907,0.176,9.592,0.130,11.635,0.090,14.114,0.057,17.120,0.033,20.767,0.029,25.191,0.026,30.557,0.022,37.067,0.020,44.963,0.018,54.541,0.017,66.160,0.015,80.253,0.014,97.349,0.013,118.087,0.012,143.243,0.012,173.757,0.011,210.771,0.010,255.671,0.010,310.135,0.009,376.201,0.009,456.341,0.008,553.553,0.008,671.474,0.008,814.514,0.008,988.025,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.408,-8.349,4.368,-7.488,4.282,-6.627,4.031,-5.767,3.689,-4.906,3.358,-4.045,3.055,-3.184,2.823,-2.324,2.810,-1.463,2.998,-0.602,3.256,0.258,3.561,1.119,3.877,1.980,4.157,2.840,4.338,3.701,4.452,4.562,4.513,5.422,4.549,6.283,4.575,7.144,4.595,8.004,4.612,8.865,4.626,9.726,4.639,10.587,4.649,11.447,4.658,12.308,4.666,13.169,4.673,14.029,4.680,14.890,4.685)}


.param Is_ideal=1.004388e-06
.param n_ideal=2.392005e-01
.param Rs_ideal=3.507309e-02
.ENDS 31

.SUBCKT 32 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.9785e-06,1,8.1165e-05,1.5,0.00038434,2,0.00182,2.5,0.0086182,3,0.04081,3.5,0.13573,4,0.35531,4.5,0.77588,5,1.5042,5.5,2.6684,6,4.4189,6.5,6.9119,7,10.2733,7.5,14.6325,8,20.1841,8.5,27.0343,9,35.2991,9.5,45.014,10,56.5446,10.5,68.8711,11,82.464,11.5,95.8913,12,109.2593,12.5,122.8695,13,136.6889,13.5,149.5232,14,161.5379,14.5,172.5505,15,181.4785,15.5,188.9438,16,194.9511,16.5,200.6984,17,205.8148,17.5,211.1155,18,216.658,18.5,222.8372,19,229.3591,19.5,236.4051,20,243.309,20.5,250.0775,21,256.7168,21.5,263.2325,22,269.6303,22.5,275.915,23,282.0914,23.5,288.164,24,294.1369,24.5,300.0141,25,305.7992,25.5,311.4958,26,317.1071,26.5,322.6363,27,328.0862,27.5,333.4597,28,338.7595,28.5,343.9879,29,349.1475,29.5,354.2833,30,359.3312)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99751,5.5,0.97359,6,0.92721,6.5,0.85977,7,0.7765,7.5,0.68181,8,0.59392,8.5,0.51747,9,0.45264,9.5,0.39591,10,0.34406,10.5,0.3049,11,0.27221,11.5,0.24738,12,0.2278,12.5,0.21328,13,0.19897,13.5,0.18828,14,0.17916,14.5,0.17253,15,0.16987,15.5,0.16895,16,0.16895,16.5,0.16895,17,0.16895,17.5,0.16895,18,0.16895,18.5,0.16895,19,0.16895,19.5,0.16895,20,0.16895,20.5,0.16895,21,0.16895,21.5,0.16895,22,0.16895,22.5,0.16895,23,0.16895,23.5,0.16895,24,0.16895,24.5,0.16895,25,0.16895,25.5,0.16895,26,0.16895,26.5,0.16895,27,0.16895,27.5,0.16895,28,0.16895,28.5,0.16895,29,0.16895,29.5,0.16895,30,0.16895)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.5538e-05,3.5,0.00024216,4,0.00045738,4.5,0.00086912,5,0.0016065,5.5,0.0026652,6,0.004083,6.5,0.0059679,7,0.0088976,7.5,0.013142,8,0.018084,8.5,0.023537,9,0.03066,9.5,0.03798,10,0.044757,10.5,0.061559,11,0.077419,11.5,0.14512,12,0.25479,12.5,0.38231,13,0.50393,13.5,0.62706,14,0.69616,14.5,0.72185,15,0.72861,15.5,0.73013,16,0.73013,16.5,0.73013,17,0.73013,17.5,0.73013,18,0.73013,18.5,0.73013,19,0.73013,19.5,0.73013,20,0.73013,20.5,0.73013,21,0.73013,21.5,0.73013,22,0.73013,22.5,0.73013,23,0.73013,23.5,0.73013,24,0.73013,24.5,0.73013,25,0.73013,25.5,0.73013,26,0.73013,26.5,0.73013,27,0.73013,27.5,0.73013,28,0.73013,28.5,0.73013,29,0.73013,29.5,0.73013,30,0.73013)}
.func RTJ(Tj) {table(Tj,25,-0.0016322,35,-0.00038574,45,0.00094864,55,0.002371,65,0.0038813,75,0.0054795,85,0.0071657,95,0.0089398,105,0.010802,115,0.012752,125,0.01479,135,0.016916,145,0.01913,155,0.021432,165,0.023821,175,0.026299,275,0.051077,375,0.075854,475,0.10063,575,0.12541,675,0.15019,775,0.17496,875,0.19974,975,0.22452,1075,0.2493,1175,0.27407,1275,0.29885,1375,0.32363,1475,0.34841,1575,0.37318,1675,0.39796,1775,0.42274,1875,0.44752,1975,0.47229)}
.func VthFwd(Tj) {table(Tj,25,-0.65545,35,-0.57401,45,-0.49429,55,-0.41628,65,-0.33999,75,-0.26542,85,-0.19257,95,-0.12143,105,-0.052008,115,0.015695,125,0.081681,135,0.14595,145,0.2085,155,0.26934,165,0.32846,175,0.38586,275,0.95987,375,1.5339,475,2.1079,575,2.6819,675,3.2559,775,3.8299,875,4.4039,975,4.9779,1075,5.552,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.2392,-4,0.26775,-3,0.24764,-2,0.21942,-1,0.18616,0,0.15457,1,0.12968,2,0.14737,3,0.25893,4,0.2439,5,0.19231,6,0.16065,7,0.1452,8,0.13371,9,0.11858,10,0.10345,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.035073,-4,0.033157,-3,0.03534,-2,0.039978,-1,0.045884,0,0.049631,1,0.049478,2,0.045085,3,0.036432,4,0.036097,5,0.041108,6,0.047779,7,0.057631,8,0.069083,9,0.086853,10,0.10482,11,0.11672,12,0.12382,13,0.13558,14,0.13987,15,0.14621,16,0.16274,17,0.17902,18,0.20301)}
.func Is(Vgs) {table(Vgs,-5,1.0044e-06,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1.0175e-05,2,0.00030079,3,0.053716,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2203,35,1.0726,45,0.96121,55,0.8863,65,0.84781,75,0.84576,85,0.88013,95,0.95094,105,1.0582,115,1.2018,125,1.3819,135,1.5984,145,1.8514,155,2.1408,165,2.4666,175,2.8288,275,6.4512,375,10.0735,475,13.6959,575,17.3182,675,20.9406,775,24.5629,875,28.1853,975,31.8076,1075,35.43,1175,39.0523,1275,42.6747,1375,46.297,1475,49.9194,1575,53.5418,1675,57.1641,1775,60.7865,1875,64.4088,1975,68.0312)}
.func nscal(Tj) {table(Tj,25,1.0805,35,1.0492,45,1.0242,55,1.0056,65,0.99324,75,0.98726,85,0.98761,95,0.99429,105,1.0073,115,1.0266,125,1.0523,135,1.0843,145,1.1226,155,1.1673,165,1.2183,175,1.2756,275,1.8488,375,2.422,475,2.9953,575,3.5685,675,4.1417,775,4.7149,875,5.2881,975,5.8614,1075,6.4346,1175,7.0078,1275,7.581,1375,8.1542,1475,8.7274,1575,9.3007,1675,9.8739,1775,10.4471,1875,11.0203,1975,11.5935)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.271,0.016,2.268,0.020,2.266,0.024,2.265,0.029,2.262,0.035,2.260,0.043,2.258,0.052,2.254,0.063,2.250,0.077,2.244,0.093,2.239,0.113,2.232,0.137,2.224,0.166,2.213,0.202,2.200,0.245,2.185,0.297,2.167,0.360,2.147,0.437,2.124,0.529,2.098,0.642,2.068,0.779,2.033,0.945,1.994,1.146,1.949,1.391,1.899,1.687,1.844,2.046,1.784,2.482,1.719,3.011,1.649,3.652,1.576,4.430,1.498,5.374,1.416,6.519,1.321,7.907,1.202,9.592,1.082,11.635,0.962,14.114,0.846,17.120,0.742,20.767,0.663,25.191,0.592,30.557,0.528,37.067,0.472,44.963,0.425,54.541,0.383,66.160,0.347,80.253,0.314,97.349,0.285,118.087,0.259,143.243,0.236,173.757,0.214,210.771,0.195,255.671,0.178,310.135,0.163,376.201,0.149,456.341,0.138,553.553,0.130,671.474,0.125,814.514,0.122,988.025,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.016,1.043,0.020,1.040,0.024,1.037,0.029,1.033,0.035,1.028,0.043,1.022,0.052,1.014,0.063,1.005,0.077,0.994,0.093,0.981,0.113,0.964,0.137,0.946,0.166,0.924,0.202,0.899,0.245,0.869,0.297,0.835,0.360,0.799,0.437,0.761,0.529,0.722,0.642,0.683,0.779,0.645,0.945,0.608,1.146,0.570,1.391,0.531,1.687,0.492,2.046,0.453,2.482,0.414,3.011,0.377,3.652,0.340,4.430,0.304,5.374,0.268,6.519,0.229,7.907,0.176,9.592,0.130,11.635,0.090,14.114,0.057,17.120,0.033,20.767,0.029,25.191,0.026,30.557,0.022,37.067,0.020,44.963,0.018,54.541,0.017,66.160,0.015,80.253,0.014,97.349,0.013,118.087,0.012,143.243,0.012,173.757,0.011,210.771,0.010,255.671,0.010,310.135,0.009,376.201,0.009,456.341,0.008,553.553,0.008,671.474,0.008,814.514,0.008,988.025,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.408,-8.349,4.368,-7.488,4.282,-6.627,4.031,-5.767,3.689,-4.906,3.358,-4.045,3.055,-3.184,2.823,-2.324,2.810,-1.463,2.998,-0.602,3.256,0.258,3.561,1.119,3.877,1.980,4.157,2.840,4.338,3.701,4.452,4.562,4.513,5.422,4.549,6.283,4.575,7.144,4.595,8.004,4.612,8.865,4.626,9.726,4.639,10.587,4.649,11.447,4.658,12.308,4.666,13.169,4.673,14.029,4.680,14.890,4.685)}


.ENDS 32

.SUBCKT 33 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.9785e-06,1,8.1165e-05,1.5,0.00038434,2,0.00182,2.5,0.0086182,3,0.04081,3.5,0.13573,4,0.35531,4.5,0.77588,5,1.5042,5.5,2.6684,6,4.4189,6.5,6.9119,7,10.2733,7.5,14.6325,8,20.1841,8.5,27.0343,9,35.2991,9.5,45.014,10,56.5446,10.5,68.8711,11,82.464,11.5,95.8913,12,109.2593,12.5,122.8695,13,136.6889,13.5,149.5232,14,161.5379,14.5,172.5505,15,181.4785,15.5,188.9438,16,194.9511,16.5,200.6984,17,205.8148,17.5,211.1155,18,216.658,18.5,222.8372,19,229.3591,19.5,236.4051,20,243.309,20.5,250.0775,21,256.7168,21.5,263.2325,22,269.6303,22.5,275.915,23,282.0914,23.5,288.164,24,294.1369,24.5,300.0141,25,305.7992,25.5,311.4958,26,317.1071,26.5,322.6363,27,328.0862,27.5,333.4597,28,338.7595,28.5,343.9879,29,349.1475,29.5,354.2833,30,359.3312)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99751,5.5,0.97359,6,0.92721,6.5,0.85977,7,0.7765,7.5,0.68181,8,0.59392,8.5,0.51747,9,0.45264,9.5,0.39591,10,0.34406,10.5,0.3049,11,0.27221,11.5,0.24738,12,0.2278,12.5,0.21328,13,0.19897,13.5,0.18828,14,0.17916,14.5,0.17253,15,0.16987,15.5,0.16895,16,0.16895,16.5,0.16895,17,0.16895,17.5,0.16895,18,0.16895,18.5,0.16895,19,0.16895,19.5,0.16895,20,0.16895,20.5,0.16895,21,0.16895,21.5,0.16895,22,0.16895,22.5,0.16895,23,0.16895,23.5,0.16895,24,0.16895,24.5,0.16895,25,0.16895,25.5,0.16895,26,0.16895,26.5,0.16895,27,0.16895,27.5,0.16895,28,0.16895,28.5,0.16895,29,0.16895,29.5,0.16895,30,0.16895)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.5538e-05,3.5,0.00024216,4,0.00045738,4.5,0.00086912,5,0.0016065,5.5,0.0026652,6,0.004083,6.5,0.0059679,7,0.0088976,7.5,0.013142,8,0.018084,8.5,0.023537,9,0.03066,9.5,0.03798,10,0.044757,10.5,0.061559,11,0.077419,11.5,0.14512,12,0.25479,12.5,0.38231,13,0.50393,13.5,0.62706,14,0.69616,14.5,0.72185,15,0.72861,15.5,0.73013,16,0.73013,16.5,0.73013,17,0.73013,17.5,0.73013,18,0.73013,18.5,0.73013,19,0.73013,19.5,0.73013,20,0.73013,20.5,0.73013,21,0.73013,21.5,0.73013,22,0.73013,22.5,0.73013,23,0.73013,23.5,0.73013,24,0.73013,24.5,0.73013,25,0.73013,25.5,0.73013,26,0.73013,26.5,0.73013,27,0.73013,27.5,0.73013,28,0.73013,28.5,0.73013,29,0.73013,29.5,0.73013,30,0.73013)}
.func RTJ(Tj) {table(Tj,25,-0.0016322,35,-0.00038574,45,0.00094864,55,0.002371,65,0.0038813,75,0.0054795,85,0.0071657,95,0.0089398,105,0.010802,115,0.012752,125,0.01479,135,0.016916,145,0.01913,155,0.021432,165,0.023821,175,0.026299,275,0.051077,375,0.075854,475,0.10063,575,0.12541,675,0.15019,775,0.17496,875,0.19974,975,0.22452,1075,0.2493,1175,0.27407,1275,0.29885,1375,0.32363,1475,0.34841,1575,0.37318,1675,0.39796,1775,0.42274,1875,0.44752,1975,0.47229)}
.func VthFwd(Tj) {table(Tj,25,-0.65545,35,-0.57401,45,-0.49429,55,-0.41628,65,-0.33999,75,-0.26542,85,-0.19257,95,-0.12143,105,-0.052008,115,0.015695,125,0.081681,135,0.14595,145,0.2085,155,0.26934,165,0.32846,175,0.38586,275,0.95987,375,1.5339,475,2.1079,575,2.6819,675,3.2559,775,3.8299,875,4.4039,975,4.9779,1075,5.552,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.2392,-4,0.26775,-3,0.24764,-2,0.21942,-1,0.18616,0,0.15457,1,0.12968,2,0.14737,3,0.25893,4,0.2439,5,0.19231,6,0.16065,7,0.1452,8,0.13371,9,0.11858,10,0.10345,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.035073,-4,0.033157,-3,0.03534,-2,0.039978,-1,0.045884,0,0.049631,1,0.049478,2,0.045085,3,0.036432,4,0.036097,5,0.041108,6,0.047779,7,0.057631,8,0.069083,9,0.086853,10,0.10482,11,0.11672,12,0.12382,13,0.13558,14,0.13987,15,0.14621,16,0.16274,17,0.17902,18,0.20301)}
.func Is(Vgs) {table(Vgs,-5,1.0044e-06,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1.0175e-05,2,0.00030079,3,0.053716,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2203,35,1.0726,45,0.96121,55,0.8863,65,0.84781,75,0.84576,85,0.88013,95,0.95094,105,1.0582,115,1.2018,125,1.3819,135,1.5984,145,1.8514,155,2.1408,165,2.4666,175,2.8288,275,6.4512,375,10.0735,475,13.6959,575,17.3182,675,20.9406,775,24.5629,875,28.1853,975,31.8076,1075,35.43,1175,39.0523,1275,42.6747,1375,46.297,1475,49.9194,1575,53.5418,1675,57.1641,1775,60.7865,1875,64.4088,1975,68.0312)}
.func nscal(Tj) {table(Tj,25,1.0805,35,1.0492,45,1.0242,55,1.0056,65,0.99324,75,0.98726,85,0.98761,95,0.99429,105,1.0073,115,1.0266,125,1.0523,135,1.0843,145,1.1226,155,1.1673,165,1.2183,175,1.2756,275,1.8488,375,2.422,475,2.9953,575,3.5685,675,4.1417,775,4.7149,875,5.2881,975,5.8614,1075,6.4346,1175,7.0078,1275,7.581,1375,8.1542,1475,8.7274,1575,9.3007,1675,9.8739,1775,10.4471,1875,11.0203,1975,11.5935)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.271,0.016,2.268,0.020,2.266,0.024,2.265,0.029,2.262,0.035,2.260,0.043,2.258,0.052,2.254,0.063,2.250,0.077,2.244,0.093,2.239,0.113,2.232,0.137,2.224,0.166,2.213,0.202,2.200,0.245,2.185,0.297,2.167,0.360,2.147,0.437,2.124,0.529,2.098,0.642,2.068,0.779,2.033,0.945,1.994,1.146,1.949,1.391,1.899,1.687,1.844,2.046,1.784,2.482,1.719,3.011,1.649,3.652,1.576,4.430,1.498,5.374,1.416,6.519,1.321,7.907,1.202,9.592,1.082,11.635,0.962,14.114,0.846,17.120,0.742,20.767,0.663,25.191,0.592,30.557,0.528,37.067,0.472,44.963,0.425,54.541,0.383,66.160,0.347,80.253,0.314,97.349,0.285,118.087,0.259,143.243,0.236,173.757,0.214,210.771,0.195,255.671,0.178,310.135,0.163,376.201,0.149,456.341,0.138,553.553,0.130,671.474,0.125,814.514,0.122,988.025,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.016,1.043,0.020,1.040,0.024,1.037,0.029,1.033,0.035,1.028,0.043,1.022,0.052,1.014,0.063,1.005,0.077,0.994,0.093,0.981,0.113,0.964,0.137,0.946,0.166,0.924,0.202,0.899,0.245,0.869,0.297,0.835,0.360,0.799,0.437,0.761,0.529,0.722,0.642,0.683,0.779,0.645,0.945,0.608,1.146,0.570,1.391,0.531,1.687,0.492,2.046,0.453,2.482,0.414,3.011,0.377,3.652,0.340,4.430,0.304,5.374,0.268,6.519,0.229,7.907,0.176,9.592,0.130,11.635,0.090,14.114,0.057,17.120,0.033,20.767,0.029,25.191,0.026,30.557,0.022,37.067,0.020,44.963,0.018,54.541,0.017,66.160,0.015,80.253,0.014,97.349,0.013,118.087,0.012,143.243,0.012,173.757,0.011,210.771,0.010,255.671,0.010,310.135,0.009,376.201,0.009,456.341,0.008,553.553,0.008,671.474,0.008,814.514,0.008,988.025,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.408,-8.349,4.368,-7.488,4.282,-6.627,4.031,-5.767,3.689,-4.906,3.358,-4.045,3.055,-3.184,2.823,-2.324,2.810,-1.463,2.998,-0.602,3.256,0.258,3.561,1.119,3.877,1.980,4.157,2.840,4.338,3.701,4.452,4.562,4.513,5.422,4.549,6.283,4.575,7.144,4.595,8.004,4.612,8.865,4.626,9.726,4.639,10.587,4.649,11.447,4.658,12.308,4.666,13.169,4.673,14.029,4.680,14.890,4.685)}


.ENDS 33



**********************************************************************
******************** SiC Schottky Models *****************************
**********************************************************************
