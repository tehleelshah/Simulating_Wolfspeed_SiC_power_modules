******************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
******************************************************************************************************************************************************************************

*******************************************************************************
**	Wolfspeed, Inc
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not limited to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************
**	To find other WOLFSPEED SiC models, please visit:
**	https://www.wolfspeed.com/power/tools-and-support/all-models
*******************************************************************************
**	This library model file is intended for use in LTspice ONLY
**	Use in any other software will result in syntax or compilation errors!
*******************************************************************************

*********************************************************************
****	
****	Wolfspeed SiC Module Half-bridge SPICE Library
****		Version 2.0	Date: 2025-07-21
****	
****		Models avilable in this library:
****		CAB003M09DM3,CAB004M12GM4,CAB006A12GM3,CAB006M12GM3,CAB008A12GM3,CAB008M12GM3,CAB011A12GM3,CAB011M12FM3,CAB016M12FM3,CAB320M17XM3,CAB3R5M12DM4,CAB400M12XM3,CAB425M12XM3,CAB450M12XM3,CAB500M17HM3,CAB530M12BM3,CAB650M17HM3,CAB760M12HM3,CAS175M12BM3,CAS310M17BM3,CAS350M12BM3,CAS380M17HM3,CAS480M12HM3,CAS530M12BM3,EAB450M12XM3,WAB300M12BM3,WAB400M12BM3,WAS175M12BM3,WAS310M17BM3,WAS350M12BM3,WAS530M12BM3,CAB7R5A23GM4,CAB6R0A23GM4,CAB5R0A23GM4,CAB525F12XM3
****	
*********************************************************************
****	Node Definitions:
****		Electrical
****		V+  = High side Drain
****		Mid = AC terminal
****		V-  = Low side source
****		G1  = HS Gate
****		K1  = HS Kelvin
****		G2  = LS Gate
****		K2  = LS Kelvin
****		Thermal
****		Tc1  = High Side Case Thermal Connection [apply coolant temperature as a voltage]
****		Tc2  = Low  Side Case Thermal Connection [apply coolant temperature as a voltage]
****		TjQ1 = High Side MOSFET Junction Temperature
****		TjQ2 = Low  Side MOSFET Junction Temperature
****		TjD1 = High Side Schottky Junction Temperature
****		TjD2 = Low  Side Schottky Junction Temperature
****		Electrical (EMI)
****		Baseplate = Node for studying current induced 
****					through heatsink into grounding system
*********************************************************************
****	Model Complexity Control:
****		BPC      = enable basepalte capacitance
****					0: no BPC (zero current on Baseplate node)
****					1: Include BPC (slower)
****		Thermals = enable closed loop thermals
****					0: Fixed Tj defined by TEMP
****					1: Include BPC (slower)
****		level    = change the complexity / accuracy of the model
****					1: Body diode at -4V only
****					2: Full third quadrant conduction
****					3: Full third quadrant conduction with reverse recovery
****	Parameter Definitions:
****		Vths = Threshold voltage shift (V)
****		Rdss = Drain Resistance shift (Ω)
****		Rp   = Inductor parallel res (Ω)
****				low pass filter on ringing
****				100 (default) good balance of bandwidth and sim-time
****				1m   removes impact of packaging but greatly improves sim time
*********************************************************************



.SUBCKT Module_HalfBridge V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate

*Convergence Assistance
BI1 0 G1 I = white(2e6*time)/100 Rpar=10Meg
BI2 0 G2 I = white(2e6*time)/100 Rpar=10Meg
Cconv1 V+ 0 1p Rpar=1G
Cconv2 Mid 0 1p Rpar=1G
Cconv3 V- 0 1p Rpar=1G

*** SiC MOSFETS ***
XQ1 Vd GHI Vp TjQ1 IQ1 {LmflagQ1} PARAMS: Lcsi={LcsiQ1} Rp={Rp} die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m
XQ2 Vp GLI Vs TjQ2 IQ2 {LmflagQ2} PARAMS: Lcsi={LcsiQ2} Rp={Rp} die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

*** SiC Schottky ***
XD1 Vp Vd TjD1 ID1 {Schottky} PARAMS: AF={AFs} dummy=1m
XD2 Vs Vp TjD2 ID2 {Schottky} PARAMS: AF={AFs} dummy=1m

*** Thermal Networks ***
XQ1_Thermal TjQ1 Tc1 Vd Vp IQ1 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj} dummy=1m
XQ2_Thermal TjQ2 Tc2 Vp Vs IQ2 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj} dummy=1m
XD1_Thermal TjD1 Tc1 Vd Vp ID1 {SchottkyThermal} PARAMS: Ct1={SchCt1} Ct2={SchCt2} Ct3={SchCt3} Ct4={SchCt4} Rt1={SchRt1} Rt2={SchRt2} Rt3={SchRt3} Rt4={SchRt4} Tj={Tj} dummy=1m
XD2_Thermal TjD2 Tc2 Vp Vs ID2 {SchottkyThermal} PARAMS: Ct1={SchCt1} Ct2={SchCt2} Ct3={SchCt3} Ct4={SchCt4} Rt1={SchRt1} Rt2={SchRt2} Rt3={SchRt3} Rt4={SchRt4} Tj={Tj} dummy=1m

*** Baseplate Capacitance ***
XU3 Vd Vp Vs Baseplate {BPC} PARAMS: Cug={Cug} Cag={Cag} Clg={Clg} dummy=1m

*** Parasitic Parameters ***

Ld V+ Vd {Ld} Rser={Rdesr} Rpar={Rp}
Lp Mid Vp {Lp} Rser={Rpesr} Rpar={Rp}
Ls V- Vs {Ls} Rser={Rsesr} Rpar={Rp}
Lg1 G1 GHI {LgQ1/2} Rser={Rgi/2}
Lk1 K1 Vp {LgQ1/2} Rser={Rgi/2}
Lg2 GLI G2 {LgQ2/2} Rser={Rgi/2}
Lk2 K2 Vs {LgQ2/2} Rser={Rgi/2}

.ENDS Module_HalfBridge

*** SUBCKT 1/2: BPC ***
.SUBCKT 1 VD VP VS BP
R BP 0 1
.ENDS

.SUBCKT 2 VD VP VS BP
C1 VD BP {Cug}
C2 VP BP {Cag}
C3 VS BP {Clg}
.ENDS
 
*** SUBCKT 3/4: THERMALS ***
.SUBCKT 3 Tj Tc Vp Vn Vi
Vt Tj1 0 {Tj}
Rt Tj1 Tj 1m
RTground Tc 0 10k
.ENDS 3

.SUBCKT 4 Tj Tc Vp Vn Vi
Gpwr 0 Tj Value {abs(V(Vp,Vn)*(V(Vi)))}
Rtj Tj 0 10k
Ct1 Tj 0 {Ct1}
Ct2 1 0 {Ct2}
Ct3 2 0 {Ct3}
Ct4 3 0 {Ct4}
Rt1 Tj 1 {Rt1}
Rt2 1 2 {Rt2}
Rt3 2 3 {Rt3}
Rt4 3 Tc {Rt4}
RTground Tc 0 10k
.ic V(Tj) = {Tj} V(1) = {Tj} V(2) = {Tj} V(3) = {Tj}
.ENDS 4

*** SUBCKT 5: If Schottky doesn't exist ***
.SUBCKT 5 A K Tj Id
V Id 0 1
.ENDS

** SUBCKT 6/7: Common-source inductance or no? **
.SUBCKT 6 D G S Tj IMos
X1 D G S Tj IMos {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe}  dummy=1m
.ENDS 6
.SUBCKT 7 D G S Tj IMos
Lcsi S s1 {Lcsi} Rser=50u Rpar={Rp}
X1 D G s1 Tj IMos {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe}  dummy=1m
.ENDS 7
.SUBCKT 8 D G S Tj IMos
G1 0 s1 Value = {V(Imos)}
Lcsi1 s1 s2 {-1*Lcsi} Rser=0 Rpar = 1000
Lcsi2 G g1 {-1*Lcsi} Rser=0 Rpar = 1000
R s2 0 1G
K Lcsi1 Lcsi2 -1
X1 D g1 S Tj IMos {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m
.ENDS 8
 
.SUBCKT CAB003M09DM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=10 Ld=6.04n Lp=9.76n Ls=5.46n Rdesr=410.00u Rpesr=250.00u Rsesr=560.00u PackageRgi=0.00 DieRgi=2.50 LgQ1=10.10n LgQ2=9.45n Cug=78.60p Cag=106.55p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=703.16f agd=1.21 ags=704.88m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=47.49 tm1=50.00 tm2=18.50 Rgis=1.78 Clg=71.63p Rt1={AFnomM*1.34m/AFm} Rt2={AFnomM*5.91m/AFm} Rt3={AFnomM*35.24m/AFm} Rt4={AFnomM*86.51m/AFm} Ct1={AFm*827.12u/AFnomM} Ct2={AFm*18.77m/AFnomM} Ct3={AFm*108.38m/AFnomM} Ct4={AFm*513.58m/AFnomM} SchRt1={AFnomS*1.34m/AFs} SchRt2={AFnomS*5.91m/AFs} SchRt3={AFnomS*35.24m/AFs} SchRt4={AFnomS*86.51m/AFs} SchCt1={AFs*827.12u/AFnomS} SchCt2={AFs*18.77m/AFnomS} SchCt3={AFs*108.38m/AFnomS} SchCt4={AFs*513.58m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB003M09DM3

 
.SUBCKT CAB004M12GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=8 AFs=1 AFnomM=8 AFnomS=1 die=20 Ld=4.50n Lp=2.82n Ls=1.30n Rdesr=870.00u Rpesr=500.00u Rsesr=570.00u PackageRgi=0.00 DieRgi=3.50 LgQ1=13.20n LgQ2=9.63n Cug=83.00p Cag=107.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-4.17p agd=1.92 ags=715.86m ads=1 Lqe=2.500000e-08 Rqe=10.00 Cqe=1.000000e-07 tau1=19.15 tau2=5.00 tm1=10.54 tm2=22.31 Rgis=1.91 Clg=105.00p Rt1={AFnomM*1.95m/AFm} Rt2={AFnomM*11.58m/AFm} Rt3={AFnomM*71.62m/AFm} Rt4={AFnomM*128.85m/AFm} Ct1={AFm*722.20u/AFnomM} Ct2={AFm*22.97m/AFnomM} Ct3={AFm*172.46m/AFnomM} Ct4={AFm*964.75m/AFnomM} SchRt1={AFnomS*1.95m/AFs} SchRt2={AFnomS*11.58m/AFs} SchRt3={AFnomS*71.62m/AFs} SchRt4={AFnomS*128.85m/AFs} SchCt1={AFs*722.20u/AFnomS} SchCt2={AFs*22.97m/AFnomS} SchCt3={AFs*172.46m/AFnomS} SchCt4={AFs*964.75m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB004M12GM4

 
.SUBCKT CAB006A12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.35 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=123.20p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-5.33p agd=1.83 ags=476.21m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=55.20 tm1=50.00 tm2=6.19 Rgis=1.97 Clg=67.60p Rt1={AFnomM*1.74m/AFm} Rt2={AFnomM*8.62m/AFm} Rt3={AFnomM*34.60m/AFm} Rt4={AFnomM*87.04m/AFm} Ct1={AFm*966.67u/AFnomM} Ct2={AFm*11.43m/AFnomM} Ct3={AFm*58.77m/AFnomM} Ct4={AFm*477.12m/AFnomM} SchRt1={AFnomS*1.74m/AFs} SchRt2={AFnomS*8.62m/AFs} SchRt3={AFnomS*34.60m/AFs} SchRt4={AFnomS*87.04m/AFs} SchCt1={AFs*966.67u/AFnomS} SchCt2={AFs*11.43m/AFnomS} SchCt3={AFs*58.77m/AFnomS} SchCt4={AFs*477.12m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB006A12GM3

 
.SUBCKT CAB006M12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.35 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=81.30p Cag=221.30p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-5.45p agd=1.80 ags=476.43m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=55.63 tm1=50.00 tm2=4.58 Rgis=2.04 Clg=119.40p Rt1={AFnomM*2.07m/AFm} Rt2={AFnomM*11.30m/AFm} Rt3={AFnomM*53.07m/AFm} Rt4={AFnomM*167.57m/AFm} Ct1={AFm*793.41u/AFnomM} Ct2={AFm*13.39m/AFnomM} Ct3={AFm*82.36m/AFnomM} Ct4={AFm*302.95m/AFnomM} SchRt1={AFnomS*2.07m/AFs} SchRt2={AFnomS*11.30m/AFs} SchRt3={AFnomS*53.07m/AFs} SchRt4={AFnomS*167.57m/AFs} SchCt1={AFs*793.41u/AFnomS} SchCt2={AFs*13.39m/AFnomS} SchCt3={AFs*82.36m/AFnomS} SchCt4={AFs*302.95m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB006M12GM3

 
.SUBCKT CAB008A12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=1.02m Rpesr=250.00u Rsesr=940.00u PackageRgi=5.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=123.20p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-5.23p agd=2.00 ags=252.64m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=19.16 tm1=50.00 tm2=23.12 Rgis=2.04 Clg=67.60p Rt1={AFnomM*2.65m/AFm} Rt2={AFnomM*12.57m/AFm} Rt3={AFnomM*50.05m/AFm} Rt4={AFnomM*111.73m/AFm} Ct1={AFm*664.43u/AFnomM} Ct2={AFm*6.50m/AFnomM} Ct3={AFm*31.10m/AFnomM} Ct4={AFm*241.82m/AFnomM} SchRt1={AFnomS*2.65m/AFs} SchRt2={AFnomS*12.57m/AFs} SchRt3={AFnomS*50.05m/AFs} SchRt4={AFnomS*111.73m/AFs} SchCt1={AFs*664.43u/AFnomS} SchCt2={AFs*6.50m/AFnomS} SchCt3={AFs*31.10m/AFnomS} SchCt4={AFs*241.82m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB008A12GM3

 
.SUBCKT CAB008M12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=1.02m Rpesr=250.00u Rsesr=940.00u PackageRgi=5.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=81.30p Cag=221.30p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-5.22p agd=2.00 ags=253.01m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=5.91 tm1=50.00 tm2=29.11 Rgis=2.04 Clg=119.40p Rt1={AFnomM*2.85m/AFm} Rt2={AFnomM*14.56m/AFm} Rt3={AFnomM*64.16m/AFm} Rt4={AFnomM*222.43m/AFm} Ct1={AFm*587.22u/AFnomM} Ct2={AFm*7.87m/AFnomM} Ct3={AFm*43.00m/AFnomM} Ct4={AFm*163.45m/AFnomM} SchRt1={AFnomS*2.85m/AFs} SchRt2={AFnomS*14.56m/AFs} SchRt3={AFnomS*64.16m/AFs} SchRt4={AFnomS*222.43m/AFs} SchCt1={AFs*587.22u/AFnomS} SchCt2={AFs*7.87m/AFnomS} SchCt3={AFs*43.00m/AFnomS} SchCt4={AFs*163.45m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB008M12GM3

 
.SUBCKT CAB011A12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=3 AFs=1 AFnomM=3 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=123.20p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-1.31p agd=990.64m ags=626.27m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=55.35 tm1=50.00 tm2=10.07 Rgis=2.26 Clg=67.60p Rt1={AFnomM*3.35m/AFm} Rt2={AFnomM*15.99m/AFm} Rt3={AFnomM*64.75m/AFm} Rt4={AFnomM*128.91m/AFm} Ct1={AFm*547.27u/AFnomM} Ct2={AFm*5.12m/AFnomM} Ct3={AFm*24.43m/AFnomM} Ct4={AFm*190.73m/AFnomM} SchRt1={AFnomS*3.35m/AFs} SchRt2={AFnomS*15.99m/AFs} SchRt3={AFnomS*64.75m/AFs} SchRt4={AFnomS*128.91m/AFs} SchCt1={AFs*547.27u/AFnomS} SchCt2={AFs*5.12m/AFnomS} SchCt3={AFs*24.43m/AFnomS} SchCt4={AFs*190.73m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB011A12GM3

 
.SUBCKT CAB011M12FM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=2 AFs=1 AFnomM=2 AFnomS=1 die=40 Ld=7.50n Lp=4.60n Ls=3.70n Rdesr=1.98m Rpesr=250.00u Rsesr=1.85m PackageRgi=3.10 DieRgi=3.30 LgQ1=12.50n LgQ2=12.50n Cug=61.50p Cag=98.40p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=5.75p agd=1.20 ags=472.34m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=37.17 tm1=50.00 tm2=3.40 Rgis=1.33 Clg=55.71p Rt1={AFnomM*4.06m/AFm} Rt2={AFnomM*25.27m/AFm} Rt3={AFnomM*131.29m/AFm} Rt4={AFnomM*267.37m/AFm} Ct1={AFm*544.92u/AFnomM} Ct2={AFm*8.36m/AFnomM} Ct3={AFm*52.78m/AFnomM} Ct4={AFm*201.68m/AFnomM} SchRt1={AFnomS*4.06m/AFs} SchRt2={AFnomS*25.27m/AFs} SchRt3={AFnomS*131.29m/AFs} SchRt4={AFnomS*267.37m/AFs} SchCt1={AFs*544.92u/AFnomS} SchCt2={AFs*8.36m/AFnomS} SchCt3={AFs*52.78m/AFnomS} SchCt4={AFs*201.68m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB011M12FM3

 
.SUBCKT CAB016M12FM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=2 AFs=1 AFnomM=2 AFnomS=1 die=30 Ld=7.54n Lp=4.60n Ls=3.70n Rdesr=1.98m Rpesr=250.00u Rsesr=1.85m PackageRgi=3.20 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=61.50p Cag=98.40p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=13.13p agd=619.57m ags=638.89m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=35.13 tm1=50.00 tm2=1.00 Rgis=365.29m Clg=55.71p Rt1={AFnomM*6.10m/AFm} Rt2={AFnomM*36.03m/AFm} Rt3={AFnomM*154.47m/AFm} Rt4={AFnomM*346.39m/AFm} Ct1={AFm*382.24u/AFnomM} Ct2={AFm*4.78m/AFnomM} Ct3={AFm*28.05m/AFnomM} Ct4={AFm*146.18m/AFnomM} SchRt1={AFnomS*6.10m/AFs} SchRt2={AFnomS*36.03m/AFs} SchRt3={AFnomS*154.47m/AFs} SchRt4={AFnomS*346.39m/AFs} SchCt1={AFs*382.24u/AFnomS} SchCt2={AFs*4.78m/AFnomS} SchCt3={AFs*28.05m/AFnomS} SchCt4={AFs*146.18m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB016M12FM3

 
.SUBCKT CAB320M17XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=50 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=100.00u Rsesr=630.00u PackageRgi=2.30 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-3.59p agd=1.42 ags=770.61m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=79.10 tm1=50.00 tm2=13.14 Rgis=1.22 Clg=4.80p Rt1={AFnomM*1.10m/AFm} Rt2={AFnomM*5.11m/AFm} Rt3={AFnomM*29.10m/AFm} Rt4={AFnomM*61.68m/AFm} Ct1={AFm*1.14m/AFnomM} Ct2={AFm*22.33m/AFnomM} Ct3={AFm*127.25m/AFnomM} Ct4={AFm*510.79m/AFnomM} SchRt1={AFnomS*1.10m/AFs} SchRt2={AFnomS*5.11m/AFs} SchRt3={AFnomS*29.10m/AFs} SchRt4={AFnomS*61.68m/AFs} SchCt1={AFs*1.14m/AFnomS} SchCt2={AFs*22.33m/AFnomS} SchCt3={AFs*127.25m/AFnomS} SchCt4={AFs*510.79m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB320M17XM3

 
.SUBCKT CAB3R5M12DM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=60 Ld=6.04n Lp=9.76n Ls=5.46n Rdesr=410.00u Rpesr=250.00u Rsesr=560.00u PackageRgi=0.00 DieRgi=6.00 LgQ1=10.10n LgQ2=9.45n Cug=78.60p Cag=106.55p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-9.10p agd=1.33 ags=1.43 ads=1 Lqe=2.500000e-08 Rqe=2.81 Cqe=1.000000e-07 tau1=24.02 tau2=33.65 tm1=14.84 tm2=31.99 Rgis=733.32m Clg=71.63p Rt1={AFnomM*1.77m/AFm} Rt2={AFnomM*8.34m/AFm} Rt3={AFnomM*42.48m/AFm} Rt4={AFnomM*99.80m/AFm} Ct1={AFm*721.66u/AFnomM} Ct2={AFm*12.52m/AFnomM} Ct3={AFm*69.57m/AFnomM} Ct4={AFm*472.48m/AFnomM} SchRt1={AFnomS*1.77m/AFs} SchRt2={AFnomS*8.34m/AFs} SchRt3={AFnomS*42.48m/AFs} SchRt4={AFnomS*99.80m/AFs} SchCt1={AFs*721.66u/AFnomS} SchCt2={AFs*12.52m/AFnomS} SchCt3={AFs*69.57m/AFnomS} SchCt4={AFs*472.48m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB3R5M12DM4

 
.SUBCKT CAB400M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=70 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-9.08p agd=1.99 ags=543.87m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=43.65 tm1=50.00 tm2=24.58 Rgis=1.66 Clg=4.80p Rt1={AFnomM*1.52m/AFm} Rt2={AFnomM*6.98m/AFm} Rt3={AFnomM*31.97m/AFm} Rt4={AFnomM*80.53m/AFm} Ct1={AFm*947.94u/AFnomM} Ct2={AFm*12.21m/AFnomM} Ct3={AFm*61.25m/AFnomM} Ct4={AFm*257.32m/AFnomM} SchRt1={AFnomS*1.52m/AFs} SchRt2={AFnomS*6.98m/AFs} SchRt3={AFnomS*31.97m/AFs} SchRt4={AFnomS*80.53m/AFs} SchCt1={AFs*947.94u/AFnomS} SchCt2={AFs*12.21m/AFnomS} SchCt3={AFs*61.25m/AFnomS} SchCt4={AFs*257.32m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB400M12XM3

 
.SUBCKT CAB425M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=70 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=3.40 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-1.92p agd=1.65 ags=548.90m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=50.29 tm1=50.00 tm2=28.42 Rgis=1.56 Clg=4.80p Rt1={AFnomM*1.30m/AFm} Rt2={AFnomM*6.26m/AFm} Rt3={AFnomM*31.94m/AFm} Rt4={AFnomM*70.49m/AFm} Ct1={AFm*1.09m/AFnomM} Ct2={AFm*17.24m/AFnomM} Ct3={AFm*94.35m/AFnomM} Ct4={AFm*421.94m/AFnomM} SchRt1={AFnomS*1.30m/AFs} SchRt2={AFnomS*6.26m/AFs} SchRt3={AFnomS*31.94m/AFs} SchRt4={AFnomS*70.49m/AFs} SchCt1={AFs*1.09m/AFnomS} SchCt2={AFs*17.24m/AFnomS} SchCt3={AFs*94.35m/AFnomS} SchCt4={AFs*421.94m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB425M12XM3

 
.SUBCKT CAB450M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=80 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-9.21p agd=1.35 ags=804.01m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=36.98 tm1=50.00 tm2=21.92 Rgis=1.25 Clg=4.80p Rt1={AFnomM*1.10m/AFm} Rt2={AFnomM*5.12m/AFm} Rt3={AFnomM*31.36m/AFm} Rt4={AFnomM*56.42m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*24.28m/AFnomM} Ct3={AFm*142.74m/AFnomM} Ct4={AFm*618.68m/AFnomM} SchRt1={AFnomS*1.10m/AFs} SchRt2={AFnomS*5.12m/AFs} SchRt3={AFnomS*31.36m/AFs} SchRt4={AFnomS*56.42m/AFs} SchCt1={AFs*1.12m/AFnomS} SchCt2={AFs*24.28m/AFnomS} SchCt3={AFs*142.74m/AFnomS} SchCt4={AFs*618.68m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB450M12XM3

 
.SUBCKT CAB500M17HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=8 AFs=1 AFnomM=8 AFnomS=1 die=50 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.24 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-5.79p agd=1.16 ags=887.69m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=63.64 tm1=50.00 tm2=23.27 Rgis=1.48 Clg=237.10p Rt1={AFnomM*827.00u/AFm} Rt2={AFnomM*4.28m/AFm} Rt3={AFnomM*20.75m/AFm} Rt4={AFnomM*44.14m/AFm} Ct1={AFm*1.87m/AFnomM} Ct2={AFm*29.80m/AFnomM} Ct3={AFm*169.03m/AFnomM} Ct4={AFm*913.44m/AFnomM} SchRt1={AFnomS*827.00u/AFs} SchRt2={AFnomS*4.28m/AFs} SchRt3={AFnomS*20.75m/AFs} SchRt4={AFnomS*44.14m/AFs} SchCt1={AFs*1.87m/AFnomS} SchCt2={AFs*29.80m/AFnomS} SchCt3={AFs*169.03m/AFnomS} SchCt4={AFs*913.44m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB500M17HM3

 
.SUBCKT CAB530M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=420.00u Rpesr=250.00u Rsesr=280.00u PackageRgi=15.00 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-2.72p agd=1.22 ags=554.27m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=50.57 tm1=50.00 tm2=4.64 Rgis=1.27 Clg=90.50p Rt1={AFnomM*1.91m/AFm} Rt2={AFnomM*11.42m/AFm} Rt3={AFnomM*7.37m/AFm} Rt4={AFnomM*44.30m/AFm} Ct1={AFm*5.81m/AFnomM} Ct2={AFm*80.15m/AFnomM} Ct3={AFm*82.37m/AFnomM} Ct4={AFm*1.15/AFnomM} SchRt1={AFnomS*1.91m/AFs} SchRt2={AFnomS*11.42m/AFs} SchRt3={AFnomS*7.37m/AFs} SchRt4={AFnomS*44.30m/AFs} SchCt1={AFs*5.81m/AFnomS} SchCt2={AFs*80.15m/AFnomS} SchCt3={AFs*82.37m/AFnomS} SchCt4={AFs*1.15/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB530M12BM3

 
.SUBCKT CAB650M17HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=12 AFs=1 AFnomM=12 AFnomS=1 die=50 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.24 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-6.56p agd=1.32 ags=1.00 ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=57.44 tm1=50.00 tm2=16.78 Rgis=1.28 Clg=237.10p Rt1={AFnomM*591.74u/AFm} Rt2={AFnomM*3.25m/AFm} Rt3={AFnomM*16.88m/AFm} Rt4={AFnomM*33.28m/AFm} Ct1={AFm*2.59m/AFnomM} Ct2={AFm*50.11m/AFnomM} Ct3={AFm*307.56m/AFnomM} Ct4={AFm*2.06/AFnomM} SchRt1={AFnomS*591.74u/AFs} SchRt2={AFnomS*3.25m/AFs} SchRt3={AFnomS*16.88m/AFs} SchRt4={AFnomS*33.28m/AFs} SchCt1={AFs*2.59m/AFnomS} SchCt2={AFs*50.11m/AFnomS} SchCt3={AFs*307.56m/AFnomS} SchCt4={AFs*2.06/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB650M17HM3

 
.SUBCKT CAB760M12HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=12 AFs=1 AFnomM=12 AFnomS=1 die=70 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=250.00u Rsesr=126.30u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.85p agd=1.41 ags=708.88m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=33.09 tm1=50.00 tm2=4.93 Rgis=1.85 Clg=237.10p Rt1={AFnomM*678.27u/AFm} Rt2={AFnomM*3.51m/AFm} Rt3={AFnomM*19.26m/AFm} Rt4={AFnomM*38.49m/AFm} Ct1={AFm*1.96m/AFnomM} Ct2={AFm*44.04m/AFnomM} Ct3={AFm*274.94m/AFnomM} Ct4={AFm*1.69/AFnomM} SchRt1={AFnomS*678.27u/AFs} SchRt2={AFnomS*3.51m/AFs} SchRt3={AFnomS*19.26m/AFs} SchRt4={AFnomS*38.49m/AFs} SchCt1={AFs*1.96m/AFnomS} SchCt2={AFs*44.04m/AFnomS} SchCt3={AFs*274.94m/AFnomS} SchCt4={AFs*1.69/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB760M12HM3

 
.SUBCKT CAS175M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=2 AFs=2 AFnomM=2 AFnomS=2 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=2.30m Rpesr=250.00u Rsesr=2.12m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=719.35f agd=1.72 ags=792.33m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=947.64m Clg=90.50p Rt1={AFnomM*2.97m/AFm} Rt2={AFnomM*13.79m/AFm} Rt3={AFnomM*62.65m/AFm} Rt4={AFnomM*110.59m/AFm} Ct1={AFm*608.69u/AFnomM} Ct2={AFm*5.51m/AFnomM} Ct3={AFm*25.83m/AFnomM} Ct4={AFm*171.87m/AFnomM} SchRt1={AFnomS*2.45m/AFs} SchRt2={AFnomS*11.89m/AFs} SchRt3={AFnomS*77.51m/AFs} SchRt4={AFnomS*124.15m/AFs} SchCt1={AFs*705.34u/AFnomS} SchCt2={AFs*7.88m/AFnomS} SchCt3={AFs*38.81m/AFnomS} SchCt4={AFs*180.94m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS175M12BM3

 
.SUBCKT CAS310M17BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1002 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=50 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=2.20 DieRgi=5.20 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-7.00p agd=1.95 ags=624.41m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.16 Clg=90.50p Rt1={AFnomM*1.28m/AFm} Rt2={AFnomM*6.17m/AFm} Rt3={AFnomM*29.97m/AFm} Rt4={AFnomM*54.58m/AFm} Ct1={AFm*1.33m/AFnomM} Ct2={AFm*14.28m/AFnomM} Ct3={AFm*70.96m/AFnomM} Ct4={AFm*563.10m/AFnomM} SchRt1={AFnomS*1.03m/AFs} SchRt2={AFnomS*5.19m/AFs} SchRt3={AFnomS*27.75m/AFs} SchRt4={AFnomS*52.04m/AFs} SchCt1={AFs*1.53m/AFnomS} SchCt2={AFs*21.77m/AFnomS} SchCt3={AFs*119.84m/AFnomS} SchCt4={AFs*603.02m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS310M17BM3

 
.SUBCKT CAS350M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-9.10p agd=1.93 ags=546.35m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.32 Clg=90.50p Rt1={AFnomM*1.70m/AFm} Rt2={AFnomM*8.52m/AFm} Rt3={AFnomM*39.56m/AFm} Rt4={AFnomM*66.22m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*11.80m/AFnomM} Ct3={AFm*58.98m/AFnomM} Ct4={AFm*509.39m/AFnomM} SchRt1={AFnomS*1.42m/AFs} SchRt2={AFnomS*7.20m/AFs} SchRt3={AFnomS*39.07m/AFs} SchRt4={AFnomS*64.30m/AFs} SchCt1={AFs*1.24m/AFnomS} SchCt2={AFs*15.02m/AFnomS} SchCt3={AFs*79.29m/AFnomS} SchCt4={AFs*388.60m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS350M12BM3

 
.SUBCKT CAS380M17HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1002 Schottky=1 AFm=6 AFs=5 AFnomM=6 AFnomS=5 die=50 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.18 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-973.76f agd=256.24m ags=1.55 ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=741.12m Clg=4.80p Rt1={AFnomM*1.01m/AFm} Rt2={AFnomM*5.06m/AFm} Rt3={AFnomM*22.75m/AFm} Rt4={AFnomM*50.18m/AFm} Ct1={AFm*1.64m/AFnomM} Ct2={AFm*20.84m/AFnomM} Ct3={AFm*109.24m/AFnomM} Ct4={AFm*561.91m/AFnomM} SchRt1={AFnomS*784.85u/AFs} SchRt2={AFnomS*3.84m/AFs} SchRt3={AFnomS*32.27m/AFs} SchRt4={AFnomS*54.11m/AFs} SchCt1={AFs*1.72m/AFnomS} SchCt2={AFs*32.73m/AFnomS} SchCt3={AFs*186.54m/AFnomS} SchCt4={AFs*840.08m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS380M17HM3

 
.SUBCKT CAS480M12HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=7 AFs=6 AFnomM=7 AFnomS=6 die=70 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=250.00u Rsesr=126.30u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-4.46p agd=1.55 ags=661.16m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.82 Clg=237.10p Rt1={AFnomM*851.16u/AFm} Rt2={AFnomM*6.03m/AFm} Rt3={AFnomM*35.01m/AFm} Rt4={AFnomM*58.11m/AFm} Ct1={AFm*3.63m/AFnomM} Ct2={AFm*48.70m/AFnomM} Ct3={AFm*314.26m/AFnomM} Ct4={AFm*5.04/AFnomM} SchRt1={AFnomS*953.13u/AFs} SchRt2={AFnomS*6.86m/AFs} SchRt3={AFnomS*39.67m/AFs} SchRt4={AFnomS*62.51m/AFs} SchCt1={AFs*3.35m/AFnomS} SchCt2={AFs*45.54m/AFnomS} SchCt3={AFs*296.46m/AFnomS} SchCt4={AFs*5.06/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS480M12HM3

 
.SUBCKT CAS530M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=6 AFs=6 AFnomM=6 AFnomS=6 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=900.00u Rpesr=250.00u Rsesr=970.00u PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.08p agd=1.53 ags=575.72m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.32 Clg=90.50p Rt1={AFnomM*1.05m/AFm} Rt2={AFnomM*5.05m/AFm} Rt3={AFnomM*22.82m/AFm} Rt4={AFnomM*46.08m/AFm} Ct1={AFm*1.54m/AFnomM} Ct2={AFm*17.91m/AFnomM} Ct3={AFm*89.22m/AFnomM} Ct4={AFm*697.01m/AFnomM} SchRt1={AFnomS*988.05u/AFs} SchRt2={AFnomS*4.94m/AFs} SchRt3={AFnomS*26.88m/AFs} SchRt4={AFnomS*45.19m/AFs} SchCt1={AFs*1.61m/AFnomS} SchCt2={AFs*22.24m/AFnomS} SchCt3={AFs*119.66m/AFnomS} SchCt4={AFs*636.87m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS530M12BM3

 
.SUBCKT EAB450M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=80 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-9.21p agd=1.35 ags=804.01m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=36.98 tm1=50.00 tm2=21.92 Rgis=1.25 Clg=4.80p Rt1={AFnomM*1.10m/AFm} Rt2={AFnomM*5.12m/AFm} Rt3={AFnomM*31.36m/AFm} Rt4={AFnomM*56.42m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*24.28m/AFnomM} Ct3={AFm*142.74m/AFnomM} Ct4={AFm*618.68m/AFnomM} SchRt1={AFnomS*1.10m/AFs} SchRt2={AFnomS*5.12m/AFs} SchRt3={AFnomS*31.36m/AFs} SchRt4={AFnomS*56.42m/AFs} SchCt1={AFs*1.12m/AFnomS} SchCt2={AFs*24.28m/AFnomS} SchCt3={AFs*142.74m/AFnomS} SchCt4={AFs*618.68m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS EAB450M12XM3

 
.SUBCKT WAB300M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=70 Ld=6.30n Lp=19.00n Ls=2.50n Rdesr=600.00u Rpesr=250.00u Rsesr=510.00u PackageRgi=3.00 DieRgi=2.60 LgQ1=25.00n LgQ2=20.00n Cug=89.50p Cag=151.60p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.38p agd=1.80 ags=499.26m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=30.12 tm1=50.00 tm2=3.63 Rgis=1.43 Clg=107.00p Rt1={AFnomM*28.23m/AFm} Rt2={AFnomM*55.16m/AFm} Rt3={AFnomM*40.99m/AFm} Rt4={AFnomM*35.62m/AFm} Ct1={AFm*74.25m/AFnomM} Ct2={AFm*249.41m/AFnomM} Ct3={AFm*2.91/AFnomM} Ct4={AFm*5.51/AFnomM} SchRt1={AFnomS*28.23m/AFs} SchRt2={AFnomS*55.16m/AFs} SchRt3={AFnomS*40.99m/AFs} SchRt4={AFnomS*35.62m/AFs} SchCt1={AFs*74.25m/AFnomS} SchCt2={AFs*249.41m/AFnomS} SchCt3={AFs*2.91/AFnomS} SchCt4={AFs*5.51/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAB300M12BM3

 
.SUBCKT WAB400M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=90 Ld=6.30n Lp=19.00n Ls=2.50n Rdesr=600.00u Rpesr=250.00u Rsesr=510.00u PackageRgi=4.00 DieRgi=6.70 LgQ1=25.00n LgQ2=20.00n Cug=89.50p Cag=151.60p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-12.56p agd=1.93 ags=838.63m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=51.73 tm1=50.00 tm2=12.07 Rgis=799.08m Clg=107.00p Rt1={AFnomM*21.93m/AFm} Rt2={AFnomM*14.38m/AFm} Rt3={AFnomM*52.01m/AFm} Rt4={AFnomM*41.69m/AFm} Ct1={AFm*97.22m/AFnomM} Ct2={AFm*19.05m/AFnomM} Ct3={AFm*593.73m/AFnomM} Ct4={AFm*1.73/AFnomM} SchRt1={AFnomS*21.93m/AFs} SchRt2={AFnomS*14.38m/AFs} SchRt3={AFnomS*52.01m/AFs} SchRt4={AFnomS*41.69m/AFs} SchCt1={AFs*97.22m/AFnomS} SchCt2={AFs*19.05m/AFnomS} SchCt3={AFs*593.73m/AFnomS} SchCt4={AFs*1.73/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAB400M12BM3

 
.SUBCKT WAS175M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=2 AFs=2 AFnomM=2 AFnomS=2 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=2.30m Rpesr=250.00u Rsesr=2.12m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=719.35f agd=1.72 ags=792.33m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=947.64m Clg=90.50p Rt1={AFnomM*2.97m/AFm} Rt2={AFnomM*13.79m/AFm} Rt3={AFnomM*62.65m/AFm} Rt4={AFnomM*110.59m/AFm} Ct1={AFm*608.69u/AFnomM} Ct2={AFm*5.51m/AFnomM} Ct3={AFm*25.83m/AFnomM} Ct4={AFm*171.87m/AFnomM} SchRt1={AFnomS*2.45m/AFs} SchRt2={AFnomS*11.89m/AFs} SchRt3={AFnomS*77.51m/AFs} SchRt4={AFnomS*124.15m/AFs} SchCt1={AFs*705.34u/AFnomS} SchCt2={AFs*7.88m/AFnomS} SchCt3={AFs*38.81m/AFnomS} SchCt4={AFs*180.94m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS175M12BM3

 
.SUBCKT WAS310M17BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1002 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=50 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=2.20 DieRgi=5.20 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-7.00p agd=1.95 ags=624.41m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.16 Clg=90.50p Rt1={AFnomM*1.28m/AFm} Rt2={AFnomM*6.17m/AFm} Rt3={AFnomM*29.97m/AFm} Rt4={AFnomM*54.58m/AFm} Ct1={AFm*1.33m/AFnomM} Ct2={AFm*14.28m/AFnomM} Ct3={AFm*70.96m/AFnomM} Ct4={AFm*563.10m/AFnomM} SchRt1={AFnomS*1.03m/AFs} SchRt2={AFnomS*5.19m/AFs} SchRt3={AFnomS*27.75m/AFs} SchRt4={AFnomS*52.04m/AFs} SchCt1={AFs*1.53m/AFnomS} SchCt2={AFs*21.77m/AFnomS} SchCt3={AFs*119.84m/AFnomS} SchCt4={AFs*603.02m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS310M17BM3

 
.SUBCKT WAS350M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-9.10p agd=1.93 ags=546.35m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.32 Clg=90.50p Rt1={AFnomM*1.70m/AFm} Rt2={AFnomM*8.52m/AFm} Rt3={AFnomM*39.56m/AFm} Rt4={AFnomM*66.22m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*11.80m/AFnomM} Ct3={AFm*58.98m/AFnomM} Ct4={AFm*509.39m/AFnomM} SchRt1={AFnomS*1.42m/AFs} SchRt2={AFnomS*7.20m/AFs} SchRt3={AFnomS*39.07m/AFs} SchRt4={AFnomS*64.30m/AFs} SchCt1={AFs*1.24m/AFnomS} SchCt2={AFs*15.02m/AFnomS} SchCt3={AFs*79.29m/AFnomS} SchCt4={AFs*388.60m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS350M12BM3

 
.SUBCKT WAS530M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=6 AFs=6 AFnomM=6 AFnomS=6 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=900.00u Rpesr=250.00u Rsesr=970.00u PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.08p agd=1.53 ags=575.72m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.32 Clg=90.50p Rt1={AFnomM*1.05m/AFm} Rt2={AFnomM*5.05m/AFm} Rt3={AFnomM*22.82m/AFm} Rt4={AFnomM*46.08m/AFm} Ct1={AFm*1.54m/AFnomM} Ct2={AFm*17.91m/AFnomM} Ct3={AFm*89.22m/AFnomM} Ct4={AFm*697.01m/AFnomM} SchRt1={AFnomS*988.05u/AFs} SchRt2={AFnomS*4.94m/AFs} SchRt3={AFnomS*26.88m/AFs} SchRt4={AFnomS*45.19m/AFs} SchCt1={AFs*1.61m/AFnomS} SchCt2={AFs*22.24m/AFnomS} SchCt3={AFs*119.66m/AFnomS} SchCt4={AFs*636.87m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS530M12BM3

 
.SUBCKT CAB7R5A23GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=100 Ld=7.00n Lp=2.00n Ls=4.00n Rdesr=750.00u Rpesr=750.00u Rsesr=650.00u PackageRgi=0.00 DieRgi=6.60 LgQ1=8.50n LgQ2=8.50n Cug=50.00p Cag=100.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.57p agd=1.02 ags=731.23m ads=1 Lqe=2.500000e-08 Rqe=1.55 Cqe=1.000000e-07 tau1=23.56 tau2=53.16 tm1=5.34 tm2=38.86 Rgis=969.02m Clg=48.00p Rt1={AFnomM*1.75m/AFm} Rt2={AFnomM*8.61m/AFm} Rt3={AFnomM*34.47m/AFm} Rt4={AFnomM*100.17m/AFm} Ct1={AFm*895.86u/AFnomM} Ct2={AFm*11.13m/AFnomM} Ct3={AFm*58.10m/AFnomM} Ct4={AFm*468.57m/AFnomM} SchRt1={AFnomS*1.75m/AFs} SchRt2={AFnomS*8.61m/AFs} SchRt3={AFnomS*34.47m/AFs} SchRt4={AFnomS*100.17m/AFs} SchCt1={AFs*895.86u/AFnomS} SchCt2={AFs*11.13m/AFnomS} SchCt3={AFs*58.10m/AFnomS} SchCt4={AFs*468.57m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB7R5A23GM4

 
.SUBCKT CAB6R0A23GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=100 Ld=7.00n Lp=2.00n Ls=4.00n Rdesr=750.00u Rpesr=750.00u Rsesr=650.00u PackageRgi=0.00 DieRgi=6.60 LgQ1=8.50n LgQ2=8.50n Cug=50.00p Cag=100.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-11.11p agd=1.45 ags=702.84m ads=1 Lqe=2.500000e-08 Rqe=980.59m Cqe=1.000000e-07 tau1=26.00 tau2=51.54 tm1=14.89 tm2=24.21 Rgis=916.57m Clg=48.00p Rt1={AFnomM*1.32m/AFm} Rt2={AFnomM*6.62m/AFm} Rt3={AFnomM*28.10m/AFm} Rt4={AFnomM*84.96m/AFm} Ct1={AFm*1.11m/AFnomM} Ct2={AFm*16.39m/AFnomM} Ct3={AFm*90.37m/AFnomM} Ct4={AFm*713.65m/AFnomM} SchRt1={AFnomS*1.32m/AFs} SchRt2={AFnomS*6.62m/AFs} SchRt3={AFnomS*28.10m/AFs} SchRt4={AFnomS*84.96m/AFs} SchCt1={AFs*1.11m/AFnomS} SchCt2={AFs*16.39m/AFnomS} SchCt3={AFs*90.37m/AFnomS} SchCt4={AFs*713.65m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB6R0A23GM4

 
.SUBCKT CAB5R0A23GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=100 Ld=7.00n Lp=2.00n Ls=4.00n Rdesr=750.00u Rpesr=750.00u Rsesr=650.00u PackageRgi=0.00 DieRgi=6.60 LgQ1=8.50n LgQ2=8.50n Cug=50.00p Cag=100.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-8.09p agd=1.27 ags=648.52m ads=1 Lqe=2.500000e-08 Rqe=883.93m Cqe=1.000000e-07 tau1=31.01 tau2=54.89 tm1=1.51 tm2=27.81 Rgis=1.13 Clg=48.00p Rt1={AFnomM*1.11m/AFm} Rt2={AFnomM*5.24m/AFm} Rt3={AFnomM*22.83m/AFm} Rt4={AFnomM*75.83m/AFm} Ct1={AFm*1.16m/AFnomM} Ct2={AFm*19.40m/AFnomM} Ct3={AFm*106.73m/AFnomM} Ct4={AFm*840.20m/AFnomM} SchRt1={AFnomS*1.11m/AFs} SchRt2={AFnomS*5.24m/AFs} SchRt3={AFnomS*22.83m/AFs} SchRt4={AFnomS*75.83m/AFs} SchCt1={AFs*1.16m/AFnomS} SchCt2={AFs*19.40m/AFnomS} SchCt3={AFs*106.73m/AFnomS} SchCt4={AFs*840.20m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB5R0A23GM4

 
.SUBCKT CAB525F12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=80 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-11.35p agd=1.47 ags=573.06m ads=1 Lqe=2.500000e-08 Rqe=1.00Meg Cqe=1.000000e-07 tau1=1.00 tau2=44.58 tm1=50.00 tm2=20.07 Rgis=1.70 Clg=4.80p Rt1={AFnomM*1.58m/AFm} Rt2={AFnomM*11.21m/AFm} Rt3={AFnomM*60.52m/AFm} Rt4={AFnomM*71.38m/AFm} Ct1={AFm*2.02m/AFnomM} Ct2={AFm*30.12m/AFnomM} Ct3={AFm*190.54m/AFnomM} Ct4={AFm*2.43/AFnomM} SchRt1={AFnomS*1.58m/AFs} SchRt2={AFnomS*11.21m/AFs} SchRt3={AFnomS*60.52m/AFs} SchRt4={AFnomS*71.38m/AFs} SchCt1={AFs*2.02m/AFnomS} SchCt2={AFs*30.12m/AFnomS} SchCt3={AFs*190.54m/AFnomS} SchCt4={AFs*2.43/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5-1e-16,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5-1e-16,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5+1e-16),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5+1e-16),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB525F12XM3



**********************************************************************
********************* SiC MOSFET Models ******************************
**********************************************************************
.SUBCKT 11 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,2.826e-05,1,0.0020549,1.5,0.022614,2,0.14489,2.5,0.51741,3,1.4567,3.5,3.3854,4,6.7726,4.5,12.1544,5,20.1817,5.5,31.1134,6,44.887,6.5,62.1812,7,83.4337,7.5,108.8987,8,140.7955,8.5,180.0054,9,224.1655,9.5,269.115,10,314.9941,10.5,359.0077,11,406.4973,11.5,459.3393,12,510.87,12.5,566.0025,13,628.3976,13.5,683.9503,14,777.5748,14.5,911.9939,15,1277.0625,15.5,1642.0483,16,2014.0059,16.5,2346.9021,17,2647.3653,17.5,2719.0385,18,2788.6187,18.5,2856.2158,19,2921.9314,19.5,2985.8596,20,3048.0875,20.5,3108.6963,21,3167.7614,21.5,3225.3533,22,3281.5377,22.5,3336.3761,23,3389.9261,23.5,3442.2419,24,3493.374,24.5,3543.3705,25,3592.2761,25.5,3640.1333,26,3686.9822,26.5,3732.8605,27,3777.804,27.5,3821.8466,28,3865.0204,28.5,3907.3558,29,3948.8817,29.5,3990.1289,30,4030.3437)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,0.93722,3.5,0.83891,4,0.7399,4.5,0.63511,5,0.51912,5.5,0.46062,6,0.43556,6.5,0.40458,7,0.37252,7.5,0.34573,8,0.31422,8.5,0.27794,9,0.24514,9.5,0.21893,10,0.19717,10.5,0.18438,11,0.17495,11.5,0.16581,12,0.15697,12.5,0.14828,13,0.13868,13.5,0.13213,14,0.12271,14.5,0.11026,15,0.091703,15.5,0.075088,16,0.058933,16.5,0.048471,17,0.041047,17.5,0.041047,18,0.041047,18.5,0.041047,19,0.041047,19.5,0.041047,20,0.041047,20.5,0.041047,21,0.041047,21.5,0.041047,22,0.041047,22.5,0.041047,23,0.041047,23.5,0.041047,24,0.041047,24.5,0.041047,25,0.041047,25.5,0.041047,26,0.041047,26.5,0.041047,27,0.041047,27.5,0.041047,28,0.041047,28.5,0.041047,29,0.041047,29.5,0.041047,30,0.041047)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0.00029017,2,0.0012241,2.5,0.0034535,3,0.0075872,3.5,0.01441,4,0.02496,4.5,0.039717,5,0.0581,5.5,0.082683,6,0.12097,6.5,0.16467,7,0.20353,7.5,0.23746,8,0.26329,8.5,0.27273,9,0.27273,9.5,0.27273,10,0.27273,10.5,0.27273,11,0.27273,11.5,0.27273,12,0.27273,12.5,0.27273,13,0.27273,13.5,0.27273,14,0.27273,14.5,0.27273,15,0.27273,15.5,0.27273,16,0.27273,16.5,0.27273,17,0.27273,17.5,0.27273,18,0.27273,18.5,0.27273,19,0.27273,19.5,0.27273,20,0.27273,20.5,0.27273,21,0.27273,21.5,0.27273,22,0.27273,22.5,0.27273,23,0.27273,23.5,0.27273,24,0.27273,24.5,0.27273,25,0.27273,25.5,0.27273,26,0.27273,26.5,0.27273,27,0.27273,27.5,0.27273,28,0.27273,28.5,0.27273,29,0.27273,29.5,0.27273,30,0.27273)}
.func RTJ(Tj) {table(Tj,25,0.00086044,35,0.00095575,45,0.0011045,55,0.0013066,65,0.0015622,75,0.0018712,85,0.0022336,95,0.0026494,105,0.0031187,115,0.0036414,125,0.0042175,135,0.004847,145,0.0055299,155,0.0062663,165,0.0070561,175,0.0078993,275,0.016331,375,0.024764,475,0.033196,575,0.041628,675,0.05006,775,0.058492,875,0.066924,975,0.075356,1075,0.083788,1175,0.09222,1275,0.10065,1375,0.10908,1475,0.11752,1575,0.12595,1675,0.13438,1775,0.14281,1875,0.15125,1975,0.15968)}
.func VthFwd(Tj) {table(Tj,25,-0.28079,35,-0.26511,45,-0.24327,55,-0.21525,65,-0.18106,75,-0.1407,85,-0.094168,95,-0.041463,105,0.017414,115,0.082463,125,0.15368,135,0.23108,145,0.31464,155,0.40438,165,0.50029,175,0.60237,275,1.6232,375,2.644,475,3.6648,575,4.6856,675,5.7064,775,6,875,6,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.009,6.150,0.012,6.149,0.014,6.148,0.017,6.146,0.020,6.144,0.025,6.141,0.030,6.135,0.036,6.126,0.044,6.117,0.054,6.105,0.065,6.090,0.079,6.074,0.095,6.057,0.116,6.034,0.140,6.009,0.170,5.981,0.206,5.947,0.249,5.906,0.302,5.858,0.366,5.804,0.444,5.741,0.538,5.669,0.652,5.586,0.790,5.492,0.957,5.384,1.160,5.263,1.406,5.128,1.703,4.980,2.064,4.819,2.502,4.644,3.032,4.458,3.675,4.263,4.453,4.059,5.397,3.849,6.540,3.636,7.926,3.418,9.606,3.166,11.641,2.911,14.108,2.660,17.098,2.406,20.721,2.154,25.112,1.936,30.433,1.722,36.882,1.512,44.697,1.321,54.168,1.152,65.647,1.008,79.557,0.891,96.415,0.794,116.846,0.713,141.606,0.642,171.612,0.581,207.977,0.527,252.047,0.479,305.456,0.436,370.183,0.401,448.625,0.375,543.689,0.357,658.897,0.343,798.518,0.341)}

.func Cdg(V) {table(V,0.009,3.007,0.012,3.006,0.014,3.003,0.017,3.000,0.020,2.996,0.025,2.989,0.030,2.978,0.036,2.965,0.044,2.949,0.054,2.929,0.065,2.904,0.079,2.877,0.095,2.844,0.116,2.802,0.140,2.754,0.170,2.698,0.206,2.631,0.249,2.550,0.302,2.457,0.366,2.351,0.444,2.232,0.538,2.104,0.652,1.974,0.790,1.845,0.957,1.718,1.160,1.597,1.406,1.479,1.703,1.364,2.064,1.250,2.502,1.138,3.032,1.031,3.675,0.927,4.453,0.829,5.397,0.734,6.540,0.642,7.926,0.551,9.606,0.436,11.641,0.331,14.108,0.241,17.098,0.167,20.721,0.110,25.112,0.093,30.433,0.082,36.882,0.071,44.697,0.062,54.168,0.053,65.647,0.045,79.557,0.040,96.415,0.036,116.846,0.032,141.606,0.030,171.612,0.027,207.977,0.025,252.047,0.023,305.456,0.021,370.183,0.020,448.625,0.019,543.689,0.019,658.897,0.019,798.518,0.019)}

.func Cgs(V) {table(V,-4.970,4.778,-4.282,3.841,-3.593,3.691,-2.905,3.479,-2.217,3.614,-1.529,3.942,-0.840,4.454,-0.152,5.089,0.536,5.754,1.224,6.380,1.913,6.839,2.601,7.114,3.289,7.249,3.978,7.320,4.666,7.364,5.354,7.394,6.042,7.417,6.731,7.435,7.419,7.449,8.107,7.462,8.796,7.473,9.484,7.483,10.172,7.491,10.860,7.499,11.549,7.506,12.237,7.513,12.925,7.519,13.613,7.525,14.302,7.531,14.990,7.537)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.429121e-01
.param Rs_ideal=1.758616e-02
.ENDS 11

.SUBCKT 12 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,2.826e-05,1,0.0020549,1.5,0.022614,2,0.14489,2.5,0.51741,3,1.4567,3.5,3.3854,4,6.7726,4.5,12.1544,5,20.1817,5.5,31.1134,6,44.887,6.5,62.1812,7,83.4337,7.5,108.8987,8,140.7955,8.5,180.0054,9,224.1655,9.5,269.115,10,314.9941,10.5,359.0077,11,406.4973,11.5,459.3393,12,510.87,12.5,566.0025,13,628.3976,13.5,683.9503,14,777.5748,14.5,911.9939,15,1277.0625,15.5,1642.0483,16,2014.0059,16.5,2346.9021,17,2647.3653,17.5,2719.0385,18,2788.6187,18.5,2856.2158,19,2921.9314,19.5,2985.8596,20,3048.0875,20.5,3108.6963,21,3167.7614,21.5,3225.3533,22,3281.5377,22.5,3336.3761,23,3389.9261,23.5,3442.2419,24,3493.374,24.5,3543.3705,25,3592.2761,25.5,3640.1333,26,3686.9822,26.5,3732.8605,27,3777.804,27.5,3821.8466,28,3865.0204,28.5,3907.3558,29,3948.8817,29.5,3990.1289,30,4030.3437)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,0.93722,3.5,0.83891,4,0.7399,4.5,0.63511,5,0.51912,5.5,0.46062,6,0.43556,6.5,0.40458,7,0.37252,7.5,0.34573,8,0.31422,8.5,0.27794,9,0.24514,9.5,0.21893,10,0.19717,10.5,0.18438,11,0.17495,11.5,0.16581,12,0.15697,12.5,0.14828,13,0.13868,13.5,0.13213,14,0.12271,14.5,0.11026,15,0.091703,15.5,0.075088,16,0.058933,16.5,0.048471,17,0.041047,17.5,0.041047,18,0.041047,18.5,0.041047,19,0.041047,19.5,0.041047,20,0.041047,20.5,0.041047,21,0.041047,21.5,0.041047,22,0.041047,22.5,0.041047,23,0.041047,23.5,0.041047,24,0.041047,24.5,0.041047,25,0.041047,25.5,0.041047,26,0.041047,26.5,0.041047,27,0.041047,27.5,0.041047,28,0.041047,28.5,0.041047,29,0.041047,29.5,0.041047,30,0.041047)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0.00029017,2,0.0012241,2.5,0.0034535,3,0.0075872,3.5,0.01441,4,0.02496,4.5,0.039717,5,0.0581,5.5,0.082683,6,0.12097,6.5,0.16467,7,0.20353,7.5,0.23746,8,0.26329,8.5,0.27273,9,0.27273,9.5,0.27273,10,0.27273,10.5,0.27273,11,0.27273,11.5,0.27273,12,0.27273,12.5,0.27273,13,0.27273,13.5,0.27273,14,0.27273,14.5,0.27273,15,0.27273,15.5,0.27273,16,0.27273,16.5,0.27273,17,0.27273,17.5,0.27273,18,0.27273,18.5,0.27273,19,0.27273,19.5,0.27273,20,0.27273,20.5,0.27273,21,0.27273,21.5,0.27273,22,0.27273,22.5,0.27273,23,0.27273,23.5,0.27273,24,0.27273,24.5,0.27273,25,0.27273,25.5,0.27273,26,0.27273,26.5,0.27273,27,0.27273,27.5,0.27273,28,0.27273,28.5,0.27273,29,0.27273,29.5,0.27273,30,0.27273)}
.func RTJ(Tj) {table(Tj,25,0.00086044,35,0.00095575,45,0.0011045,55,0.0013066,65,0.0015622,75,0.0018712,85,0.0022336,95,0.0026494,105,0.0031187,115,0.0036414,125,0.0042175,135,0.004847,145,0.0055299,155,0.0062663,165,0.0070561,175,0.0078993,275,0.016331,375,0.024764,475,0.033196,575,0.041628,675,0.05006,775,0.058492,875,0.066924,975,0.075356,1075,0.083788,1175,0.09222,1275,0.10065,1375,0.10908,1475,0.11752,1575,0.12595,1675,0.13438,1775,0.14281,1875,0.15125,1975,0.15968)}
.func VthFwd(Tj) {table(Tj,25,-0.28079,35,-0.26511,45,-0.24327,55,-0.21525,65,-0.18106,75,-0.1407,85,-0.094168,95,-0.041463,105,0.017414,115,0.082463,125,0.15368,135,0.23108,145,0.31464,155,0.40438,165,0.50029,175,0.60237,275,1.6232,375,2.644,475,3.6648,575,4.6856,675,5.7064,775,6,875,6,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.24291,-4,0.2315,-3,0.21053,-2,0.18119,-1,0.15481,0,0.13593,1,0.25651,2,0.26152,3,0.18506,4,0.12837,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,20,16,20,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.017586,-4,0.017281,-3,0.018826,-2,0.021256,-1,0.020262,0,0.016433,1,0.011785,2,0.013387,3,0.01834,4,0.022918,5,0.023974,6,0.022197,7,0.022416,8,0.025311,9,0.025511,10,0.020851,11,0.020664,12,0.023378,13,0.023355,14,0.030807,15,10,16,10,17,0.028873,18,0.037913)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.021043,2,0.1,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.1278,35,1.0896,45,1.0579,55,1.0327,65,1.0141,75,1.0019,85,0.99626,95,0.99712,105,1.0045,115,1.0184,125,1.0388,135,1.0657,145,1.0992,155,1.1391,165,1.1856,175,1.2385,275,1.7682,375,2.298,475,2.8277,575,3.3574,675,3.8871,775,4.4168,875,4.9465,975,5.4762,1075,6.0059,1175,6.5357,1275,7.0654,1375,7.5951,1475,8.1248,1575,8.6545,1675,9.1842,1775,9.7139,1875,10.2437,1975,10.7734)}
.func nscal(Tj) {table(Tj,25,0.99327,35,0.99555,45,0.9974,55,0.99883,65,0.99983,75,1.0004,85,1.0006,95,1.0003,105,0.9996,115,0.99848,125,0.99694,135,0.99497,145,0.99258,155,0.98976,165,0.98652,175,0.98286,275,0.94621,375,0.90956,475,0.87291,575,0.83626,675,0.79961,775,0.76296,875,0.72632,975,0.68967,1075,0.65302,1175,0.61637,1275,0.57972,1375,0.54307,1475,0.50642,1575,0.46978,1675,0.43313,1775,0.39648,1875,0.35983,1975,0.32318)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.009,6.150,0.012,6.149,0.014,6.148,0.017,6.146,0.020,6.144,0.025,6.141,0.030,6.135,0.036,6.126,0.044,6.117,0.054,6.105,0.065,6.090,0.079,6.074,0.095,6.057,0.116,6.034,0.140,6.009,0.170,5.981,0.206,5.947,0.249,5.906,0.302,5.858,0.366,5.804,0.444,5.741,0.538,5.669,0.652,5.586,0.790,5.492,0.957,5.384,1.160,5.263,1.406,5.128,1.703,4.980,2.064,4.819,2.502,4.644,3.032,4.458,3.675,4.263,4.453,4.059,5.397,3.849,6.540,3.636,7.926,3.418,9.606,3.166,11.641,2.911,14.108,2.660,17.098,2.406,20.721,2.154,25.112,1.936,30.433,1.722,36.882,1.512,44.697,1.321,54.168,1.152,65.647,1.008,79.557,0.891,96.415,0.794,116.846,0.713,141.606,0.642,171.612,0.581,207.977,0.527,252.047,0.479,305.456,0.436,370.183,0.401,448.625,0.375,543.689,0.357,658.897,0.343,798.518,0.341)}

.func Cdg(V) {table(V,0.009,3.007,0.012,3.006,0.014,3.003,0.017,3.000,0.020,2.996,0.025,2.989,0.030,2.978,0.036,2.965,0.044,2.949,0.054,2.929,0.065,2.904,0.079,2.877,0.095,2.844,0.116,2.802,0.140,2.754,0.170,2.698,0.206,2.631,0.249,2.550,0.302,2.457,0.366,2.351,0.444,2.232,0.538,2.104,0.652,1.974,0.790,1.845,0.957,1.718,1.160,1.597,1.406,1.479,1.703,1.364,2.064,1.250,2.502,1.138,3.032,1.031,3.675,0.927,4.453,0.829,5.397,0.734,6.540,0.642,7.926,0.551,9.606,0.436,11.641,0.331,14.108,0.241,17.098,0.167,20.721,0.110,25.112,0.093,30.433,0.082,36.882,0.071,44.697,0.062,54.168,0.053,65.647,0.045,79.557,0.040,96.415,0.036,116.846,0.032,141.606,0.030,171.612,0.027,207.977,0.025,252.047,0.023,305.456,0.021,370.183,0.020,448.625,0.019,543.689,0.019,658.897,0.019,798.518,0.019)}

.func Cgs(V) {table(V,-4.970,4.778,-4.282,3.841,-3.593,3.691,-2.905,3.479,-2.217,3.614,-1.529,3.942,-0.840,4.454,-0.152,5.089,0.536,5.754,1.224,6.380,1.913,6.839,2.601,7.114,3.289,7.249,3.978,7.320,4.666,7.364,5.354,7.394,6.042,7.417,6.731,7.435,7.419,7.449,8.107,7.462,8.796,7.473,9.484,7.483,10.172,7.491,10.860,7.499,11.549,7.506,12.237,7.513,12.925,7.519,13.613,7.525,14.302,7.531,14.990,7.537)}


.ENDS 12

.SUBCKT 13 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,2.826e-05,1,0.0020549,1.5,0.022614,2,0.14489,2.5,0.51741,3,1.4567,3.5,3.3854,4,6.7726,4.5,12.1544,5,20.1817,5.5,31.1134,6,44.887,6.5,62.1812,7,83.4337,7.5,108.8987,8,140.7955,8.5,180.0054,9,224.1655,9.5,269.115,10,314.9941,10.5,359.0077,11,406.4973,11.5,459.3393,12,510.87,12.5,566.0025,13,628.3976,13.5,683.9503,14,777.5748,14.5,911.9939,15,1277.0625,15.5,1642.0483,16,2014.0059,16.5,2346.9021,17,2647.3653,17.5,2719.0385,18,2788.6187,18.5,2856.2158,19,2921.9314,19.5,2985.8596,20,3048.0875,20.5,3108.6963,21,3167.7614,21.5,3225.3533,22,3281.5377,22.5,3336.3761,23,3389.9261,23.5,3442.2419,24,3493.374,24.5,3543.3705,25,3592.2761,25.5,3640.1333,26,3686.9822,26.5,3732.8605,27,3777.804,27.5,3821.8466,28,3865.0204,28.5,3907.3558,29,3948.8817,29.5,3990.1289,30,4030.3437)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,0.93722,3.5,0.83891,4,0.7399,4.5,0.63511,5,0.51912,5.5,0.46062,6,0.43556,6.5,0.40458,7,0.37252,7.5,0.34573,8,0.31422,8.5,0.27794,9,0.24514,9.5,0.21893,10,0.19717,10.5,0.18438,11,0.17495,11.5,0.16581,12,0.15697,12.5,0.14828,13,0.13868,13.5,0.13213,14,0.12271,14.5,0.11026,15,0.091703,15.5,0.075088,16,0.058933,16.5,0.048471,17,0.041047,17.5,0.041047,18,0.041047,18.5,0.041047,19,0.041047,19.5,0.041047,20,0.041047,20.5,0.041047,21,0.041047,21.5,0.041047,22,0.041047,22.5,0.041047,23,0.041047,23.5,0.041047,24,0.041047,24.5,0.041047,25,0.041047,25.5,0.041047,26,0.041047,26.5,0.041047,27,0.041047,27.5,0.041047,28,0.041047,28.5,0.041047,29,0.041047,29.5,0.041047,30,0.041047)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0.00029017,2,0.0012241,2.5,0.0034535,3,0.0075872,3.5,0.01441,4,0.02496,4.5,0.039717,5,0.0581,5.5,0.082683,6,0.12097,6.5,0.16467,7,0.20353,7.5,0.23746,8,0.26329,8.5,0.27273,9,0.27273,9.5,0.27273,10,0.27273,10.5,0.27273,11,0.27273,11.5,0.27273,12,0.27273,12.5,0.27273,13,0.27273,13.5,0.27273,14,0.27273,14.5,0.27273,15,0.27273,15.5,0.27273,16,0.27273,16.5,0.27273,17,0.27273,17.5,0.27273,18,0.27273,18.5,0.27273,19,0.27273,19.5,0.27273,20,0.27273,20.5,0.27273,21,0.27273,21.5,0.27273,22,0.27273,22.5,0.27273,23,0.27273,23.5,0.27273,24,0.27273,24.5,0.27273,25,0.27273,25.5,0.27273,26,0.27273,26.5,0.27273,27,0.27273,27.5,0.27273,28,0.27273,28.5,0.27273,29,0.27273,29.5,0.27273,30,0.27273)}
.func RTJ(Tj) {table(Tj,25,0.00086044,35,0.00095575,45,0.0011045,55,0.0013066,65,0.0015622,75,0.0018712,85,0.0022336,95,0.0026494,105,0.0031187,115,0.0036414,125,0.0042175,135,0.004847,145,0.0055299,155,0.0062663,165,0.0070561,175,0.0078993,275,0.016331,375,0.024764,475,0.033196,575,0.041628,675,0.05006,775,0.058492,875,0.066924,975,0.075356,1075,0.083788,1175,0.09222,1275,0.10065,1375,0.10908,1475,0.11752,1575,0.12595,1675,0.13438,1775,0.14281,1875,0.15125,1975,0.15968)}
.func VthFwd(Tj) {table(Tj,25,-0.28079,35,-0.26511,45,-0.24327,55,-0.21525,65,-0.18106,75,-0.1407,85,-0.094168,95,-0.041463,105,0.017414,115,0.082463,125,0.15368,135,0.23108,145,0.31464,155,0.40438,165,0.50029,175,0.60237,275,1.6232,375,2.644,475,3.6648,575,4.6856,675,5.7064,775,6,875,6,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.24291,-4,0.2315,-3,0.21053,-2,0.18119,-1,0.15481,0,0.13593,1,0.25651,2,0.26152,3,0.18506,4,0.12837,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,20,16,20,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.017586,-4,0.017281,-3,0.018826,-2,0.021256,-1,0.020262,0,0.016433,1,0.011785,2,0.013387,3,0.01834,4,0.022918,5,0.023974,6,0.022197,7,0.022416,8,0.025311,9,0.025511,10,0.020851,11,0.020664,12,0.023378,13,0.023355,14,0.030807,15,10,16,10,17,0.028873,18,0.037913)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.021043,2,0.1,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.1278,35,1.0896,45,1.0579,55,1.0327,65,1.0141,75,1.0019,85,0.99626,95,0.99712,105,1.0045,115,1.0184,125,1.0388,135,1.0657,145,1.0992,155,1.1391,165,1.1856,175,1.2385,275,1.7682,375,2.298,475,2.8277,575,3.3574,675,3.8871,775,4.4168,875,4.9465,975,5.4762,1075,6.0059,1175,6.5357,1275,7.0654,1375,7.5951,1475,8.1248,1575,8.6545,1675,9.1842,1775,9.7139,1875,10.2437,1975,10.7734)}
.func nscal(Tj) {table(Tj,25,0.99327,35,0.99555,45,0.9974,55,0.99883,65,0.99983,75,1.0004,85,1.0006,95,1.0003,105,0.9996,115,0.99848,125,0.99694,135,0.99497,145,0.99258,155,0.98976,165,0.98652,175,0.98286,275,0.94621,375,0.90956,475,0.87291,575,0.83626,675,0.79961,775,0.76296,875,0.72632,975,0.68967,1075,0.65302,1175,0.61637,1275,0.57972,1375,0.54307,1475,0.50642,1575,0.46978,1675,0.43313,1775,0.39648,1875,0.35983,1975,0.32318)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.009,6.150,0.012,6.149,0.014,6.148,0.017,6.146,0.020,6.144,0.025,6.141,0.030,6.135,0.036,6.126,0.044,6.117,0.054,6.105,0.065,6.090,0.079,6.074,0.095,6.057,0.116,6.034,0.140,6.009,0.170,5.981,0.206,5.947,0.249,5.906,0.302,5.858,0.366,5.804,0.444,5.741,0.538,5.669,0.652,5.586,0.790,5.492,0.957,5.384,1.160,5.263,1.406,5.128,1.703,4.980,2.064,4.819,2.502,4.644,3.032,4.458,3.675,4.263,4.453,4.059,5.397,3.849,6.540,3.636,7.926,3.418,9.606,3.166,11.641,2.911,14.108,2.660,17.098,2.406,20.721,2.154,25.112,1.936,30.433,1.722,36.882,1.512,44.697,1.321,54.168,1.152,65.647,1.008,79.557,0.891,96.415,0.794,116.846,0.713,141.606,0.642,171.612,0.581,207.977,0.527,252.047,0.479,305.456,0.436,370.183,0.401,448.625,0.375,543.689,0.357,658.897,0.343,798.518,0.341)}

.func Cdg(V) {table(V,0.009,3.007,0.012,3.006,0.014,3.003,0.017,3.000,0.020,2.996,0.025,2.989,0.030,2.978,0.036,2.965,0.044,2.949,0.054,2.929,0.065,2.904,0.079,2.877,0.095,2.844,0.116,2.802,0.140,2.754,0.170,2.698,0.206,2.631,0.249,2.550,0.302,2.457,0.366,2.351,0.444,2.232,0.538,2.104,0.652,1.974,0.790,1.845,0.957,1.718,1.160,1.597,1.406,1.479,1.703,1.364,2.064,1.250,2.502,1.138,3.032,1.031,3.675,0.927,4.453,0.829,5.397,0.734,6.540,0.642,7.926,0.551,9.606,0.436,11.641,0.331,14.108,0.241,17.098,0.167,20.721,0.110,25.112,0.093,30.433,0.082,36.882,0.071,44.697,0.062,54.168,0.053,65.647,0.045,79.557,0.040,96.415,0.036,116.846,0.032,141.606,0.030,171.612,0.027,207.977,0.025,252.047,0.023,305.456,0.021,370.183,0.020,448.625,0.019,543.689,0.019,658.897,0.019,798.518,0.019)}

.func Cgs(V) {table(V,-4.970,4.778,-4.282,3.841,-3.593,3.691,-2.905,3.479,-2.217,3.614,-1.529,3.942,-0.840,4.454,-0.152,5.089,0.536,5.754,1.224,6.380,1.913,6.839,2.601,7.114,3.289,7.249,3.978,7.320,4.666,7.364,5.354,7.394,6.042,7.417,6.731,7.435,7.419,7.449,8.107,7.462,8.796,7.473,9.484,7.483,10.172,7.491,10.860,7.499,11.549,7.506,12.237,7.513,12.925,7.519,13.613,7.525,14.302,7.531,14.990,7.537)}


.ENDS 13

.SUBCKT 21 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.5133e-06,1,6.8338e-05,1.5,0.00030901,2,0.0013972,2.5,0.0063179,3,0.028568,3.5,0.10072,4,0.27737,4.5,0.63803,5,1.3289,5.5,2.495,6,4.3538,6.5,7.024,7,10.7488,7.5,15.7268,8,22.277,8.5,30.4448,9,40.4374,9.5,51.9957,10,65.3211,10.5,79.6158,11,94.2399,11.5,110.3904,12,127.5271,12.5,145.7613,13,165.2433,13.5,185.0169,14,203.5532,14.5,219.8658,15,233.2404,15.5,243.941,16,253.0219,16.5,260.3839,17,267.3835,17.5,273.9825,18,280.3866,18.5,286.3849,19,292.124,19.5,298.0037,20,304.075,20.5,309.9993,21,316.1972,21.5,322.5372,22,328.6926,22.5,334.6727,23,340.4861,23.5,346.1411,24,351.645,24.5,357.0048,25,362.2272,25.5,367.3183,26,372.2837,26.5,377.129,27,381.8591,27.5,386.4788,28,390.9926,28.5,395.4047,29,399.7191,29.5,403.9998,30,408.1567)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.92027,5.5,0.8257,6,0.71508,6.5,0.5986,7,0.47354,7.5,0.41971,8,0.37189,8.5,0.33397,9,0.29663,9.5,0.26519,10,0.23816,10.5,0.21804,11,0.20233,11.5,0.18818,12,0.17399,12.5,0.16118,13,0.14824,13.5,0.1364,14,0.12757,14.5,0.12143,15,0.11802,15.5,0.11667,16,0.11596,16.5,0.11596,17,0.11596,17.5,0.11596,18,0.11596,18.5,0.11596,19,0.11596,19.5,0.11596,20,0.11596,20.5,0.11596,21,0.11596,21.5,0.11596,22,0.11596,22.5,0.11596,23,0.11596,23.5,0.11596,24,0.11596,24.5,0.11596,25,0.11596,25.5,0.11596,26,0.11596,26.5,0.11596,27,0.11596,27.5,0.11596,28,0.11596,28.5,0.11596,29,0.11596,29.5,0.11596,30,0.11596)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00010441,3.5,0.00042125,4,0.0010171,4.5,0.0021745,5,0.0039708,5.5,0.00652,6,0.0095883,6.5,0.014649,7,0.021527,7.5,0.030301,8,0.038773,8.5,0.049437,9,0.059247,9.5,0.067465,10,0.073146,10.5,0.085404,11,0.15563,11.5,0.2298,12,0.33935,12.5,0.44944,13,0.5558,13.5,0.6013,14,0.64169,14.5,0.64589,15,0.64956,15.5,0.64983,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,-40,-0.0047727,-30,-0.0039903,-20,-0.003139,-10,-0.0022189,0,-0.0012299,10,-0.00017197,20,0.0009548,30,0.0021504,40,0.0034149,50,0.0047483,60,0.0061505,70,0.0076216,80,0.0091616,90,0.01077,100,0.012448,110,0.014195,120,0.01601,130,0.017895,140,0.019848,150,0.02187,160,0.023961,170,0.026121,180,0.028349,190,0.030647,200,0.033013,300,0.056677,400,0.080341,500,0.10401,600,0.12767,700,0.15133,800,0.175,900,0.19866,1000,0.22233,1100,0.24599,1200,0.26965,1300,0.29332,1400,0.31698,1500,0.34065,1600,0.36431,1700,0.38798,1800,0.41164,1900,0.4353,2000,0.45897)}
.func VthFwd(Tj) {table(Tj,-40,-0.79395,-30,-0.69496,-20,-0.59318,-10,-0.48862,0,-0.38126,10,-0.27112,20,-0.15819,30,-0.042464,40,0.076047,50,0.19735,60,0.32144,70,0.44832,80,0.57798,90,0.71044,100,0.84569,110,0.98372,120,1.1245,130,1.2682,140,1.4146,150,1.5638,160,1.7157,170,1.8705,180,2.0281,190,2.1884,200,2.3515,300,3.9829,400,5.6143,500,6,600,6,700,6,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.005,2.399,0.006,2.396,0.007,2.397,0.008,2.396,0.010,2.396,0.013,2.394,0.016,2.391,0.020,2.388,0.024,2.386,0.030,2.381,0.037,2.377,0.046,2.373,0.057,2.365,0.071,2.358,0.087,2.351,0.108,2.342,0.133,2.330,0.165,2.320,0.203,2.304,0.251,2.288,0.311,2.265,0.384,2.241,0.474,2.211,0.586,2.177,0.725,2.136,0.895,2.089,1.106,2.036,1.367,1.976,1.690,1.911,2.088,1.840,2.581,1.763,3.189,1.680,3.941,1.592,4.871,1.500,6.019,1.402,7.439,1.282,9.193,1.162,11.361,1.043,14.040,0.926,17.350,0.817,21.442,0.730,26.498,0.651,32.746,0.578,40.468,0.513,50.011,0.456,61.804,0.406,76.378,0.364,94.389,0.326,116.646,0.293,144.152,0.263,178.145,0.237,220.153,0.213,272.067,0.192,336.223,0.173,415.507,0.157,513.487,0.141,634.572,0.128,784.209,0.117,969.132,0.106,1197.662,0.098)}

.func Cdg(V) {table(V,0.005,1.590,0.006,1.588,0.007,1.587,0.008,1.585,0.010,1.583,0.013,1.580,0.016,1.577,0.020,1.572,0.024,1.567,0.030,1.560,0.037,1.551,0.046,1.540,0.057,1.528,0.071,1.512,0.087,1.492,0.108,1.467,0.133,1.436,0.165,1.398,0.203,1.353,0.251,1.298,0.311,1.235,0.384,1.164,0.474,1.089,0.586,1.012,0.725,0.937,0.895,0.866,1.106,0.798,1.367,0.731,1.690,0.665,2.088,0.601,2.581,0.538,3.189,0.477,3.941,0.419,4.871,0.363,6.019,0.308,7.439,0.240,9.193,0.180,11.361,0.129,14.040,0.088,17.350,0.058,21.442,0.050,26.498,0.044,32.746,0.038,40.468,0.034,50.011,0.030,61.804,0.027,76.378,0.025,94.389,0.023,116.646,0.021,144.152,0.019,178.145,0.018,220.153,0.016,272.067,0.015,336.223,0.014,415.507,0.013,513.487,0.012,634.572,0.011,784.209,0.010,969.132,0.010,1197.662,0.009)}

.func Cgs(V) {table(V,-5.360,3.603,-4.567,2.692,-3.774,2.510,-2.981,2.274,-2.188,2.389,-1.394,2.662,-0.601,3.003,0.192,3.383,0.985,3.755,1.778,4.044,2.571,4.211,3.364,4.308,4.157,4.353,4.950,4.379,5.743,4.396,6.537,4.410,7.330,4.420,8.123,4.429,8.916,4.436,9.709,4.443,10.502,4.449,11.295,4.455,12.088,4.460,12.881,4.464,13.674,4.469,14.468,4.473,15.261,4.477,16.054,4.480,16.847,4.484,17.640,4.486)}


.param Is_ideal=1.000000e-05
.param n_ideal=3.180157e-01
.param Rs_ideal=4.471726e-02
.ENDS 21

.SUBCKT 22 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.5133e-06,1,6.8338e-05,1.5,0.00030901,2,0.0013972,2.5,0.0063179,3,0.028568,3.5,0.10072,4,0.27737,4.5,0.63803,5,1.3289,5.5,2.495,6,4.3538,6.5,7.024,7,10.7488,7.5,15.7268,8,22.277,8.5,30.4448,9,40.4374,9.5,51.9957,10,65.3211,10.5,79.6158,11,94.2399,11.5,110.3904,12,127.5271,12.5,145.7613,13,165.2433,13.5,185.0169,14,203.5532,14.5,219.8658,15,233.2404,15.5,243.941,16,253.0219,16.5,260.3839,17,267.3835,17.5,273.9825,18,280.3866,18.5,286.3849,19,292.124,19.5,298.0037,20,304.075,20.5,309.9993,21,316.1972,21.5,322.5372,22,328.6926,22.5,334.6727,23,340.4861,23.5,346.1411,24,351.645,24.5,357.0048,25,362.2272,25.5,367.3183,26,372.2837,26.5,377.129,27,381.8591,27.5,386.4788,28,390.9926,28.5,395.4047,29,399.7191,29.5,403.9998,30,408.1567)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.92027,5.5,0.8257,6,0.71508,6.5,0.5986,7,0.47354,7.5,0.41971,8,0.37189,8.5,0.33397,9,0.29663,9.5,0.26519,10,0.23816,10.5,0.21804,11,0.20233,11.5,0.18818,12,0.17399,12.5,0.16118,13,0.14824,13.5,0.1364,14,0.12757,14.5,0.12143,15,0.11802,15.5,0.11667,16,0.11596,16.5,0.11596,17,0.11596,17.5,0.11596,18,0.11596,18.5,0.11596,19,0.11596,19.5,0.11596,20,0.11596,20.5,0.11596,21,0.11596,21.5,0.11596,22,0.11596,22.5,0.11596,23,0.11596,23.5,0.11596,24,0.11596,24.5,0.11596,25,0.11596,25.5,0.11596,26,0.11596,26.5,0.11596,27,0.11596,27.5,0.11596,28,0.11596,28.5,0.11596,29,0.11596,29.5,0.11596,30,0.11596)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00010441,3.5,0.00042125,4,0.0010171,4.5,0.0021745,5,0.0039708,5.5,0.00652,6,0.0095883,6.5,0.014649,7,0.021527,7.5,0.030301,8,0.038773,8.5,0.049437,9,0.059247,9.5,0.067465,10,0.073146,10.5,0.085404,11,0.15563,11.5,0.2298,12,0.33935,12.5,0.44944,13,0.5558,13.5,0.6013,14,0.64169,14.5,0.64589,15,0.64956,15.5,0.64983,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,-40,-0.0047727,-30,-0.0039903,-20,-0.003139,-10,-0.0022189,0,-0.0012299,10,-0.00017197,20,0.0009548,30,0.0021504,40,0.0034149,50,0.0047483,60,0.0061505,70,0.0076216,80,0.0091616,90,0.01077,100,0.012448,110,0.014195,120,0.01601,130,0.017895,140,0.019848,150,0.02187,160,0.023961,170,0.026121,180,0.028349,190,0.030647,200,0.033013,300,0.056677,400,0.080341,500,0.10401,600,0.12767,700,0.15133,800,0.175,900,0.19866,1000,0.22233,1100,0.24599,1200,0.26965,1300,0.29332,1400,0.31698,1500,0.34065,1600,0.36431,1700,0.38798,1800,0.41164,1900,0.4353,2000,0.45897)}
.func VthFwd(Tj) {table(Tj,-40,-0.79395,-30,-0.69496,-20,-0.59318,-10,-0.48862,0,-0.38126,10,-0.27112,20,-0.15819,30,-0.042464,40,0.076047,50,0.19735,60,0.32144,70,0.44832,80,0.57798,90,0.71044,100,0.84569,110,0.98372,120,1.1245,130,1.2682,140,1.4146,150,1.5638,160,1.7157,170,1.8705,180,2.0281,190,2.1884,200,2.3515,300,3.9829,400,5.6143,500,6,600,6,700,6,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.31802,-4,0.30239,-3,0.27549,-2,0.23997,-1,0.20172,0,0.16707,1,0.1439,2,0.14387,3,0.29318,4,0.30477,5,0.25055,6,0.20969,7,0.17319,8,0.15077,9,0.13968,10,0.1245,11,0.11898,12,0.11825,13,0.10867,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.044717,-4,0.043436,-3,0.045399,-2,0.049174,-1,0.051824,0,0.051815,1,0.046541,2,0.038559,3,0.027063,4,0.026832,5,0.031403,6,0.036827,7,0.04234,8,0.049371,9,0.058908,10,0.073633,11,0.090477,12,0.11197,13,0.1348,14,0.13697,15,0.13652,16,0.15032,17,0.16868,18,0.18933)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,3.9431e-05,3,0.035501,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,1.0718,-30,1.0277,-20,0.99562,-10,0.97556,0,0.96752,10,0.9715,20,0.98749,30,1.0155,40,1.0555,50,1.1076,60,1.1717,70,1.2478,80,1.3359,90,1.436,100,1.5482,110,1.6724,120,1.8086,130,1.9568,140,2.117,150,2.2893,160,2.4735,170,2.6698,180,2.8781,190,3.0985,200,3.3308,300,5.6543,400,7.9779,500,10.3014,600,12.6249,700,14.9484,800,17.272,900,19.5955,1000,21.919,1100,24.2425,1200,26.5661,1300,28.8896,1400,31.2131,1500,33.5366,1600,35.8602,1700,38.1837,1800,40.5072,1900,42.8307,2000,45.1543)}
.func nscal(Tj) {table(Tj,-40,1.0132,-30,1.0112,-20,1.0091,-10,1.0071,0,1.0051,10,1.0031,20,1.001,30,0.99898,40,0.99695,50,0.99491,60,0.99287,70,0.99083,80,0.98878,90,0.98674,100,0.98469,110,0.98265,120,0.9806,130,0.97855,140,0.9765,150,0.97445,160,0.97239,170,0.97034,180,0.96828,190,0.96623,200,0.96417,300,0.94358,400,0.92299,500,0.9024,600,0.88181,700,0.86122,800,0.84063,900,0.82004,1000,0.79945,1100,0.77886,1200,0.75827,1300,0.73768,1400,0.71709,1500,0.6965,1600,0.67591,1700,0.65532,1800,0.63473,1900,0.61414,2000,0.59355)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.005,2.399,0.006,2.396,0.007,2.397,0.008,2.396,0.010,2.396,0.013,2.394,0.016,2.391,0.020,2.388,0.024,2.386,0.030,2.381,0.037,2.377,0.046,2.373,0.057,2.365,0.071,2.358,0.087,2.351,0.108,2.342,0.133,2.330,0.165,2.320,0.203,2.304,0.251,2.288,0.311,2.265,0.384,2.241,0.474,2.211,0.586,2.177,0.725,2.136,0.895,2.089,1.106,2.036,1.367,1.976,1.690,1.911,2.088,1.840,2.581,1.763,3.189,1.680,3.941,1.592,4.871,1.500,6.019,1.402,7.439,1.282,9.193,1.162,11.361,1.043,14.040,0.926,17.350,0.817,21.442,0.730,26.498,0.651,32.746,0.578,40.468,0.513,50.011,0.456,61.804,0.406,76.378,0.364,94.389,0.326,116.646,0.293,144.152,0.263,178.145,0.237,220.153,0.213,272.067,0.192,336.223,0.173,415.507,0.157,513.487,0.141,634.572,0.128,784.209,0.117,969.132,0.106,1197.662,0.098)}

.func Cdg(V) {table(V,0.005,1.590,0.006,1.588,0.007,1.587,0.008,1.585,0.010,1.583,0.013,1.580,0.016,1.577,0.020,1.572,0.024,1.567,0.030,1.560,0.037,1.551,0.046,1.540,0.057,1.528,0.071,1.512,0.087,1.492,0.108,1.467,0.133,1.436,0.165,1.398,0.203,1.353,0.251,1.298,0.311,1.235,0.384,1.164,0.474,1.089,0.586,1.012,0.725,0.937,0.895,0.866,1.106,0.798,1.367,0.731,1.690,0.665,2.088,0.601,2.581,0.538,3.189,0.477,3.941,0.419,4.871,0.363,6.019,0.308,7.439,0.240,9.193,0.180,11.361,0.129,14.040,0.088,17.350,0.058,21.442,0.050,26.498,0.044,32.746,0.038,40.468,0.034,50.011,0.030,61.804,0.027,76.378,0.025,94.389,0.023,116.646,0.021,144.152,0.019,178.145,0.018,220.153,0.016,272.067,0.015,336.223,0.014,415.507,0.013,513.487,0.012,634.572,0.011,784.209,0.010,969.132,0.010,1197.662,0.009)}

.func Cgs(V) {table(V,-5.360,3.603,-4.567,2.692,-3.774,2.510,-2.981,2.274,-2.188,2.389,-1.394,2.662,-0.601,3.003,0.192,3.383,0.985,3.755,1.778,4.044,2.571,4.211,3.364,4.308,4.157,4.353,4.950,4.379,5.743,4.396,6.537,4.410,7.330,4.420,8.123,4.429,8.916,4.436,9.709,4.443,10.502,4.449,11.295,4.455,12.088,4.460,12.881,4.464,13.674,4.469,14.468,4.473,15.261,4.477,16.054,4.480,16.847,4.484,17.640,4.486)}


.ENDS 22

.SUBCKT 23 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.5133e-06,1,6.8338e-05,1.5,0.00030901,2,0.0013972,2.5,0.0063179,3,0.028568,3.5,0.10072,4,0.27737,4.5,0.63803,5,1.3289,5.5,2.495,6,4.3538,6.5,7.024,7,10.7488,7.5,15.7268,8,22.277,8.5,30.4448,9,40.4374,9.5,51.9957,10,65.3211,10.5,79.6158,11,94.2399,11.5,110.3904,12,127.5271,12.5,145.7613,13,165.2433,13.5,185.0169,14,203.5532,14.5,219.8658,15,233.2404,15.5,243.941,16,253.0219,16.5,260.3839,17,267.3835,17.5,273.9825,18,280.3866,18.5,286.3849,19,292.124,19.5,298.0037,20,304.075,20.5,309.9993,21,316.1972,21.5,322.5372,22,328.6926,22.5,334.6727,23,340.4861,23.5,346.1411,24,351.645,24.5,357.0048,25,362.2272,25.5,367.3183,26,372.2837,26.5,377.129,27,381.8591,27.5,386.4788,28,390.9926,28.5,395.4047,29,399.7191,29.5,403.9998,30,408.1567)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.92027,5.5,0.8257,6,0.71508,6.5,0.5986,7,0.47354,7.5,0.41971,8,0.37189,8.5,0.33397,9,0.29663,9.5,0.26519,10,0.23816,10.5,0.21804,11,0.20233,11.5,0.18818,12,0.17399,12.5,0.16118,13,0.14824,13.5,0.1364,14,0.12757,14.5,0.12143,15,0.11802,15.5,0.11667,16,0.11596,16.5,0.11596,17,0.11596,17.5,0.11596,18,0.11596,18.5,0.11596,19,0.11596,19.5,0.11596,20,0.11596,20.5,0.11596,21,0.11596,21.5,0.11596,22,0.11596,22.5,0.11596,23,0.11596,23.5,0.11596,24,0.11596,24.5,0.11596,25,0.11596,25.5,0.11596,26,0.11596,26.5,0.11596,27,0.11596,27.5,0.11596,28,0.11596,28.5,0.11596,29,0.11596,29.5,0.11596,30,0.11596)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00010441,3.5,0.00042125,4,0.0010171,4.5,0.0021745,5,0.0039708,5.5,0.00652,6,0.0095883,6.5,0.014649,7,0.021527,7.5,0.030301,8,0.038773,8.5,0.049437,9,0.059247,9.5,0.067465,10,0.073146,10.5,0.085404,11,0.15563,11.5,0.2298,12,0.33935,12.5,0.44944,13,0.5558,13.5,0.6013,14,0.64169,14.5,0.64589,15,0.64956,15.5,0.64983,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,-40,-0.0047727,-30,-0.0039903,-20,-0.003139,-10,-0.0022189,0,-0.0012299,10,-0.00017197,20,0.0009548,30,0.0021504,40,0.0034149,50,0.0047483,60,0.0061505,70,0.0076216,80,0.0091616,90,0.01077,100,0.012448,110,0.014195,120,0.01601,130,0.017895,140,0.019848,150,0.02187,160,0.023961,170,0.026121,180,0.028349,190,0.030647,200,0.033013,300,0.056677,400,0.080341,500,0.10401,600,0.12767,700,0.15133,800,0.175,900,0.19866,1000,0.22233,1100,0.24599,1200,0.26965,1300,0.29332,1400,0.31698,1500,0.34065,1600,0.36431,1700,0.38798,1800,0.41164,1900,0.4353,2000,0.45897)}
.func VthFwd(Tj) {table(Tj,-40,-0.79395,-30,-0.69496,-20,-0.59318,-10,-0.48862,0,-0.38126,10,-0.27112,20,-0.15819,30,-0.042464,40,0.076047,50,0.19735,60,0.32144,70,0.44832,80,0.57798,90,0.71044,100,0.84569,110,0.98372,120,1.1245,130,1.2682,140,1.4146,150,1.5638,160,1.7157,170,1.8705,180,2.0281,190,2.1884,200,2.3515,300,3.9829,400,5.6143,500,6,600,6,700,6,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.31802,-4,0.30239,-3,0.27549,-2,0.23997,-1,0.20172,0,0.16707,1,0.1439,2,0.14387,3,0.29318,4,0.30477,5,0.25055,6,0.20969,7,0.17319,8,0.15077,9,0.13968,10,0.1245,11,0.11898,12,0.11825,13,0.10867,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.044717,-4,0.043436,-3,0.045399,-2,0.049174,-1,0.051824,0,0.051815,1,0.046541,2,0.038559,3,0.027063,4,0.026832,5,0.031403,6,0.036827,7,0.04234,8,0.049371,9,0.058908,10,0.073633,11,0.090477,12,0.11197,13,0.1348,14,0.13697,15,0.13652,16,0.15032,17,0.16868,18,0.18933)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,3.9431e-05,3,0.035501,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,1.0718,-30,1.0277,-20,0.99562,-10,0.97556,0,0.96752,10,0.9715,20,0.98749,30,1.0155,40,1.0555,50,1.1076,60,1.1717,70,1.2478,80,1.3359,90,1.436,100,1.5482,110,1.6724,120,1.8086,130,1.9568,140,2.117,150,2.2893,160,2.4735,170,2.6698,180,2.8781,190,3.0985,200,3.3308,300,5.6543,400,7.9779,500,10.3014,600,12.6249,700,14.9484,800,17.272,900,19.5955,1000,21.919,1100,24.2425,1200,26.5661,1300,28.8896,1400,31.2131,1500,33.5366,1600,35.8602,1700,38.1837,1800,40.5072,1900,42.8307,2000,45.1543)}
.func nscal(Tj) {table(Tj,-40,1.0132,-30,1.0112,-20,1.0091,-10,1.0071,0,1.0051,10,1.0031,20,1.001,30,0.99898,40,0.99695,50,0.99491,60,0.99287,70,0.99083,80,0.98878,90,0.98674,100,0.98469,110,0.98265,120,0.9806,130,0.97855,140,0.9765,150,0.97445,160,0.97239,170,0.97034,180,0.96828,190,0.96623,200,0.96417,300,0.94358,400,0.92299,500,0.9024,600,0.88181,700,0.86122,800,0.84063,900,0.82004,1000,0.79945,1100,0.77886,1200,0.75827,1300,0.73768,1400,0.71709,1500,0.6965,1600,0.67591,1700,0.65532,1800,0.63473,1900,0.61414,2000,0.59355)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.005,2.399,0.006,2.396,0.007,2.397,0.008,2.396,0.010,2.396,0.013,2.394,0.016,2.391,0.020,2.388,0.024,2.386,0.030,2.381,0.037,2.377,0.046,2.373,0.057,2.365,0.071,2.358,0.087,2.351,0.108,2.342,0.133,2.330,0.165,2.320,0.203,2.304,0.251,2.288,0.311,2.265,0.384,2.241,0.474,2.211,0.586,2.177,0.725,2.136,0.895,2.089,1.106,2.036,1.367,1.976,1.690,1.911,2.088,1.840,2.581,1.763,3.189,1.680,3.941,1.592,4.871,1.500,6.019,1.402,7.439,1.282,9.193,1.162,11.361,1.043,14.040,0.926,17.350,0.817,21.442,0.730,26.498,0.651,32.746,0.578,40.468,0.513,50.011,0.456,61.804,0.406,76.378,0.364,94.389,0.326,116.646,0.293,144.152,0.263,178.145,0.237,220.153,0.213,272.067,0.192,336.223,0.173,415.507,0.157,513.487,0.141,634.572,0.128,784.209,0.117,969.132,0.106,1197.662,0.098)}

.func Cdg(V) {table(V,0.005,1.590,0.006,1.588,0.007,1.587,0.008,1.585,0.010,1.583,0.013,1.580,0.016,1.577,0.020,1.572,0.024,1.567,0.030,1.560,0.037,1.551,0.046,1.540,0.057,1.528,0.071,1.512,0.087,1.492,0.108,1.467,0.133,1.436,0.165,1.398,0.203,1.353,0.251,1.298,0.311,1.235,0.384,1.164,0.474,1.089,0.586,1.012,0.725,0.937,0.895,0.866,1.106,0.798,1.367,0.731,1.690,0.665,2.088,0.601,2.581,0.538,3.189,0.477,3.941,0.419,4.871,0.363,6.019,0.308,7.439,0.240,9.193,0.180,11.361,0.129,14.040,0.088,17.350,0.058,21.442,0.050,26.498,0.044,32.746,0.038,40.468,0.034,50.011,0.030,61.804,0.027,76.378,0.025,94.389,0.023,116.646,0.021,144.152,0.019,178.145,0.018,220.153,0.016,272.067,0.015,336.223,0.014,415.507,0.013,513.487,0.012,634.572,0.011,784.209,0.010,969.132,0.010,1197.662,0.009)}

.func Cgs(V) {table(V,-5.360,3.603,-4.567,2.692,-3.774,2.510,-2.981,2.274,-2.188,2.389,-1.394,2.662,-0.601,3.003,0.192,3.383,0.985,3.755,1.778,4.044,2.571,4.211,3.364,4.308,4.157,4.353,4.950,4.379,5.743,4.396,6.537,4.410,7.330,4.420,8.123,4.429,8.916,4.436,9.709,4.443,10.502,4.449,11.295,4.455,12.088,4.460,12.881,4.464,13.674,4.469,14.468,4.473,15.261,4.477,16.054,4.480,16.847,4.484,17.640,4.486)}


.ENDS 23

.SUBCKT 31 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.9785e-06,1,8.1165e-05,1.5,0.00038434,2,0.00182,2.5,0.0086182,3,0.04081,3.5,0.13573,4,0.35531,4.5,0.77588,5,1.5042,5.5,2.6684,6,4.4189,6.5,6.9119,7,10.2733,7.5,14.6325,8,20.1841,8.5,27.0343,9,35.2991,9.5,45.014,10,56.5446,10.5,68.8711,11,82.464,11.5,95.8913,12,109.2593,12.5,122.8695,13,136.6889,13.5,149.5232,14,161.5379,14.5,172.5505,15,181.4785,15.5,188.9438,16,194.9511,16.5,200.6984,17,205.8148,17.5,211.1155,18,216.658,18.5,222.8372,19,229.3591,19.5,236.4051,20,243.309,20.5,250.0775,21,256.7168,21.5,263.2325,22,269.6303,22.5,275.915,23,282.0914,23.5,288.164,24,294.1369,24.5,300.0141,25,305.7992,25.5,311.4958,26,317.1071,26.5,322.6363,27,328.0862,27.5,333.4597,28,338.7595,28.5,343.9879,29,349.1475,29.5,354.2833,30,359.3312)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99751,5.5,0.97359,6,0.92721,6.5,0.85977,7,0.7765,7.5,0.68181,8,0.59392,8.5,0.51747,9,0.45264,9.5,0.39591,10,0.34406,10.5,0.3049,11,0.27221,11.5,0.24738,12,0.2278,12.5,0.21328,13,0.19897,13.5,0.18828,14,0.17916,14.5,0.17253,15,0.16987,15.5,0.16895,16,0.16895,16.5,0.16895,17,0.16895,17.5,0.16895,18,0.16895,18.5,0.16895,19,0.16895,19.5,0.16895,20,0.16895,20.5,0.16895,21,0.16895,21.5,0.16895,22,0.16895,22.5,0.16895,23,0.16895,23.5,0.16895,24,0.16895,24.5,0.16895,25,0.16895,25.5,0.16895,26,0.16895,26.5,0.16895,27,0.16895,27.5,0.16895,28,0.16895,28.5,0.16895,29,0.16895,29.5,0.16895,30,0.16895)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.5538e-05,3.5,0.00024216,4,0.00045738,4.5,0.00086912,5,0.0016065,5.5,0.0026652,6,0.004083,6.5,0.0059679,7,0.0088976,7.5,0.013142,8,0.018084,8.5,0.023537,9,0.03066,9.5,0.03798,10,0.044757,10.5,0.061559,11,0.077419,11.5,0.14512,12,0.25479,12.5,0.38231,13,0.50393,13.5,0.62706,14,0.69616,14.5,0.72185,15,0.72861,15.5,0.73013,16,0.73013,16.5,0.73013,17,0.73013,17.5,0.73013,18,0.73013,18.5,0.73013,19,0.73013,19.5,0.73013,20,0.73013,20.5,0.73013,21,0.73013,21.5,0.73013,22,0.73013,22.5,0.73013,23,0.73013,23.5,0.73013,24,0.73013,24.5,0.73013,25,0.73013,25.5,0.73013,26,0.73013,26.5,0.73013,27,0.73013,27.5,0.73013,28,0.73013,28.5,0.73013,29,0.73013,29.5,0.73013,30,0.73013)}
.func RTJ(Tj) {table(Tj,25,-0.0016322,35,-0.00038574,45,0.00094864,55,0.002371,65,0.0038813,75,0.0054795,85,0.0071657,95,0.0089398,105,0.010802,115,0.012752,125,0.01479,135,0.016916,145,0.01913,155,0.021432,165,0.023821,175,0.026299,275,0.051077,375,0.075854,475,0.10063,575,0.12541,675,0.15019,775,0.17496,875,0.19974,975,0.22452,1075,0.2493,1175,0.27407,1275,0.29885,1375,0.32363,1475,0.34841,1575,0.37318,1675,0.39796,1775,0.42274,1875,0.44752,1975,0.47229)}
.func VthFwd(Tj) {table(Tj,25,-0.65545,35,-0.57401,45,-0.49429,55,-0.41628,65,-0.33999,75,-0.26542,85,-0.19257,95,-0.12143,105,-0.052008,115,0.015695,125,0.081681,135,0.14595,145,0.2085,155,0.26934,165,0.32846,175,0.38586,275,0.95987,375,1.5339,475,2.1079,575,2.6819,675,3.2559,775,3.8299,875,4.4039,975,4.9779,1075,5.552,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.271,0.016,2.268,0.020,2.266,0.024,2.265,0.029,2.262,0.035,2.260,0.043,2.258,0.052,2.254,0.063,2.250,0.077,2.244,0.093,2.239,0.113,2.232,0.137,2.224,0.166,2.213,0.202,2.200,0.245,2.185,0.297,2.167,0.360,2.147,0.437,2.124,0.529,2.098,0.642,2.068,0.779,2.033,0.945,1.994,1.146,1.949,1.391,1.899,1.687,1.844,2.046,1.784,2.482,1.719,3.011,1.649,3.652,1.576,4.430,1.498,5.374,1.416,6.519,1.321,7.907,1.202,9.592,1.082,11.635,0.962,14.114,0.846,17.120,0.742,20.767,0.663,25.191,0.592,30.557,0.528,37.067,0.472,44.963,0.425,54.541,0.383,66.160,0.347,80.253,0.314,97.349,0.285,118.087,0.259,143.243,0.236,173.757,0.214,210.771,0.195,255.671,0.178,310.135,0.163,376.201,0.149,456.341,0.138,553.553,0.130,671.474,0.125,814.514,0.122,988.025,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.016,1.043,0.020,1.040,0.024,1.037,0.029,1.033,0.035,1.028,0.043,1.022,0.052,1.014,0.063,1.005,0.077,0.994,0.093,0.981,0.113,0.964,0.137,0.946,0.166,0.924,0.202,0.899,0.245,0.869,0.297,0.835,0.360,0.799,0.437,0.761,0.529,0.722,0.642,0.683,0.779,0.645,0.945,0.608,1.146,0.570,1.391,0.531,1.687,0.492,2.046,0.453,2.482,0.414,3.011,0.377,3.652,0.340,4.430,0.304,5.374,0.268,6.519,0.229,7.907,0.176,9.592,0.130,11.635,0.090,14.114,0.057,17.120,0.033,20.767,0.029,25.191,0.026,30.557,0.022,37.067,0.020,44.963,0.018,54.541,0.017,66.160,0.015,80.253,0.014,97.349,0.013,118.087,0.012,143.243,0.012,173.757,0.011,210.771,0.010,255.671,0.010,310.135,0.009,376.201,0.009,456.341,0.008,553.553,0.008,671.474,0.008,814.514,0.008,988.025,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.408,-8.349,4.368,-7.488,4.282,-6.627,4.031,-5.767,3.689,-4.906,3.358,-4.045,3.055,-3.184,2.823,-2.324,2.810,-1.463,2.998,-0.602,3.256,0.258,3.561,1.119,3.877,1.980,4.157,2.840,4.338,3.701,4.452,4.562,4.513,5.422,4.549,6.283,4.575,7.144,4.595,8.004,4.612,8.865,4.626,9.726,4.639,10.587,4.649,11.447,4.658,12.308,4.666,13.169,4.673,14.029,4.680,14.890,4.685)}


.param Is_ideal=1.004388e-06
.param n_ideal=2.392005e-01
.param Rs_ideal=3.507309e-02
.ENDS 31

.SUBCKT 32 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.9785e-06,1,8.1165e-05,1.5,0.00038434,2,0.00182,2.5,0.0086182,3,0.04081,3.5,0.13573,4,0.35531,4.5,0.77588,5,1.5042,5.5,2.6684,6,4.4189,6.5,6.9119,7,10.2733,7.5,14.6325,8,20.1841,8.5,27.0343,9,35.2991,9.5,45.014,10,56.5446,10.5,68.8711,11,82.464,11.5,95.8913,12,109.2593,12.5,122.8695,13,136.6889,13.5,149.5232,14,161.5379,14.5,172.5505,15,181.4785,15.5,188.9438,16,194.9511,16.5,200.6984,17,205.8148,17.5,211.1155,18,216.658,18.5,222.8372,19,229.3591,19.5,236.4051,20,243.309,20.5,250.0775,21,256.7168,21.5,263.2325,22,269.6303,22.5,275.915,23,282.0914,23.5,288.164,24,294.1369,24.5,300.0141,25,305.7992,25.5,311.4958,26,317.1071,26.5,322.6363,27,328.0862,27.5,333.4597,28,338.7595,28.5,343.9879,29,349.1475,29.5,354.2833,30,359.3312)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99751,5.5,0.97359,6,0.92721,6.5,0.85977,7,0.7765,7.5,0.68181,8,0.59392,8.5,0.51747,9,0.45264,9.5,0.39591,10,0.34406,10.5,0.3049,11,0.27221,11.5,0.24738,12,0.2278,12.5,0.21328,13,0.19897,13.5,0.18828,14,0.17916,14.5,0.17253,15,0.16987,15.5,0.16895,16,0.16895,16.5,0.16895,17,0.16895,17.5,0.16895,18,0.16895,18.5,0.16895,19,0.16895,19.5,0.16895,20,0.16895,20.5,0.16895,21,0.16895,21.5,0.16895,22,0.16895,22.5,0.16895,23,0.16895,23.5,0.16895,24,0.16895,24.5,0.16895,25,0.16895,25.5,0.16895,26,0.16895,26.5,0.16895,27,0.16895,27.5,0.16895,28,0.16895,28.5,0.16895,29,0.16895,29.5,0.16895,30,0.16895)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.5538e-05,3.5,0.00024216,4,0.00045738,4.5,0.00086912,5,0.0016065,5.5,0.0026652,6,0.004083,6.5,0.0059679,7,0.0088976,7.5,0.013142,8,0.018084,8.5,0.023537,9,0.03066,9.5,0.03798,10,0.044757,10.5,0.061559,11,0.077419,11.5,0.14512,12,0.25479,12.5,0.38231,13,0.50393,13.5,0.62706,14,0.69616,14.5,0.72185,15,0.72861,15.5,0.73013,16,0.73013,16.5,0.73013,17,0.73013,17.5,0.73013,18,0.73013,18.5,0.73013,19,0.73013,19.5,0.73013,20,0.73013,20.5,0.73013,21,0.73013,21.5,0.73013,22,0.73013,22.5,0.73013,23,0.73013,23.5,0.73013,24,0.73013,24.5,0.73013,25,0.73013,25.5,0.73013,26,0.73013,26.5,0.73013,27,0.73013,27.5,0.73013,28,0.73013,28.5,0.73013,29,0.73013,29.5,0.73013,30,0.73013)}
.func RTJ(Tj) {table(Tj,25,-0.0016322,35,-0.00038574,45,0.00094864,55,0.002371,65,0.0038813,75,0.0054795,85,0.0071657,95,0.0089398,105,0.010802,115,0.012752,125,0.01479,135,0.016916,145,0.01913,155,0.021432,165,0.023821,175,0.026299,275,0.051077,375,0.075854,475,0.10063,575,0.12541,675,0.15019,775,0.17496,875,0.19974,975,0.22452,1075,0.2493,1175,0.27407,1275,0.29885,1375,0.32363,1475,0.34841,1575,0.37318,1675,0.39796,1775,0.42274,1875,0.44752,1975,0.47229)}
.func VthFwd(Tj) {table(Tj,25,-0.65545,35,-0.57401,45,-0.49429,55,-0.41628,65,-0.33999,75,-0.26542,85,-0.19257,95,-0.12143,105,-0.052008,115,0.015695,125,0.081681,135,0.14595,145,0.2085,155,0.26934,165,0.32846,175,0.38586,275,0.95987,375,1.5339,475,2.1079,575,2.6819,675,3.2559,775,3.8299,875,4.4039,975,4.9779,1075,5.552,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.2392,-4,0.26775,-3,0.24764,-2,0.21942,-1,0.18616,0,0.15457,1,0.12968,2,0.14737,3,0.25893,4,0.2439,5,0.19231,6,0.16065,7,0.1452,8,0.13371,9,0.11858,10,0.10345,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.035073,-4,0.033157,-3,0.03534,-2,0.039978,-1,0.045884,0,0.049631,1,0.049478,2,0.045085,3,0.036432,4,0.036097,5,0.041108,6,0.047779,7,0.057631,8,0.069083,9,0.086853,10,0.10482,11,0.11672,12,0.12382,13,0.13558,14,0.13987,15,0.14621,16,0.16274,17,0.17902,18,0.20301)}
.func Is(Vgs) {table(Vgs,-5,1.0044e-06,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1.0175e-05,2,0.00030079,3,0.053716,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2203,35,1.0726,45,0.96121,55,0.8863,65,0.84781,75,0.84576,85,0.88013,95,0.95094,105,1.0582,115,1.2018,125,1.3819,135,1.5984,145,1.8514,155,2.1408,165,2.4666,175,2.8288,275,6.4512,375,10.0735,475,13.6959,575,17.3182,675,20.9406,775,24.5629,875,28.1853,975,31.8076,1075,35.43,1175,39.0523,1275,42.6747,1375,46.297,1475,49.9194,1575,53.5418,1675,57.1641,1775,60.7865,1875,64.4088,1975,68.0312)}
.func nscal(Tj) {table(Tj,25,1.0805,35,1.0492,45,1.0242,55,1.0056,65,0.99324,75,0.98726,85,0.98761,95,0.99429,105,1.0073,115,1.0266,125,1.0523,135,1.0843,145,1.1226,155,1.1673,165,1.2183,175,1.2756,275,1.8488,375,2.422,475,2.9953,575,3.5685,675,4.1417,775,4.7149,875,5.2881,975,5.8614,1075,6.4346,1175,7.0078,1275,7.581,1375,8.1542,1475,8.7274,1575,9.3007,1675,9.8739,1775,10.4471,1875,11.0203,1975,11.5935)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.271,0.016,2.268,0.020,2.266,0.024,2.265,0.029,2.262,0.035,2.260,0.043,2.258,0.052,2.254,0.063,2.250,0.077,2.244,0.093,2.239,0.113,2.232,0.137,2.224,0.166,2.213,0.202,2.200,0.245,2.185,0.297,2.167,0.360,2.147,0.437,2.124,0.529,2.098,0.642,2.068,0.779,2.033,0.945,1.994,1.146,1.949,1.391,1.899,1.687,1.844,2.046,1.784,2.482,1.719,3.011,1.649,3.652,1.576,4.430,1.498,5.374,1.416,6.519,1.321,7.907,1.202,9.592,1.082,11.635,0.962,14.114,0.846,17.120,0.742,20.767,0.663,25.191,0.592,30.557,0.528,37.067,0.472,44.963,0.425,54.541,0.383,66.160,0.347,80.253,0.314,97.349,0.285,118.087,0.259,143.243,0.236,173.757,0.214,210.771,0.195,255.671,0.178,310.135,0.163,376.201,0.149,456.341,0.138,553.553,0.130,671.474,0.125,814.514,0.122,988.025,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.016,1.043,0.020,1.040,0.024,1.037,0.029,1.033,0.035,1.028,0.043,1.022,0.052,1.014,0.063,1.005,0.077,0.994,0.093,0.981,0.113,0.964,0.137,0.946,0.166,0.924,0.202,0.899,0.245,0.869,0.297,0.835,0.360,0.799,0.437,0.761,0.529,0.722,0.642,0.683,0.779,0.645,0.945,0.608,1.146,0.570,1.391,0.531,1.687,0.492,2.046,0.453,2.482,0.414,3.011,0.377,3.652,0.340,4.430,0.304,5.374,0.268,6.519,0.229,7.907,0.176,9.592,0.130,11.635,0.090,14.114,0.057,17.120,0.033,20.767,0.029,25.191,0.026,30.557,0.022,37.067,0.020,44.963,0.018,54.541,0.017,66.160,0.015,80.253,0.014,97.349,0.013,118.087,0.012,143.243,0.012,173.757,0.011,210.771,0.010,255.671,0.010,310.135,0.009,376.201,0.009,456.341,0.008,553.553,0.008,671.474,0.008,814.514,0.008,988.025,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.408,-8.349,4.368,-7.488,4.282,-6.627,4.031,-5.767,3.689,-4.906,3.358,-4.045,3.055,-3.184,2.823,-2.324,2.810,-1.463,2.998,-0.602,3.256,0.258,3.561,1.119,3.877,1.980,4.157,2.840,4.338,3.701,4.452,4.562,4.513,5.422,4.549,6.283,4.575,7.144,4.595,8.004,4.612,8.865,4.626,9.726,4.639,10.587,4.649,11.447,4.658,12.308,4.666,13.169,4.673,14.029,4.680,14.890,4.685)}


.ENDS 32

.SUBCKT 33 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,5.9785e-06,1,8.1165e-05,1.5,0.00038434,2,0.00182,2.5,0.0086182,3,0.04081,3.5,0.13573,4,0.35531,4.5,0.77588,5,1.5042,5.5,2.6684,6,4.4189,6.5,6.9119,7,10.2733,7.5,14.6325,8,20.1841,8.5,27.0343,9,35.2991,9.5,45.014,10,56.5446,10.5,68.8711,11,82.464,11.5,95.8913,12,109.2593,12.5,122.8695,13,136.6889,13.5,149.5232,14,161.5379,14.5,172.5505,15,181.4785,15.5,188.9438,16,194.9511,16.5,200.6984,17,205.8148,17.5,211.1155,18,216.658,18.5,222.8372,19,229.3591,19.5,236.4051,20,243.309,20.5,250.0775,21,256.7168,21.5,263.2325,22,269.6303,22.5,275.915,23,282.0914,23.5,288.164,24,294.1369,24.5,300.0141,25,305.7992,25.5,311.4958,26,317.1071,26.5,322.6363,27,328.0862,27.5,333.4597,28,338.7595,28.5,343.9879,29,349.1475,29.5,354.2833,30,359.3312)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.99751,5.5,0.97359,6,0.92721,6.5,0.85977,7,0.7765,7.5,0.68181,8,0.59392,8.5,0.51747,9,0.45264,9.5,0.39591,10,0.34406,10.5,0.3049,11,0.27221,11.5,0.24738,12,0.2278,12.5,0.21328,13,0.19897,13.5,0.18828,14,0.17916,14.5,0.17253,15,0.16987,15.5,0.16895,16,0.16895,16.5,0.16895,17,0.16895,17.5,0.16895,18,0.16895,18.5,0.16895,19,0.16895,19.5,0.16895,20,0.16895,20.5,0.16895,21,0.16895,21.5,0.16895,22,0.16895,22.5,0.16895,23,0.16895,23.5,0.16895,24,0.16895,24.5,0.16895,25,0.16895,25.5,0.16895,26,0.16895,26.5,0.16895,27,0.16895,27.5,0.16895,28,0.16895,28.5,0.16895,29,0.16895,29.5,0.16895,30,0.16895)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,8.5538e-05,3.5,0.00024216,4,0.00045738,4.5,0.00086912,5,0.0016065,5.5,0.0026652,6,0.004083,6.5,0.0059679,7,0.0088976,7.5,0.013142,8,0.018084,8.5,0.023537,9,0.03066,9.5,0.03798,10,0.044757,10.5,0.061559,11,0.077419,11.5,0.14512,12,0.25479,12.5,0.38231,13,0.50393,13.5,0.62706,14,0.69616,14.5,0.72185,15,0.72861,15.5,0.73013,16,0.73013,16.5,0.73013,17,0.73013,17.5,0.73013,18,0.73013,18.5,0.73013,19,0.73013,19.5,0.73013,20,0.73013,20.5,0.73013,21,0.73013,21.5,0.73013,22,0.73013,22.5,0.73013,23,0.73013,23.5,0.73013,24,0.73013,24.5,0.73013,25,0.73013,25.5,0.73013,26,0.73013,26.5,0.73013,27,0.73013,27.5,0.73013,28,0.73013,28.5,0.73013,29,0.73013,29.5,0.73013,30,0.73013)}
.func RTJ(Tj) {table(Tj,25,-0.0016322,35,-0.00038574,45,0.00094864,55,0.002371,65,0.0038813,75,0.0054795,85,0.0071657,95,0.0089398,105,0.010802,115,0.012752,125,0.01479,135,0.016916,145,0.01913,155,0.021432,165,0.023821,175,0.026299,275,0.051077,375,0.075854,475,0.10063,575,0.12541,675,0.15019,775,0.17496,875,0.19974,975,0.22452,1075,0.2493,1175,0.27407,1275,0.29885,1375,0.32363,1475,0.34841,1575,0.37318,1675,0.39796,1775,0.42274,1875,0.44752,1975,0.47229)}
.func VthFwd(Tj) {table(Tj,25,-0.65545,35,-0.57401,45,-0.49429,55,-0.41628,65,-0.33999,75,-0.26542,85,-0.19257,95,-0.12143,105,-0.052008,115,0.015695,125,0.081681,135,0.14595,145,0.2085,155,0.26934,165,0.32846,175,0.38586,275,0.95987,375,1.5339,475,2.1079,575,2.6819,675,3.2559,775,3.8299,875,4.4039,975,4.9779,1075,5.552,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.2392,-4,0.26775,-3,0.24764,-2,0.21942,-1,0.18616,0,0.15457,1,0.12968,2,0.14737,3,0.25893,4,0.2439,5,0.19231,6,0.16065,7,0.1452,8,0.13371,9,0.11858,10,0.10345,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.035073,-4,0.033157,-3,0.03534,-2,0.039978,-1,0.045884,0,0.049631,1,0.049478,2,0.045085,3,0.036432,4,0.036097,5,0.041108,6,0.047779,7,0.057631,8,0.069083,9,0.086853,10,0.10482,11,0.11672,12,0.12382,13,0.13558,14,0.13987,15,0.14621,16,0.16274,17,0.17902,18,0.20301)}
.func Is(Vgs) {table(Vgs,-5,1.0044e-06,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1.0175e-05,2,0.00030079,3,0.053716,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2203,35,1.0726,45,0.96121,55,0.8863,65,0.84781,75,0.84576,85,0.88013,95,0.95094,105,1.0582,115,1.2018,125,1.3819,135,1.5984,145,1.8514,155,2.1408,165,2.4666,175,2.8288,275,6.4512,375,10.0735,475,13.6959,575,17.3182,675,20.9406,775,24.5629,875,28.1853,975,31.8076,1075,35.43,1175,39.0523,1275,42.6747,1375,46.297,1475,49.9194,1575,53.5418,1675,57.1641,1775,60.7865,1875,64.4088,1975,68.0312)}
.func nscal(Tj) {table(Tj,25,1.0805,35,1.0492,45,1.0242,55,1.0056,65,0.99324,75,0.98726,85,0.98761,95,0.99429,105,1.0073,115,1.0266,125,1.0523,135,1.0843,145,1.1226,155,1.1673,165,1.2183,175,1.2756,275,1.8488,375,2.422,475,2.9953,575,3.5685,675,4.1417,775,4.7149,875,5.2881,975,5.8614,1075,6.4346,1175,7.0078,1275,7.581,1375,8.1542,1475,8.7274,1575,9.3007,1675,9.8739,1775,10.4471,1875,11.0203,1975,11.5935)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.271,0.016,2.268,0.020,2.266,0.024,2.265,0.029,2.262,0.035,2.260,0.043,2.258,0.052,2.254,0.063,2.250,0.077,2.244,0.093,2.239,0.113,2.232,0.137,2.224,0.166,2.213,0.202,2.200,0.245,2.185,0.297,2.167,0.360,2.147,0.437,2.124,0.529,2.098,0.642,2.068,0.779,2.033,0.945,1.994,1.146,1.949,1.391,1.899,1.687,1.844,2.046,1.784,2.482,1.719,3.011,1.649,3.652,1.576,4.430,1.498,5.374,1.416,6.519,1.321,7.907,1.202,9.592,1.082,11.635,0.962,14.114,0.846,17.120,0.742,20.767,0.663,25.191,0.592,30.557,0.528,37.067,0.472,44.963,0.425,54.541,0.383,66.160,0.347,80.253,0.314,97.349,0.285,118.087,0.259,143.243,0.236,173.757,0.214,210.771,0.195,255.671,0.178,310.135,0.163,376.201,0.149,456.341,0.138,553.553,0.130,671.474,0.125,814.514,0.122,988.025,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.016,1.043,0.020,1.040,0.024,1.037,0.029,1.033,0.035,1.028,0.043,1.022,0.052,1.014,0.063,1.005,0.077,0.994,0.093,0.981,0.113,0.964,0.137,0.946,0.166,0.924,0.202,0.899,0.245,0.869,0.297,0.835,0.360,0.799,0.437,0.761,0.529,0.722,0.642,0.683,0.779,0.645,0.945,0.608,1.146,0.570,1.391,0.531,1.687,0.492,2.046,0.453,2.482,0.414,3.011,0.377,3.652,0.340,4.430,0.304,5.374,0.268,6.519,0.229,7.907,0.176,9.592,0.130,11.635,0.090,14.114,0.057,17.120,0.033,20.767,0.029,25.191,0.026,30.557,0.022,37.067,0.020,44.963,0.018,54.541,0.017,66.160,0.015,80.253,0.014,97.349,0.013,118.087,0.012,143.243,0.012,173.757,0.011,210.771,0.010,255.671,0.010,310.135,0.009,376.201,0.009,456.341,0.008,553.553,0.008,671.474,0.008,814.514,0.008,988.025,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.408,-8.349,4.368,-7.488,4.282,-6.627,4.031,-5.767,3.689,-4.906,3.358,-4.045,3.055,-3.184,2.823,-2.324,2.810,-1.463,2.998,-0.602,3.256,0.258,3.561,1.119,3.877,1.980,4.157,2.840,4.338,3.701,4.452,4.562,4.513,5.422,4.549,6.283,4.575,7.144,4.595,8.004,4.612,8.865,4.626,9.726,4.639,10.587,4.649,11.447,4.658,12.308,4.666,13.169,4.673,14.029,4.680,14.890,4.685)}


.ENDS 33

.SUBCKT 41 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,6.3238e-06,1,9.1422e-05,1.5,0.00044691,2,0.0021847,2.5,0.01068,3,0.053493,3.5,0.18591,4,0.50095,4.5,1.1292,5,2.2294,5.5,4.029,6,6.7698,6.5,10.6618,7,15.9645,7.5,22.8969,8,31.5814,8.5,42.314,9,54.8558,9.5,69.0827,10,85.2136,10.5,103.6687,11,123.5931,11.5,145.8745,12,169.1801,12.5,192.5075,13,213.4552,13.5,232.3223,14,248.0041,14.5,261.0868,15,272.0019,15.5,282.1943,16,291.3761,16.5,299.7153,17,307.4516,17.5,315.5356,18,324.0896,18.5,333.33,19,343.2087,19.5,353.9341,20,364.4952,20.5,374.8998,21,385.1554,21.5,395.2687,22,405.2461,22.5,415.0937,23,424.817,23.5,434.4213,24,443.9116,24.5,453.2925,25,462.5684,25.5,471.7435,26,480.8216,26.5,489.8065,27,498.7017,27.5,507.5104,28,516.2359,28.5,524.881,29,533.4488,29.5,541.9898,30,550.4322)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.98369,5.5,0.94641,6,0.88598,6.5,0.81058,7,0.71927,7.5,0.63161,8,0.55439,8.5,0.48861,9,0.43282,9.5,0.38753,10,0.34882,10.5,0.31346,11,0.28518,11.5,0.25698,12,0.2318,12.5,0.21131,13,0.19802,13.5,0.18932,14,0.18554,14.5,0.18417,15,0.18417,15.5,0.18417,16,0.18417,16.5,0.18417,17,0.18417,17.5,0.18417,18,0.18417,18.5,0.18417,19,0.18417,19.5,0.18417,20,0.18417,20.5,0.18417,21,0.18417,21.5,0.18417,22,0.18417,22.5,0.18417,23,0.18417,23.5,0.18417,24,0.18417,24.5,0.18417,25,0.18417,25.5,0.18417,26,0.18417,26.5,0.18417,27,0.18417,27.5,0.18417,28,0.18417,28.5,0.18417,29,0.18417,29.5,0.18417,30,0.18417)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9102e-05,3,0.00015936,3.5,0.0003471,4,0.00074157,4.5,0.0015175,5,0.00275,5.5,0.0046456,6,0.0070895,6.5,0.01089,7,0.017251,7.5,0.025917,8,0.03846,8.5,0.05217,9,0.073353,9.5,0.10648,10,0.14773,10.5,0.18686,11,0.24671,11.5,0.29777,12,0.33608,12.5,0.36345,13,0.3884,13.5,0.3908,14,0.39296,14.5,0.39297,15,0.39297,15.5,0.39297,16,0.39297,16.5,0.39297,17,0.39297,17.5,0.39297,18,0.39297,18.5,0.39297,19,0.39297,19.5,0.39297,20,0.39297,20.5,0.39297,21,0.39297,21.5,0.39297,22,0.39297,22.5,0.39297,23,0.39297,23.5,0.39297,24,0.39297,24.5,0.39297,25,0.39297,25.5,0.39297,26,0.39297,26.5,0.39297,27,0.39297,27.5,0.39297,28,0.39297,28.5,0.39297,29,0.39297,29.5,0.39297,30,0.39297)}
.func RTJ(Tj) {table(Tj,25,-0.00012956,35,0.00050247,45,0.0012205,55,0.0020247,65,0.0029149,75,0.0038911,85,0.0049534,95,0.0061017,105,0.0073361,115,0.0086565,125,0.010063,135,0.011556,145,0.013134,155,0.014799,165,0.01655,175,0.018386,275,0.036754,375,0.055121,475,0.073489,575,0.091856,675,0.11022,775,0.12859,875,0.14696,975,0.16533,1075,0.18369,1175,0.20206,1275,0.22043,1375,0.2388,1475,0.25716,1575,0.27553,1675,0.2939,1775,0.31227,1875,0.33063,1975,0.349)}
.func VthFwd(Tj) {table(Tj,25,-0.57184,35,-0.5018,45,-0.43312,55,-0.36581,65,-0.29986,75,-0.23529,85,-0.17208,95,-0.11024,105,-0.049765,115,0.0093406,125,0.067078,135,0.12345,145,0.17845,155,0.23209,165,0.28435,175,0.33525,275,0.84425,375,1.3532,475,1.8622,575,2.3712,675,2.8802,775,3.3892,875,3.8982,975,4.4072,1075,4.9162,1175,5.4252,1275,5.9342,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.093,0.017,3.093,0.021,3.092,0.025,3.089,0.030,3.088,0.037,3.085,0.044,3.079,0.054,3.075,0.065,3.071,0.079,3.063,0.096,3.056,0.116,3.047,0.141,3.035,0.171,3.022,0.207,3.006,0.251,2.986,0.305,2.964,0.369,2.939,0.448,2.909,0.543,2.875,0.658,2.835,0.798,2.788,0.967,2.735,1.172,2.675,1.421,2.607,1.723,2.533,2.088,2.451,2.531,2.362,3.069,2.267,3.720,2.166,4.510,2.057,5.467,1.940,6.628,1.813,8.035,1.652,9.741,1.486,11.808,1.323,14.315,1.167,17.354,1.019,21.038,0.909,25.504,0.812,30.917,0.725,37.480,0.648,45.437,0.584,55.082,0.527,66.774,0.478,80.949,0.433,98.132,0.393,118.964,0.357,144.217,0.325,174.831,0.296,211.943,0.269,256.934,0.245,311.475,0.223,377.594,0.204,457.749,0.190,554.919,0.179,672.715,0.172,815.517,0.168,988.632,0.167,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.017,1.564,0.021,1.559,0.025,1.555,0.030,1.548,0.037,1.540,0.044,1.531,0.054,1.519,0.065,1.505,0.079,1.489,0.096,1.470,0.116,1.446,0.141,1.418,0.171,1.385,0.207,1.348,0.251,1.305,0.305,1.258,0.369,1.208,0.448,1.155,0.543,1.102,0.658,1.048,0.798,0.995,0.967,0.942,1.172,0.887,1.421,0.830,1.723,0.772,2.088,0.713,2.531,0.655,3.069,0.598,3.720,0.542,4.510,0.488,5.467,0.434,6.628,0.379,8.035,0.299,9.741,0.225,11.808,0.161,14.315,0.106,17.354,0.061,21.038,0.050,25.504,0.043,30.917,0.038,37.480,0.033,45.437,0.030,55.082,0.027,66.774,0.025,80.949,0.023,98.132,0.021,118.964,0.020,144.217,0.019,174.831,0.017,211.943,0.016,256.934,0.015,311.475,0.014,377.594,0.013,457.749,0.013,554.919,0.012,672.715,0.012,815.517,0.012,988.632,0.012,1198.496,0.013)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.836,-8.407,6.783,-7.545,6.689,-6.683,6.366,-5.821,5.854,-4.960,5.345,-4.098,4.873,-3.236,4.480,-2.374,4.391,-1.513,4.661,-0.651,5.050,0.211,5.499,1.072,5.967,1.934,6.384,2.796,6.644,3.658,6.801,4.519,6.884,5.381,6.928,6.243,6.955,7.104,6.974,7.966,6.990,8.828,7.003,9.690,7.015,10.551,7.025,11.413,7.035,12.275,7.044,13.137,7.052,13.998,7.060,14.860,7.067)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.668319e-01
.param Rs_ideal=2.750863e-02
.ENDS 41

.SUBCKT 42 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,6.3238e-06,1,9.1422e-05,1.5,0.00044691,2,0.0021847,2.5,0.01068,3,0.053493,3.5,0.18591,4,0.50095,4.5,1.1292,5,2.2294,5.5,4.029,6,6.7698,6.5,10.6618,7,15.9645,7.5,22.8969,8,31.5814,8.5,42.314,9,54.8558,9.5,69.0827,10,85.2136,10.5,103.6687,11,123.5931,11.5,145.8745,12,169.1801,12.5,192.5075,13,213.4552,13.5,232.3223,14,248.0041,14.5,261.0868,15,272.0019,15.5,282.1943,16,291.3761,16.5,299.7153,17,307.4516,17.5,315.5356,18,324.0896,18.5,333.33,19,343.2087,19.5,353.9341,20,364.4952,20.5,374.8998,21,385.1554,21.5,395.2687,22,405.2461,22.5,415.0937,23,424.817,23.5,434.4213,24,443.9116,24.5,453.2925,25,462.5684,25.5,471.7435,26,480.8216,26.5,489.8065,27,498.7017,27.5,507.5104,28,516.2359,28.5,524.881,29,533.4488,29.5,541.9898,30,550.4322)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.98369,5.5,0.94641,6,0.88598,6.5,0.81058,7,0.71927,7.5,0.63161,8,0.55439,8.5,0.48861,9,0.43282,9.5,0.38753,10,0.34882,10.5,0.31346,11,0.28518,11.5,0.25698,12,0.2318,12.5,0.21131,13,0.19802,13.5,0.18932,14,0.18554,14.5,0.18417,15,0.18417,15.5,0.18417,16,0.18417,16.5,0.18417,17,0.18417,17.5,0.18417,18,0.18417,18.5,0.18417,19,0.18417,19.5,0.18417,20,0.18417,20.5,0.18417,21,0.18417,21.5,0.18417,22,0.18417,22.5,0.18417,23,0.18417,23.5,0.18417,24,0.18417,24.5,0.18417,25,0.18417,25.5,0.18417,26,0.18417,26.5,0.18417,27,0.18417,27.5,0.18417,28,0.18417,28.5,0.18417,29,0.18417,29.5,0.18417,30,0.18417)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9102e-05,3,0.00015936,3.5,0.0003471,4,0.00074157,4.5,0.0015175,5,0.00275,5.5,0.0046456,6,0.0070895,6.5,0.01089,7,0.017251,7.5,0.025917,8,0.03846,8.5,0.05217,9,0.073353,9.5,0.10648,10,0.14773,10.5,0.18686,11,0.24671,11.5,0.29777,12,0.33608,12.5,0.36345,13,0.3884,13.5,0.3908,14,0.39296,14.5,0.39297,15,0.39297,15.5,0.39297,16,0.39297,16.5,0.39297,17,0.39297,17.5,0.39297,18,0.39297,18.5,0.39297,19,0.39297,19.5,0.39297,20,0.39297,20.5,0.39297,21,0.39297,21.5,0.39297,22,0.39297,22.5,0.39297,23,0.39297,23.5,0.39297,24,0.39297,24.5,0.39297,25,0.39297,25.5,0.39297,26,0.39297,26.5,0.39297,27,0.39297,27.5,0.39297,28,0.39297,28.5,0.39297,29,0.39297,29.5,0.39297,30,0.39297)}
.func RTJ(Tj) {table(Tj,25,-0.00012956,35,0.00050247,45,0.0012205,55,0.0020247,65,0.0029149,75,0.0038911,85,0.0049534,95,0.0061017,105,0.0073361,115,0.0086565,125,0.010063,135,0.011556,145,0.013134,155,0.014799,165,0.01655,175,0.018386,275,0.036754,375,0.055121,475,0.073489,575,0.091856,675,0.11022,775,0.12859,875,0.14696,975,0.16533,1075,0.18369,1175,0.20206,1275,0.22043,1375,0.2388,1475,0.25716,1575,0.27553,1675,0.2939,1775,0.31227,1875,0.33063,1975,0.349)}
.func VthFwd(Tj) {table(Tj,25,-0.57184,35,-0.5018,45,-0.43312,55,-0.36581,65,-0.29986,75,-0.23529,85,-0.17208,95,-0.11024,105,-0.049765,115,0.0093406,125,0.067078,135,0.12345,145,0.17845,155,0.23209,165,0.28435,175,0.33525,275,0.84425,375,1.3532,475,1.8622,575,2.3712,675,2.8802,775,3.3892,875,3.8982,975,4.4072,1075,4.9162,1175,5.4252,1275,5.9342,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.26683,-4,0.25329,-3,0.23201,-2,0.20187,-1,0.16926,0,0.14269,1,0.12372,2,0.24071,3,0.27244,4,0.20308,5,0.15037,6,0.11862,7,0.10031,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.12028,18,0.16335)}
.func Rs(Vgs) {table(Vgs,-5,0.027509,-4,0.027126,-3,0.029009,-2,0.033275,-1,0.03729,0,0.037475,1,0.034103,2,0.024693,3,0.023938,4,0.028837,5,0.03362,6,0.039502,7,0.048133,8,0.055581,9,0.06624,10,0.080712,11,0.099054,12,0.11041,13,0.11052,14,0.12772,15,0.16741,16,0.20863,17,0.25826,18,0.28527)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,0.016519,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2318,35,1.0859,45,0.97547,55,0.90037,65,0.86063,75,0.85625,85,0.88723,95,0.95357,105,1.0553,115,1.1923,125,1.3648,135,1.5725,145,1.8157,155,2.0942,165,2.408,175,2.7573,275,6.2495,375,9.7418,475,13.234,575,16.7262,675,20.2185,775,23.7107,875,27.203,975,30.6952,1075,34.1874,1175,37.6797,1275,41.1719,1375,44.6642,1475,48.1564,1575,51.6486,1675,55.1409,1775,58.6331,1875,62.1254,1975,65.6176)}
.func nscal(Tj) {table(Tj,25,1.0629,35,1.0384,45,1.0188,55,1.0042,65,0.9946,75,0.98993,85,0.99024,95,0.9955,105,1.0057,115,1.0209,125,1.0411,135,1.0662,145,1.0963,155,1.1314,165,1.1714,175,1.2164,275,1.6663,375,2.1162,475,2.5661,575,3.0159,675,3.4658,775,3.9157,875,4.3656,975,4.8155,1075,5.2654,1175,5.7153,1275,6.1652,1375,6.6151,1475,7.0649,1575,7.5148,1675,7.9647,1775,8.4146,1875,8.8645,1975,9.3144)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.093,0.017,3.093,0.021,3.092,0.025,3.089,0.030,3.088,0.037,3.085,0.044,3.079,0.054,3.075,0.065,3.071,0.079,3.063,0.096,3.056,0.116,3.047,0.141,3.035,0.171,3.022,0.207,3.006,0.251,2.986,0.305,2.964,0.369,2.939,0.448,2.909,0.543,2.875,0.658,2.835,0.798,2.788,0.967,2.735,1.172,2.675,1.421,2.607,1.723,2.533,2.088,2.451,2.531,2.362,3.069,2.267,3.720,2.166,4.510,2.057,5.467,1.940,6.628,1.813,8.035,1.652,9.741,1.486,11.808,1.323,14.315,1.167,17.354,1.019,21.038,0.909,25.504,0.812,30.917,0.725,37.480,0.648,45.437,0.584,55.082,0.527,66.774,0.478,80.949,0.433,98.132,0.393,118.964,0.357,144.217,0.325,174.831,0.296,211.943,0.269,256.934,0.245,311.475,0.223,377.594,0.204,457.749,0.190,554.919,0.179,672.715,0.172,815.517,0.168,988.632,0.167,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.017,1.564,0.021,1.559,0.025,1.555,0.030,1.548,0.037,1.540,0.044,1.531,0.054,1.519,0.065,1.505,0.079,1.489,0.096,1.470,0.116,1.446,0.141,1.418,0.171,1.385,0.207,1.348,0.251,1.305,0.305,1.258,0.369,1.208,0.448,1.155,0.543,1.102,0.658,1.048,0.798,0.995,0.967,0.942,1.172,0.887,1.421,0.830,1.723,0.772,2.088,0.713,2.531,0.655,3.069,0.598,3.720,0.542,4.510,0.488,5.467,0.434,6.628,0.379,8.035,0.299,9.741,0.225,11.808,0.161,14.315,0.106,17.354,0.061,21.038,0.050,25.504,0.043,30.917,0.038,37.480,0.033,45.437,0.030,55.082,0.027,66.774,0.025,80.949,0.023,98.132,0.021,118.964,0.020,144.217,0.019,174.831,0.017,211.943,0.016,256.934,0.015,311.475,0.014,377.594,0.013,457.749,0.013,554.919,0.012,672.715,0.012,815.517,0.012,988.632,0.012,1198.496,0.013)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.836,-8.407,6.783,-7.545,6.689,-6.683,6.366,-5.821,5.854,-4.960,5.345,-4.098,4.873,-3.236,4.480,-2.374,4.391,-1.513,4.661,-0.651,5.050,0.211,5.499,1.072,5.967,1.934,6.384,2.796,6.644,3.658,6.801,4.519,6.884,5.381,6.928,6.243,6.955,7.104,6.974,7.966,6.990,8.828,7.003,9.690,7.015,10.551,7.025,11.413,7.035,12.275,7.044,13.137,7.052,13.998,7.060,14.860,7.067)}


.ENDS 42

.SUBCKT 43 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,6.3238e-06,1,9.1422e-05,1.5,0.00044691,2,0.0021847,2.5,0.01068,3,0.053493,3.5,0.18591,4,0.50095,4.5,1.1292,5,2.2294,5.5,4.029,6,6.7698,6.5,10.6618,7,15.9645,7.5,22.8969,8,31.5814,8.5,42.314,9,54.8558,9.5,69.0827,10,85.2136,10.5,103.6687,11,123.5931,11.5,145.8745,12,169.1801,12.5,192.5075,13,213.4552,13.5,232.3223,14,248.0041,14.5,261.0868,15,272.0019,15.5,282.1943,16,291.3761,16.5,299.7153,17,307.4516,17.5,315.5356,18,324.0896,18.5,333.33,19,343.2087,19.5,353.9341,20,364.4952,20.5,374.8998,21,385.1554,21.5,395.2687,22,405.2461,22.5,415.0937,23,424.817,23.5,434.4213,24,443.9116,24.5,453.2925,25,462.5684,25.5,471.7435,26,480.8216,26.5,489.8065,27,498.7017,27.5,507.5104,28,516.2359,28.5,524.881,29,533.4488,29.5,541.9898,30,550.4322)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.98369,5.5,0.94641,6,0.88598,6.5,0.81058,7,0.71927,7.5,0.63161,8,0.55439,8.5,0.48861,9,0.43282,9.5,0.38753,10,0.34882,10.5,0.31346,11,0.28518,11.5,0.25698,12,0.2318,12.5,0.21131,13,0.19802,13.5,0.18932,14,0.18554,14.5,0.18417,15,0.18417,15.5,0.18417,16,0.18417,16.5,0.18417,17,0.18417,17.5,0.18417,18,0.18417,18.5,0.18417,19,0.18417,19.5,0.18417,20,0.18417,20.5,0.18417,21,0.18417,21.5,0.18417,22,0.18417,22.5,0.18417,23,0.18417,23.5,0.18417,24,0.18417,24.5,0.18417,25,0.18417,25.5,0.18417,26,0.18417,26.5,0.18417,27,0.18417,27.5,0.18417,28,0.18417,28.5,0.18417,29,0.18417,29.5,0.18417,30,0.18417)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,7.9102e-05,3,0.00015936,3.5,0.0003471,4,0.00074157,4.5,0.0015175,5,0.00275,5.5,0.0046456,6,0.0070895,6.5,0.01089,7,0.017251,7.5,0.025917,8,0.03846,8.5,0.05217,9,0.073353,9.5,0.10648,10,0.14773,10.5,0.18686,11,0.24671,11.5,0.29777,12,0.33608,12.5,0.36345,13,0.3884,13.5,0.3908,14,0.39296,14.5,0.39297,15,0.39297,15.5,0.39297,16,0.39297,16.5,0.39297,17,0.39297,17.5,0.39297,18,0.39297,18.5,0.39297,19,0.39297,19.5,0.39297,20,0.39297,20.5,0.39297,21,0.39297,21.5,0.39297,22,0.39297,22.5,0.39297,23,0.39297,23.5,0.39297,24,0.39297,24.5,0.39297,25,0.39297,25.5,0.39297,26,0.39297,26.5,0.39297,27,0.39297,27.5,0.39297,28,0.39297,28.5,0.39297,29,0.39297,29.5,0.39297,30,0.39297)}
.func RTJ(Tj) {table(Tj,25,-0.00012956,35,0.00050247,45,0.0012205,55,0.0020247,65,0.0029149,75,0.0038911,85,0.0049534,95,0.0061017,105,0.0073361,115,0.0086565,125,0.010063,135,0.011556,145,0.013134,155,0.014799,165,0.01655,175,0.018386,275,0.036754,375,0.055121,475,0.073489,575,0.091856,675,0.11022,775,0.12859,875,0.14696,975,0.16533,1075,0.18369,1175,0.20206,1275,0.22043,1375,0.2388,1475,0.25716,1575,0.27553,1675,0.2939,1775,0.31227,1875,0.33063,1975,0.349)}
.func VthFwd(Tj) {table(Tj,25,-0.57184,35,-0.5018,45,-0.43312,55,-0.36581,65,-0.29986,75,-0.23529,85,-0.17208,95,-0.11024,105,-0.049765,115,0.0093406,125,0.067078,135,0.12345,145,0.17845,155,0.23209,165,0.28435,175,0.33525,275,0.84425,375,1.3532,475,1.8622,575,2.3712,675,2.8802,775,3.3892,875,3.8982,975,4.4072,1075,4.9162,1175,5.4252,1275,5.9342,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.26683,-4,0.25329,-3,0.23201,-2,0.20187,-1,0.16926,0,0.14269,1,0.12372,2,0.24071,3,0.27244,4,0.20308,5,0.15037,6,0.11862,7,0.10031,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.12028,18,0.16335)}
.func Rs(Vgs) {table(Vgs,-5,0.027509,-4,0.027126,-3,0.029009,-2,0.033275,-1,0.03729,0,0.037475,1,0.034103,2,0.024693,3,0.023938,4,0.028837,5,0.03362,6,0.039502,7,0.048133,8,0.055581,9,0.06624,10,0.080712,11,0.099054,12,0.11041,13,0.11052,14,0.12772,15,0.16741,16,0.20863,17,0.25826,18,0.28527)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,1e-05,2,0.016519,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2318,35,1.0859,45,0.97547,55,0.90037,65,0.86063,75,0.85625,85,0.88723,95,0.95357,105,1.0553,115,1.1923,125,1.3648,135,1.5725,145,1.8157,155,2.0942,165,2.408,175,2.7573,275,6.2495,375,9.7418,475,13.234,575,16.7262,675,20.2185,775,23.7107,875,27.203,975,30.6952,1075,34.1874,1175,37.6797,1275,41.1719,1375,44.6642,1475,48.1564,1575,51.6486,1675,55.1409,1775,58.6331,1875,62.1254,1975,65.6176)}
.func nscal(Tj) {table(Tj,25,1.0629,35,1.0384,45,1.0188,55,1.0042,65,0.9946,75,0.98993,85,0.99024,95,0.9955,105,1.0057,115,1.0209,125,1.0411,135,1.0662,145,1.0963,155,1.1314,165,1.1714,175,1.2164,275,1.6663,375,2.1162,475,2.5661,575,3.0159,675,3.4658,775,3.9157,875,4.3656,975,4.8155,1075,5.2654,1175,5.7153,1275,6.1652,1375,6.6151,1475,7.0649,1575,7.5148,1675,7.9647,1775,8.4146,1875,8.8645,1975,9.3144)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.093,0.017,3.093,0.021,3.092,0.025,3.089,0.030,3.088,0.037,3.085,0.044,3.079,0.054,3.075,0.065,3.071,0.079,3.063,0.096,3.056,0.116,3.047,0.141,3.035,0.171,3.022,0.207,3.006,0.251,2.986,0.305,2.964,0.369,2.939,0.448,2.909,0.543,2.875,0.658,2.835,0.798,2.788,0.967,2.735,1.172,2.675,1.421,2.607,1.723,2.533,2.088,2.451,2.531,2.362,3.069,2.267,3.720,2.166,4.510,2.057,5.467,1.940,6.628,1.813,8.035,1.652,9.741,1.486,11.808,1.323,14.315,1.167,17.354,1.019,21.038,0.909,25.504,0.812,30.917,0.725,37.480,0.648,45.437,0.584,55.082,0.527,66.774,0.478,80.949,0.433,98.132,0.393,118.964,0.357,144.217,0.325,174.831,0.296,211.943,0.269,256.934,0.245,311.475,0.223,377.594,0.204,457.749,0.190,554.919,0.179,672.715,0.172,815.517,0.168,988.632,0.167,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.017,1.564,0.021,1.559,0.025,1.555,0.030,1.548,0.037,1.540,0.044,1.531,0.054,1.519,0.065,1.505,0.079,1.489,0.096,1.470,0.116,1.446,0.141,1.418,0.171,1.385,0.207,1.348,0.251,1.305,0.305,1.258,0.369,1.208,0.448,1.155,0.543,1.102,0.658,1.048,0.798,0.995,0.967,0.942,1.172,0.887,1.421,0.830,1.723,0.772,2.088,0.713,2.531,0.655,3.069,0.598,3.720,0.542,4.510,0.488,5.467,0.434,6.628,0.379,8.035,0.299,9.741,0.225,11.808,0.161,14.315,0.106,17.354,0.061,21.038,0.050,25.504,0.043,30.917,0.038,37.480,0.033,45.437,0.030,55.082,0.027,66.774,0.025,80.949,0.023,98.132,0.021,118.964,0.020,144.217,0.019,174.831,0.017,211.943,0.016,256.934,0.015,311.475,0.014,377.594,0.013,457.749,0.013,554.919,0.012,672.715,0.012,815.517,0.012,988.632,0.012,1198.496,0.013)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.836,-8.407,6.783,-7.545,6.689,-6.683,6.366,-5.821,5.854,-4.960,5.345,-4.098,4.873,-3.236,4.480,-2.374,4.391,-1.513,4.661,-0.651,5.050,0.211,5.499,1.072,5.967,1.934,6.384,2.796,6.644,3.658,6.801,4.519,6.884,5.381,6.928,6.243,6.955,7.104,6.974,7.966,6.990,8.828,7.003,9.690,7.015,10.551,7.025,11.413,7.035,12.275,7.044,13.137,7.052,13.998,7.060,14.860,7.067)}


.ENDS 43

.SUBCKT 51 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.094e-05,1,0.00028913,1.5,0.0019157,2,0.012693,2.5,0.079887,3,0.29161,3.5,0.80161,4,1.837,4.5,3.7222,5,6.8095,5.5,11.4731,6,18.0607,6.5,27.0266,7,38.7762,7.5,53.4981,8,71.4135,8.5,92.8363,9,118.4122,9.5,146.4866,10,176.7003,10.5,208.8768,11,239.1254,11.5,270.0233,12,297.8479,12.5,323.6995,13,346.4147,13.5,367.4436,14,383.0521,14.5,397.722,15,409.6484,15.5,419.2933,16,428.2853,16.5,436.3608,17,443.4082,17.5,450.78,18,458.5868,18.5,466.7465,19,475.2784,19.5,484.3826,20,493.1176,20.5,501.5061,21,509.569,21.5,517.3256,22,524.7934,22.5,531.9889,23,538.9271,23.5,545.622,24,552.0865,24.5,558.3327,25,564.3718,25.5,570.2143,26,575.8698,26.5,581.3474,27,586.6557,27.5,591.8026,28,596.7956,28.5,601.6416,29,606.3473,29.5,611.0042,30,615.4845)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.99259,4.5,0.94489,5,0.87638,5.5,0.79059,6,0.69012,6.5,0.58272,7,0.50294,7.5,0.43419,8,0.37431,8.5,0.32187,9,0.27606,9.5,0.24001,10,0.21061,10.5,0.18631,11,0.16773,11.5,0.15391,12,0.14301,12.5,0.13458,13,0.12892,13.5,0.12479,14,0.1236,14.5,0.12242,15,0.12188,15.5,0.12188,16,0.12188,16.5,0.12188,17,0.12188,17.5,0.12188,18,0.12188,18.5,0.12188,19,0.12188,19.5,0.12188,20,0.12188,20.5,0.12188,21,0.12188,21.5,0.12188,22,0.12188,22.5,0.12188,23,0.12188,23.5,0.12188,24,0.12188,24.5,0.12188,25,0.12188,25.5,0.12188,26,0.12188,26.5,0.12188,27,0.12188,27.5,0.12188,28,0.12188,28.5,0.12188,29,0.12188,29.5,0.12188,30,0.12188)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,7.6382e-05,2.5,0.00024249,3,0.00064251,3.5,0.0014291,4,0.0030285,4.5,0.0056782,5,0.0097831,5.5,0.01591,6,0.025564,6.5,0.038908,7,0.055777,7.5,0.076503,8,0.10154,8.5,0.1292,9,0.15547,9.5,0.1906,10,0.25392,10.5,0.36318,11,0.66238,11.5,0.97185,12,1.3004,12.5,1.5964,13,1.8423,13.5,1.8917,14,1.9277,14.5,1.9311,15,1.9335,15.5,1.9335,16,1.9335,16.5,1.9335,17,1.9335,17.5,1.9335,18,1.9335,18.5,1.9335,19,1.9335,19.5,1.9335,20,1.9335,20.5,1.9335,21,1.9335,21.5,1.9335,22,1.9335,22.5,1.9335,23,1.9335,23.5,1.9335,24,1.9335,24.5,1.9335,25,1.9335,25.5,1.9335,26,1.9335,26.5,1.9335,27,1.9335,27.5,1.9335,28,1.9335,28.5,1.9335,29,1.9335,29.5,1.9335,30,1.9335)}
.func RTJ(Tj) {table(Tj,25,-0.0022634,35,-0.0016447,45,-0.00089366,55,-1.0193e-05,65,0.0010057,75,0.0021539,85,0.0034346,95,0.0048476,105,0.0063931,115,0.0080709,125,0.0098811,135,0.011824,145,0.013899,155,0.016106,165,0.018446,175,0.020918,275,0.04564,375,0.070362,475,0.095084,575,0.11981,675,0.14453,775,0.16925,875,0.19397,975,0.21869,1075,0.24342,1175,0.26814,1275,0.29286,1375,0.31758,1475,0.3423,1575,0.36703,1675,0.39175,1775,0.41647,1875,0.44119,1975,0.46591)}
.func VthFwd(Tj) {table(Tj,25,-0.25895,35,-0.23605,45,-0.21191,55,-0.18651,65,-0.15987,75,-0.13198,85,-0.10284,95,-0.072448,105,-0.040809,115,-0.0079211,125,0.026216,135,0.061601,145,0.098236,155,0.13612,165,0.17525,175,0.21563,275,0.61944,375,1.0233,475,1.4271,575,1.8309,675,2.2347,775,2.6385,875,3.0423,975,3.4461,1075,3.8499,1175,4.2537,1275,4.6576,1375,5.0614,1475,5.4652,1575,5.869,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,5.053,0.118,5.039,0.139,5.019,0.163,5.000,0.192,4.978,0.226,4.952,0.266,4.921,0.313,4.887,0.368,4.847,0.433,4.802,0.510,4.751,0.600,4.696,0.707,4.634,0.832,4.564,0.979,4.486,1.152,4.400,1.356,4.305,1.596,4.202,1.879,4.092,2.211,3.973,2.602,3.847,3.063,3.714,3.605,3.575,4.243,3.430,4.994,3.280,5.878,3.126,6.918,2.964,8.142,2.756,9.583,2.542,11.279,2.334,13.275,2.133,15.624,1.945,18.390,1.812,21.644,1.694,25.475,1.574,29.983,1.449,35.289,1.313,41.535,1.170,48.885,1.027,57.537,0.895,67.720,0.779,79.705,0.686,93.810,0.611,110.413,0.550,129.953,0.497,152.952,0.451,180.021,0.410,211.880,0.374,249.378,0.342,293.512,0.314,345.457,0.288,406.595,0.264,478.553,0.243,563.245,0.224,662.926,0.207,780.249,0.195,918.335,0.186,1080.859,0.180,1272.146,0.177,1497.286,0.177)}

.func Cdg(V) {table(V,0.100,2.330,0.118,2.297,0.139,2.258,0.163,2.217,0.192,2.168,0.226,2.111,0.266,2.047,0.313,1.975,0.368,1.898,0.433,1.816,0.510,1.734,0.600,1.650,0.707,1.569,0.832,1.490,0.979,1.414,1.152,1.339,1.356,1.262,1.596,1.185,1.879,1.106,2.211,1.028,2.602,0.952,3.063,0.877,3.605,0.805,4.243,0.734,4.994,0.664,5.878,0.595,6.918,0.524,8.142,0.419,9.583,0.320,11.279,0.232,13.275,0.156,15.624,0.095,18.390,0.081,21.644,0.074,25.475,0.069,29.983,0.064,35.289,0.058,41.535,0.052,48.885,0.046,57.537,0.040,67.720,0.035,79.705,0.031,93.810,0.028,110.413,0.025,129.953,0.023,152.952,0.021,180.021,0.020,211.880,0.018,249.378,0.017,293.512,0.016,345.457,0.015,406.595,0.014,478.553,0.013,563.245,0.012,662.926,0.011,780.249,0.011,918.335,0.010,1080.859,0.010,1272.146,0.010,1497.286,0.010)}

.func Cgs(V) {table(V,-4.970,8.152,-4.178,6.920,-3.387,6.697,-2.595,6.404,-1.803,6.643,-1.011,7.123,-0.220,7.738,0.572,8.419,1.364,9.091,2.156,9.602,2.947,9.921,3.739,10.099,4.531,10.188,5.322,10.240,6.114,10.276,6.906,10.305,7.698,10.329,8.489,10.350,9.281,10.368,10.073,10.385,10.864,10.400,11.656,10.414,12.448,10.426,13.240,10.438,14.031,10.449,14.823,10.460,15.615,10.469,16.407,10.478,17.198,10.487,17.990,10.496)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.566968e-01
.param Rs_ideal=2.785426e-02
.ENDS 51

.SUBCKT 52 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.094e-05,1,0.00028913,1.5,0.0019157,2,0.012693,2.5,0.079887,3,0.29161,3.5,0.80161,4,1.837,4.5,3.7222,5,6.8095,5.5,11.4731,6,18.0607,6.5,27.0266,7,38.7762,7.5,53.4981,8,71.4135,8.5,92.8363,9,118.4122,9.5,146.4866,10,176.7003,10.5,208.8768,11,239.1254,11.5,270.0233,12,297.8479,12.5,323.6995,13,346.4147,13.5,367.4436,14,383.0521,14.5,397.722,15,409.6484,15.5,419.2933,16,428.2853,16.5,436.3608,17,443.4082,17.5,450.78,18,458.5868,18.5,466.7465,19,475.2784,19.5,484.3826,20,493.1176,20.5,501.5061,21,509.569,21.5,517.3256,22,524.7934,22.5,531.9889,23,538.9271,23.5,545.622,24,552.0865,24.5,558.3327,25,564.3718,25.5,570.2143,26,575.8698,26.5,581.3474,27,586.6557,27.5,591.8026,28,596.7956,28.5,601.6416,29,606.3473,29.5,611.0042,30,615.4845)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.99259,4.5,0.94489,5,0.87638,5.5,0.79059,6,0.69012,6.5,0.58272,7,0.50294,7.5,0.43419,8,0.37431,8.5,0.32187,9,0.27606,9.5,0.24001,10,0.21061,10.5,0.18631,11,0.16773,11.5,0.15391,12,0.14301,12.5,0.13458,13,0.12892,13.5,0.12479,14,0.1236,14.5,0.12242,15,0.12188,15.5,0.12188,16,0.12188,16.5,0.12188,17,0.12188,17.5,0.12188,18,0.12188,18.5,0.12188,19,0.12188,19.5,0.12188,20,0.12188,20.5,0.12188,21,0.12188,21.5,0.12188,22,0.12188,22.5,0.12188,23,0.12188,23.5,0.12188,24,0.12188,24.5,0.12188,25,0.12188,25.5,0.12188,26,0.12188,26.5,0.12188,27,0.12188,27.5,0.12188,28,0.12188,28.5,0.12188,29,0.12188,29.5,0.12188,30,0.12188)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,7.6382e-05,2.5,0.00024249,3,0.00064251,3.5,0.0014291,4,0.0030285,4.5,0.0056782,5,0.0097831,5.5,0.01591,6,0.025564,6.5,0.038908,7,0.055777,7.5,0.076503,8,0.10154,8.5,0.1292,9,0.15547,9.5,0.1906,10,0.25392,10.5,0.36318,11,0.66238,11.5,0.97185,12,1.3004,12.5,1.5964,13,1.8423,13.5,1.8917,14,1.9277,14.5,1.9311,15,1.9335,15.5,1.9335,16,1.9335,16.5,1.9335,17,1.9335,17.5,1.9335,18,1.9335,18.5,1.9335,19,1.9335,19.5,1.9335,20,1.9335,20.5,1.9335,21,1.9335,21.5,1.9335,22,1.9335,22.5,1.9335,23,1.9335,23.5,1.9335,24,1.9335,24.5,1.9335,25,1.9335,25.5,1.9335,26,1.9335,26.5,1.9335,27,1.9335,27.5,1.9335,28,1.9335,28.5,1.9335,29,1.9335,29.5,1.9335,30,1.9335)}
.func RTJ(Tj) {table(Tj,25,-0.0022634,35,-0.0016447,45,-0.00089366,55,-1.0193e-05,65,0.0010057,75,0.0021539,85,0.0034346,95,0.0048476,105,0.0063931,115,0.0080709,125,0.0098811,135,0.011824,145,0.013899,155,0.016106,165,0.018446,175,0.020918,275,0.04564,375,0.070362,475,0.095084,575,0.11981,675,0.14453,775,0.16925,875,0.19397,975,0.21869,1075,0.24342,1175,0.26814,1275,0.29286,1375,0.31758,1475,0.3423,1575,0.36703,1675,0.39175,1775,0.41647,1875,0.44119,1975,0.46591)}
.func VthFwd(Tj) {table(Tj,25,-0.25895,35,-0.23605,45,-0.21191,55,-0.18651,65,-0.15987,75,-0.13198,85,-0.10284,95,-0.072448,105,-0.040809,115,-0.0079211,125,0.026216,135,0.061601,145,0.098236,155,0.13612,165,0.17525,175,0.21563,275,0.61944,375,1.0233,475,1.4271,575,1.8309,675,2.2347,775,2.6385,875,3.0423,975,3.4461,1075,3.8499,1175,4.2537,1275,4.6576,1375,5.0614,1475,5.4652,1575,5.869,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.2567,-4,0.24238,-3,0.21958,-2,0.18886,-1,0.15992,0,0.13871,1,0.22966,2,0.28214,3,0.22639,4,0.16417,5,0.12972,6,0.11263,7,0.10543,8,0.1195,9,0.14225,10,0.1718,11,0.1918,12,0.22899,13,0.26483,14,0.69236,15,20,16,20,17,20,18,20)}
.func Rs(Vgs) {table(Vgs,-5,0.027854,-4,0.027747,-3,0.029879,-2,0.033834,-1,0.035356,0,0.032935,1,0.025447,2,0.024739,3,0.029066,4,0.034545,5,0.041649,6,0.055123,7,0.075886,8,0.10733,9,0.1502,10,0.19325,11,0.22091,12,0.26387,13,0.29552,14,0.0001,15,10,16,10,17,10,18,10)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0056751,2,0.070845,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.4179,35,1.2107,45,1.0501,55,0.93608,65,0.86871,75,0.84796,85,0.87381,95,0.94628,105,1.0654,115,1.2311,125,1.4434,135,1.7023,145,2.0078,155,2.36,165,2.7588,175,3.2041,275,7.6579,375,12.1117,475,16.5655,575,21.0193,675,25.4731,775,29.9268,875,34.3806,975,38.8344,1075,43.2882,1175,47.742,1275,52.1958,1375,56.6496,1475,61.1033,1575,65.5571,1675,70.0109,1775,74.4647,1875,78.9185,1975,83.3723)}
.func nscal(Tj) {table(Tj,25,1.0352,35,1.0155,45,1.0004,55,0.98996,65,0.98411,75,0.98288,85,0.98626,95,0.99427,105,1.0069,115,1.0241,125,1.046,135,1.0725,145,1.1036,155,1.1393,165,1.1796,175,1.2245,275,1.674,375,2.1235,475,2.573,575,3.0225,675,3.472,775,3.9214,875,4.3709,975,4.8204,1075,5.2699,1175,5.7194,1275,6.1688,1375,6.6183,1475,7.0678,1575,7.5173,1675,7.9668,1775,8.4162,1875,8.8657,1975,9.3152)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,5.053,0.118,5.039,0.139,5.019,0.163,5.000,0.192,4.978,0.226,4.952,0.266,4.921,0.313,4.887,0.368,4.847,0.433,4.802,0.510,4.751,0.600,4.696,0.707,4.634,0.832,4.564,0.979,4.486,1.152,4.400,1.356,4.305,1.596,4.202,1.879,4.092,2.211,3.973,2.602,3.847,3.063,3.714,3.605,3.575,4.243,3.430,4.994,3.280,5.878,3.126,6.918,2.964,8.142,2.756,9.583,2.542,11.279,2.334,13.275,2.133,15.624,1.945,18.390,1.812,21.644,1.694,25.475,1.574,29.983,1.449,35.289,1.313,41.535,1.170,48.885,1.027,57.537,0.895,67.720,0.779,79.705,0.686,93.810,0.611,110.413,0.550,129.953,0.497,152.952,0.451,180.021,0.410,211.880,0.374,249.378,0.342,293.512,0.314,345.457,0.288,406.595,0.264,478.553,0.243,563.245,0.224,662.926,0.207,780.249,0.195,918.335,0.186,1080.859,0.180,1272.146,0.177,1497.286,0.177)}

.func Cdg(V) {table(V,0.100,2.330,0.118,2.297,0.139,2.258,0.163,2.217,0.192,2.168,0.226,2.111,0.266,2.047,0.313,1.975,0.368,1.898,0.433,1.816,0.510,1.734,0.600,1.650,0.707,1.569,0.832,1.490,0.979,1.414,1.152,1.339,1.356,1.262,1.596,1.185,1.879,1.106,2.211,1.028,2.602,0.952,3.063,0.877,3.605,0.805,4.243,0.734,4.994,0.664,5.878,0.595,6.918,0.524,8.142,0.419,9.583,0.320,11.279,0.232,13.275,0.156,15.624,0.095,18.390,0.081,21.644,0.074,25.475,0.069,29.983,0.064,35.289,0.058,41.535,0.052,48.885,0.046,57.537,0.040,67.720,0.035,79.705,0.031,93.810,0.028,110.413,0.025,129.953,0.023,152.952,0.021,180.021,0.020,211.880,0.018,249.378,0.017,293.512,0.016,345.457,0.015,406.595,0.014,478.553,0.013,563.245,0.012,662.926,0.011,780.249,0.011,918.335,0.010,1080.859,0.010,1272.146,0.010,1497.286,0.010)}

.func Cgs(V) {table(V,-4.970,8.152,-4.178,6.920,-3.387,6.697,-2.595,6.404,-1.803,6.643,-1.011,7.123,-0.220,7.738,0.572,8.419,1.364,9.091,2.156,9.602,2.947,9.921,3.739,10.099,4.531,10.188,5.322,10.240,6.114,10.276,6.906,10.305,7.698,10.329,8.489,10.350,9.281,10.368,10.073,10.385,10.864,10.400,11.656,10.414,12.448,10.426,13.240,10.438,14.031,10.449,14.823,10.460,15.615,10.469,16.407,10.478,17.198,10.487,17.990,10.496)}


.ENDS 52

.SUBCKT 53 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.094e-05,1,0.00028913,1.5,0.0019157,2,0.012693,2.5,0.079887,3,0.29161,3.5,0.80161,4,1.837,4.5,3.7222,5,6.8095,5.5,11.4731,6,18.0607,6.5,27.0266,7,38.7762,7.5,53.4981,8,71.4135,8.5,92.8363,9,118.4122,9.5,146.4866,10,176.7003,10.5,208.8768,11,239.1254,11.5,270.0233,12,297.8479,12.5,323.6995,13,346.4147,13.5,367.4436,14,383.0521,14.5,397.722,15,409.6484,15.5,419.2933,16,428.2853,16.5,436.3608,17,443.4082,17.5,450.78,18,458.5868,18.5,466.7465,19,475.2784,19.5,484.3826,20,493.1176,20.5,501.5061,21,509.569,21.5,517.3256,22,524.7934,22.5,531.9889,23,538.9271,23.5,545.622,24,552.0865,24.5,558.3327,25,564.3718,25.5,570.2143,26,575.8698,26.5,581.3474,27,586.6557,27.5,591.8026,28,596.7956,28.5,601.6416,29,606.3473,29.5,611.0042,30,615.4845)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.99259,4.5,0.94489,5,0.87638,5.5,0.79059,6,0.69012,6.5,0.58272,7,0.50294,7.5,0.43419,8,0.37431,8.5,0.32187,9,0.27606,9.5,0.24001,10,0.21061,10.5,0.18631,11,0.16773,11.5,0.15391,12,0.14301,12.5,0.13458,13,0.12892,13.5,0.12479,14,0.1236,14.5,0.12242,15,0.12188,15.5,0.12188,16,0.12188,16.5,0.12188,17,0.12188,17.5,0.12188,18,0.12188,18.5,0.12188,19,0.12188,19.5,0.12188,20,0.12188,20.5,0.12188,21,0.12188,21.5,0.12188,22,0.12188,22.5,0.12188,23,0.12188,23.5,0.12188,24,0.12188,24.5,0.12188,25,0.12188,25.5,0.12188,26,0.12188,26.5,0.12188,27,0.12188,27.5,0.12188,28,0.12188,28.5,0.12188,29,0.12188,29.5,0.12188,30,0.12188)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,7.6382e-05,2.5,0.00024249,3,0.00064251,3.5,0.0014291,4,0.0030285,4.5,0.0056782,5,0.0097831,5.5,0.01591,6,0.025564,6.5,0.038908,7,0.055777,7.5,0.076503,8,0.10154,8.5,0.1292,9,0.15547,9.5,0.1906,10,0.25392,10.5,0.36318,11,0.66238,11.5,0.97185,12,1.3004,12.5,1.5964,13,1.8423,13.5,1.8917,14,1.9277,14.5,1.9311,15,1.9335,15.5,1.9335,16,1.9335,16.5,1.9335,17,1.9335,17.5,1.9335,18,1.9335,18.5,1.9335,19,1.9335,19.5,1.9335,20,1.9335,20.5,1.9335,21,1.9335,21.5,1.9335,22,1.9335,22.5,1.9335,23,1.9335,23.5,1.9335,24,1.9335,24.5,1.9335,25,1.9335,25.5,1.9335,26,1.9335,26.5,1.9335,27,1.9335,27.5,1.9335,28,1.9335,28.5,1.9335,29,1.9335,29.5,1.9335,30,1.9335)}
.func RTJ(Tj) {table(Tj,25,-0.0022634,35,-0.0016447,45,-0.00089366,55,-1.0193e-05,65,0.0010057,75,0.0021539,85,0.0034346,95,0.0048476,105,0.0063931,115,0.0080709,125,0.0098811,135,0.011824,145,0.013899,155,0.016106,165,0.018446,175,0.020918,275,0.04564,375,0.070362,475,0.095084,575,0.11981,675,0.14453,775,0.16925,875,0.19397,975,0.21869,1075,0.24342,1175,0.26814,1275,0.29286,1375,0.31758,1475,0.3423,1575,0.36703,1675,0.39175,1775,0.41647,1875,0.44119,1975,0.46591)}
.func VthFwd(Tj) {table(Tj,25,-0.25895,35,-0.23605,45,-0.21191,55,-0.18651,65,-0.15987,75,-0.13198,85,-0.10284,95,-0.072448,105,-0.040809,115,-0.0079211,125,0.026216,135,0.061601,145,0.098236,155,0.13612,165,0.17525,175,0.21563,275,0.61944,375,1.0233,475,1.4271,575,1.8309,675,2.2347,775,2.6385,875,3.0423,975,3.4461,1075,3.8499,1175,4.2537,1275,4.6576,1375,5.0614,1475,5.4652,1575,5.869,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.2567,-4,0.24238,-3,0.21958,-2,0.18886,-1,0.15992,0,0.13871,1,0.22966,2,0.28214,3,0.22639,4,0.16417,5,0.12972,6,0.11263,7,0.10543,8,0.1195,9,0.14225,10,0.1718,11,0.1918,12,0.22899,13,0.26483,14,0.69236,15,20,16,20,17,20,18,20)}
.func Rs(Vgs) {table(Vgs,-5,0.027854,-4,0.027747,-3,0.029879,-2,0.033834,-1,0.035356,0,0.032935,1,0.025447,2,0.024739,3,0.029066,4,0.034545,5,0.041649,6,0.055123,7,0.075886,8,0.10733,9,0.1502,10,0.19325,11,0.22091,12,0.26387,13,0.29552,14,0.0001,15,10,16,10,17,10,18,10)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0056751,2,0.070845,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.4179,35,1.2107,45,1.0501,55,0.93608,65,0.86871,75,0.84796,85,0.87381,95,0.94628,105,1.0654,115,1.2311,125,1.4434,135,1.7023,145,2.0078,155,2.36,165,2.7588,175,3.2041,275,7.6579,375,12.1117,475,16.5655,575,21.0193,675,25.4731,775,29.9268,875,34.3806,975,38.8344,1075,43.2882,1175,47.742,1275,52.1958,1375,56.6496,1475,61.1033,1575,65.5571,1675,70.0109,1775,74.4647,1875,78.9185,1975,83.3723)}
.func nscal(Tj) {table(Tj,25,1.0352,35,1.0155,45,1.0004,55,0.98996,65,0.98411,75,0.98288,85,0.98626,95,0.99427,105,1.0069,115,1.0241,125,1.046,135,1.0725,145,1.1036,155,1.1393,165,1.1796,175,1.2245,275,1.674,375,2.1235,475,2.573,575,3.0225,675,3.472,775,3.9214,875,4.3709,975,4.8204,1075,5.2699,1175,5.7194,1275,6.1688,1375,6.6183,1475,7.0678,1575,7.5173,1675,7.9668,1775,8.4162,1875,8.8657,1975,9.3152)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,5.053,0.118,5.039,0.139,5.019,0.163,5.000,0.192,4.978,0.226,4.952,0.266,4.921,0.313,4.887,0.368,4.847,0.433,4.802,0.510,4.751,0.600,4.696,0.707,4.634,0.832,4.564,0.979,4.486,1.152,4.400,1.356,4.305,1.596,4.202,1.879,4.092,2.211,3.973,2.602,3.847,3.063,3.714,3.605,3.575,4.243,3.430,4.994,3.280,5.878,3.126,6.918,2.964,8.142,2.756,9.583,2.542,11.279,2.334,13.275,2.133,15.624,1.945,18.390,1.812,21.644,1.694,25.475,1.574,29.983,1.449,35.289,1.313,41.535,1.170,48.885,1.027,57.537,0.895,67.720,0.779,79.705,0.686,93.810,0.611,110.413,0.550,129.953,0.497,152.952,0.451,180.021,0.410,211.880,0.374,249.378,0.342,293.512,0.314,345.457,0.288,406.595,0.264,478.553,0.243,563.245,0.224,662.926,0.207,780.249,0.195,918.335,0.186,1080.859,0.180,1272.146,0.177,1497.286,0.177)}

.func Cdg(V) {table(V,0.100,2.330,0.118,2.297,0.139,2.258,0.163,2.217,0.192,2.168,0.226,2.111,0.266,2.047,0.313,1.975,0.368,1.898,0.433,1.816,0.510,1.734,0.600,1.650,0.707,1.569,0.832,1.490,0.979,1.414,1.152,1.339,1.356,1.262,1.596,1.185,1.879,1.106,2.211,1.028,2.602,0.952,3.063,0.877,3.605,0.805,4.243,0.734,4.994,0.664,5.878,0.595,6.918,0.524,8.142,0.419,9.583,0.320,11.279,0.232,13.275,0.156,15.624,0.095,18.390,0.081,21.644,0.074,25.475,0.069,29.983,0.064,35.289,0.058,41.535,0.052,48.885,0.046,57.537,0.040,67.720,0.035,79.705,0.031,93.810,0.028,110.413,0.025,129.953,0.023,152.952,0.021,180.021,0.020,211.880,0.018,249.378,0.017,293.512,0.016,345.457,0.015,406.595,0.014,478.553,0.013,563.245,0.012,662.926,0.011,780.249,0.011,918.335,0.010,1080.859,0.010,1272.146,0.010,1497.286,0.010)}

.func Cgs(V) {table(V,-4.970,8.152,-4.178,6.920,-3.387,6.697,-2.595,6.404,-1.803,6.643,-1.011,7.123,-0.220,7.738,0.572,8.419,1.364,9.091,2.156,9.602,2.947,9.921,3.739,10.099,4.531,10.188,5.322,10.240,6.114,10.276,6.906,10.305,7.698,10.329,8.489,10.350,9.281,10.368,10.073,10.385,10.864,10.400,11.656,10.414,12.448,10.426,13.240,10.438,14.031,10.449,14.823,10.460,15.615,10.469,16.407,10.478,17.198,10.487,17.990,10.496)}


.ENDS 53

.SUBCKT 61 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,9.8491e-06,1,0.00023218,1.5,0.0014525,2,0.0090862,2.5,0.05684,3,0.20825,3.5,0.5868,4,1.4591,4.5,3.1997,5,6.3934,5.5,12.1162,6,22.8062,6.5,46.078,7,78.3179,7.5,119.7889,8,171.4156,8.5,230.7579,9,289.3096,9.5,349.2438,10,408.846,10.5,464.7891,11,517.2951,11.5,565.5817,12,602.6428,12.5,636.7899,13,667.9577,13.5,695.4293,14,720.3422,14.5,750.0654,15,776.595,15.5,801.1469,16,823.5673,16.5,843.9796,17,862.6494,17.5,881.0466,18,899.1331,18.5,917.2951,19,935.5457,19.5,954.1919,20,972.1719,20.5,989.5249,21,1006.2869,21.5,1022.4909,22,1038.1677,22.5,1053.3453,23,1068.0501,23.5,1082.3062,24,1096.1363,24.5,1109.5613,25,1122.6007,25.5,1135.273,26,1147.595,26.5,1159.5828,27,1171.2513,27.5,1182.6146,28,1193.6858,28.5,1204.4774,29,1215.0009,29.5,1225.4317,30,1235.5238)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.93455,4.5,0.84405,5,0.73132,5.5,0.59519,6,0.43487,6.5,0.32017,7,0.22897,7.5,0.16001,8,0.11446,8.5,0.09309,9,0.091561,9.5,0.091561,10,0.091561,10.5,0.091561,11,0.091561,11.5,0.091561,12,0.091561,12.5,0.091561,13,0.091561,13.5,0.091561,14,0.091561,14.5,0.091561,15,0.091561,15.5,0.091561,16,0.091561,16.5,0.091561,17,0.091561,17.5,0.091561,18,0.091561,18.5,0.091561,19,0.091561,19.5,0.091561,20,0.091561,20.5,0.091561,21,0.091561,21.5,0.091561,22,0.091561,22.5,0.091561,23,0.091561,23.5,0.091561,24,0.091561,24.5,0.091561,25,0.091561,25.5,0.091561,26,0.091561,26.5,0.091561,27,0.091561,27.5,0.091561,28,0.091561,28.5,0.091561,29,0.091561,29.5,0.091561,30,0.091561)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00025284,3,0.00091848,3.5,0.0023431,4,0.0050358,4.5,0.0094853,5,0.016292,5.5,0.025568,6,0.03853,6.5,0.0564,7,0.07748,7.5,0.095951,8,0.11154,8.5,0.12268,9,0.12765,9.5,0.12765,10,0.12765,10.5,0.12765,11,0.12765,11.5,0.12765,12,0.74911,12.5,1.3706,13,1.992,13.5,2.6135,14,3.2349,14.5,3.2349,15,3.2349,15.5,3.2349,16,3.2349,16.5,3.2349,17,3.2349,17.5,3.2349,18,3.2349,18.5,3.2349,19,3.2349,19.5,3.2349,20,3.2349,20.5,3.2349,21,3.2349,21.5,3.2349,22,3.2349,22.5,3.2349,23,3.2349,23.5,3.2349,24,3.2349,24.5,3.2349,25,3.2349,25.5,3.2349,26,3.2349,26.5,3.2349,27,3.2349,27.5,3.2349,28,3.2349,28.5,3.2349,29,3.2349,29.5,3.2349,30,3.2349)}
.func RTJ(Tj) {table(Tj,-40,-0.00062347,-30,-0.00046236,-20,-0.00025715,-10,-7.8696e-06,0,0.0002855,10,0.00062295,20,0.0010045,30,0.0014301,40,0.0018998,50,0.0024136,60,0.0029715,70,0.0035734,80,0.0042195,90,0.0049096,100,0.0056438,110,0.0064221,120,0.0072445,130,0.008111,140,0.0090215,150,0.0099761,160,0.010975,170,0.012018,270,0.022446,370,0.032874,470,0.043302,570,0.05373,670,0.064158,770,0.074586,870,0.085014,970,0.095442,1070,0.10587,1170,0.1163,1270,0.12673,1370,0.13715,1470,0.14758,1570,0.15801,1670,0.16844,1770,0.17887,1870,0.18929,1970,0.19972)}
.func VthFwd(Tj) {table(Tj,-40,-0.95487,-30,-0.78931,-20,-0.62422,-10,-0.45961,0,-0.29547,10,-0.1318,20,0.031383,30,0.1941,40,0.35633,50,0.51809,60,0.67938,70,0.84019,80,1.0005,90,1.1604,100,1.3198,110,1.4787,120,1.6371,130,1.7951,140,1.9526,150,2.1096,160,2.2661,170,2.4221,270,3.9827,370,5.5433,470,6,570,6,670,6,770,6,870,6,970,6,1070,6,1170,6,1270,6,1370,6,1470,6,1570,6,1670,6,1770,6,1870,6,1970,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,3.749,0.015,3.747,0.018,3.749,0.022,3.750,0.027,3.748,0.033,3.747,0.040,3.741,0.049,3.735,0.059,3.726,0.072,3.721,0.087,3.712,0.106,3.704,0.129,3.693,0.156,3.679,0.190,3.662,0.231,3.645,0.280,3.624,0.341,3.602,0.414,3.577,0.502,3.546,0.610,3.508,0.741,3.461,0.900,3.404,1.093,3.336,1.328,3.256,1.613,3.168,1.959,3.069,2.380,2.960,2.890,2.844,3.511,2.718,4.264,2.581,5.179,2.418,6.291,2.221,7.641,2.022,9.280,1.827,11.272,1.640,13.690,1.478,16.628,1.352,20.197,1.230,24.531,1.111,29.795,0.998,36.188,0.893,43.954,0.799,53.386,0.718,64.843,0.648,78.758,0.587,95.658,0.533,116.186,0.485,141.119,0.441,171.402,0.401,208.183,0.365,252.858,0.333,307.120,0.304,373.025,0.278,453.074,0.254,550.300,0.233,668.391,0.214,811.823,0.198,986.034,0.183,1197.630,0.171)}

.func Cdg(V) {table(V,0.013,3.579,0.015,3.572,0.018,3.563,0.022,3.552,0.027,3.538,0.033,3.523,0.040,3.509,0.049,3.486,0.059,3.460,0.072,3.430,0.087,3.390,0.106,3.342,0.129,3.282,0.156,3.212,0.190,3.124,0.231,3.018,0.280,2.895,0.341,2.751,0.414,2.586,0.502,2.407,0.610,2.224,0.741,2.042,0.900,1.870,1.093,1.712,1.328,1.563,1.613,1.422,1.959,1.284,2.380,1.150,2.890,1.021,3.511,0.897,4.264,0.777,5.179,0.644,6.291,0.492,7.641,0.360,9.280,0.249,11.272,0.159,13.690,0.106,16.628,0.095,20.197,0.086,24.531,0.078,29.795,0.070,36.188,0.063,43.954,0.056,53.386,0.051,64.843,0.046,78.758,0.042,95.658,0.039,116.186,0.036,141.119,0.033,171.402,0.031,208.183,0.029,252.858,0.026,307.120,0.025,373.025,0.023,453.074,0.021,550.300,0.020,668.391,0.018,811.823,0.017,986.034,0.016,1197.630,0.016)}

.func Cgs(V) {table(V,-5.410,7.545,-4.617,5.830,-3.824,5.531,-3.032,5.122,-2.239,5.444,-1.446,6.039,-0.653,6.772,0.139,7.577,0.932,8.365,1.725,8.944,2.518,9.291,3.310,9.492,4.103,9.590,4.896,9.645,5.689,9.683,6.481,9.709,7.274,9.731,8.067,9.751,8.860,9.767,9.652,9.783,10.445,9.797,11.238,9.810,12.031,9.822,12.823,9.833,13.616,9.842,14.409,9.851,15.202,9.860,15.994,9.867,16.787,9.875,17.580,9.880)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.887354e-01
.param Rs_ideal=2.930026e-02
.ENDS 61

.SUBCKT 62 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,9.8491e-06,1,0.00023218,1.5,0.0014525,2,0.0090862,2.5,0.05684,3,0.20825,3.5,0.5868,4,1.4591,4.5,3.1997,5,6.3934,5.5,12.1162,6,22.8062,6.5,46.078,7,78.3179,7.5,119.7889,8,171.4156,8.5,230.7579,9,289.3096,9.5,349.2438,10,408.846,10.5,464.7891,11,517.2951,11.5,565.5817,12,602.6428,12.5,636.7899,13,667.9577,13.5,695.4293,14,720.3422,14.5,750.0654,15,776.595,15.5,801.1469,16,823.5673,16.5,843.9796,17,862.6494,17.5,881.0466,18,899.1331,18.5,917.2951,19,935.5457,19.5,954.1919,20,972.1719,20.5,989.5249,21,1006.2869,21.5,1022.4909,22,1038.1677,22.5,1053.3453,23,1068.0501,23.5,1082.3062,24,1096.1363,24.5,1109.5613,25,1122.6007,25.5,1135.273,26,1147.595,26.5,1159.5828,27,1171.2513,27.5,1182.6146,28,1193.6858,28.5,1204.4774,29,1215.0009,29.5,1225.4317,30,1235.5238)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.93455,4.5,0.84405,5,0.73132,5.5,0.59519,6,0.43487,6.5,0.32017,7,0.22897,7.5,0.16001,8,0.11446,8.5,0.09309,9,0.091561,9.5,0.091561,10,0.091561,10.5,0.091561,11,0.091561,11.5,0.091561,12,0.091561,12.5,0.091561,13,0.091561,13.5,0.091561,14,0.091561,14.5,0.091561,15,0.091561,15.5,0.091561,16,0.091561,16.5,0.091561,17,0.091561,17.5,0.091561,18,0.091561,18.5,0.091561,19,0.091561,19.5,0.091561,20,0.091561,20.5,0.091561,21,0.091561,21.5,0.091561,22,0.091561,22.5,0.091561,23,0.091561,23.5,0.091561,24,0.091561,24.5,0.091561,25,0.091561,25.5,0.091561,26,0.091561,26.5,0.091561,27,0.091561,27.5,0.091561,28,0.091561,28.5,0.091561,29,0.091561,29.5,0.091561,30,0.091561)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00025284,3,0.00091848,3.5,0.0023431,4,0.0050358,4.5,0.0094853,5,0.016292,5.5,0.025568,6,0.03853,6.5,0.0564,7,0.07748,7.5,0.095951,8,0.11154,8.5,0.12268,9,0.12765,9.5,0.12765,10,0.12765,10.5,0.12765,11,0.12765,11.5,0.12765,12,0.74911,12.5,1.3706,13,1.992,13.5,2.6135,14,3.2349,14.5,3.2349,15,3.2349,15.5,3.2349,16,3.2349,16.5,3.2349,17,3.2349,17.5,3.2349,18,3.2349,18.5,3.2349,19,3.2349,19.5,3.2349,20,3.2349,20.5,3.2349,21,3.2349,21.5,3.2349,22,3.2349,22.5,3.2349,23,3.2349,23.5,3.2349,24,3.2349,24.5,3.2349,25,3.2349,25.5,3.2349,26,3.2349,26.5,3.2349,27,3.2349,27.5,3.2349,28,3.2349,28.5,3.2349,29,3.2349,29.5,3.2349,30,3.2349)}
.func RTJ(Tj) {table(Tj,-40,-0.00062347,-30,-0.00046236,-20,-0.00025715,-10,-7.8696e-06,0,0.0002855,10,0.00062295,20,0.0010045,30,0.0014301,40,0.0018998,50,0.0024136,60,0.0029715,70,0.0035734,80,0.0042195,90,0.0049096,100,0.0056438,110,0.0064221,120,0.0072445,130,0.008111,140,0.0090215,150,0.0099761,160,0.010975,170,0.012018,270,0.022446,370,0.032874,470,0.043302,570,0.05373,670,0.064158,770,0.074586,870,0.085014,970,0.095442,1070,0.10587,1170,0.1163,1270,0.12673,1370,0.13715,1470,0.14758,1570,0.15801,1670,0.16844,1770,0.17887,1870,0.18929,1970,0.19972)}
.func VthFwd(Tj) {table(Tj,-40,-0.95487,-30,-0.78931,-20,-0.62422,-10,-0.45961,0,-0.29547,10,-0.1318,20,0.031383,30,0.1941,40,0.35633,50,0.51809,60,0.67938,70,0.84019,80,1.0005,90,1.1604,100,1.3198,110,1.4787,120,1.6371,130,1.7951,140,1.9526,150,2.1096,160,2.2661,170,2.4221,270,3.9827,370,5.5433,470,6,570,6,670,6,770,6,870,6,970,6,1070,6,1170,6,1270,6,1370,6,1470,6,1570,6,1670,6,1770,6,1870,6,1970,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.28874,-4,0.2721,-3,0.24379,-2,0.2079,-1,0.17556,0,0.15616,1,0.21373,2,0.2707,3,0.28662,4,0.24236,5,0.20129,6,0.17497,7,0.14952,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0293,-4,0.0277,-3,0.028129,-2,0.029416,-1,0.027655,0,0.020938,1,0.012249,2,0.010995,3,0.012014,4,0.015076,5,0.018082,6,0.021439,7,0.026689,8,0.026698,9,0.0242,10,0.028401,11,0.03357,12,0.037167,13,0.041355,14,0.044785,15,0.047263,16,0.049116,17,0.048925,18,0.053694)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.00085096,2,0.017744,3,0.076937,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,1.0594,-30,1.0198,-20,0.99134,-10,0.97392,0,0.96755,10,0.97224,20,0.98798,30,1.0148,40,1.0526,50,1.1016,60,1.1615,70,1.2326,80,1.3146,90,1.4078,100,1.512,110,1.6272,120,1.7535,130,1.8909,140,2.0393,150,2.1988,160,2.3693,170,2.5509,270,4.3668,370,6.1828,470,7.9987,570,9.8146,670,11.6305,770,13.4464,870,15.2624,970,17.0783,1070,18.8942,1170,20.7101,1270,22.526,1370,24.342,1470,26.1579,1570,27.9738,1670,29.7897,1770,31.6056,1870,33.4215,1970,35.2375)}
.func nscal(Tj) {table(Tj,-40,1.0145,-30,1.012,-20,1.0095,-10,1.0072,0,1.005,10,1.0029,20,1.0009,30,0.99909,40,0.99735,50,0.99573,60,0.99423,70,0.99284,80,0.99157,90,0.99042,100,0.98938,110,0.98846,120,0.98766,130,0.98697,140,0.9864,150,0.98595,160,0.98561,170,0.98539,270,0.9832,370,0.98101,470,0.97881,570,0.97662,670,0.97443,770,0.97224,870,0.97004,970,0.96785,1070,0.96566,1170,0.96347,1270,0.96127,1370,0.95908,1470,0.95689,1570,0.9547,1670,0.9525,1770,0.95031,1870,0.94812,1970,0.94592)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,3.749,0.015,3.747,0.018,3.749,0.022,3.750,0.027,3.748,0.033,3.747,0.040,3.741,0.049,3.735,0.059,3.726,0.072,3.721,0.087,3.712,0.106,3.704,0.129,3.693,0.156,3.679,0.190,3.662,0.231,3.645,0.280,3.624,0.341,3.602,0.414,3.577,0.502,3.546,0.610,3.508,0.741,3.461,0.900,3.404,1.093,3.336,1.328,3.256,1.613,3.168,1.959,3.069,2.380,2.960,2.890,2.844,3.511,2.718,4.264,2.581,5.179,2.418,6.291,2.221,7.641,2.022,9.280,1.827,11.272,1.640,13.690,1.478,16.628,1.352,20.197,1.230,24.531,1.111,29.795,0.998,36.188,0.893,43.954,0.799,53.386,0.718,64.843,0.648,78.758,0.587,95.658,0.533,116.186,0.485,141.119,0.441,171.402,0.401,208.183,0.365,252.858,0.333,307.120,0.304,373.025,0.278,453.074,0.254,550.300,0.233,668.391,0.214,811.823,0.198,986.034,0.183,1197.630,0.171)}

.func Cdg(V) {table(V,0.013,3.579,0.015,3.572,0.018,3.563,0.022,3.552,0.027,3.538,0.033,3.523,0.040,3.509,0.049,3.486,0.059,3.460,0.072,3.430,0.087,3.390,0.106,3.342,0.129,3.282,0.156,3.212,0.190,3.124,0.231,3.018,0.280,2.895,0.341,2.751,0.414,2.586,0.502,2.407,0.610,2.224,0.741,2.042,0.900,1.870,1.093,1.712,1.328,1.563,1.613,1.422,1.959,1.284,2.380,1.150,2.890,1.021,3.511,0.897,4.264,0.777,5.179,0.644,6.291,0.492,7.641,0.360,9.280,0.249,11.272,0.159,13.690,0.106,16.628,0.095,20.197,0.086,24.531,0.078,29.795,0.070,36.188,0.063,43.954,0.056,53.386,0.051,64.843,0.046,78.758,0.042,95.658,0.039,116.186,0.036,141.119,0.033,171.402,0.031,208.183,0.029,252.858,0.026,307.120,0.025,373.025,0.023,453.074,0.021,550.300,0.020,668.391,0.018,811.823,0.017,986.034,0.016,1197.630,0.016)}

.func Cgs(V) {table(V,-5.410,7.545,-4.617,5.830,-3.824,5.531,-3.032,5.122,-2.239,5.444,-1.446,6.039,-0.653,6.772,0.139,7.577,0.932,8.365,1.725,8.944,2.518,9.291,3.310,9.492,4.103,9.590,4.896,9.645,5.689,9.683,6.481,9.709,7.274,9.731,8.067,9.751,8.860,9.767,9.652,9.783,10.445,9.797,11.238,9.810,12.031,9.822,12.823,9.833,13.616,9.842,14.409,9.851,15.202,9.860,15.994,9.867,16.787,9.875,17.580,9.880)}


.ENDS 62

.SUBCKT 63 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,9.8491e-06,1,0.00023218,1.5,0.0014525,2,0.0090862,2.5,0.05684,3,0.20825,3.5,0.5868,4,1.4591,4.5,3.1997,5,6.3934,5.5,12.1162,6,22.8062,6.5,46.078,7,78.3179,7.5,119.7889,8,171.4156,8.5,230.7579,9,289.3096,9.5,349.2438,10,408.846,10.5,464.7891,11,517.2951,11.5,565.5817,12,602.6428,12.5,636.7899,13,667.9577,13.5,695.4293,14,720.3422,14.5,750.0654,15,776.595,15.5,801.1469,16,823.5673,16.5,843.9796,17,862.6494,17.5,881.0466,18,899.1331,18.5,917.2951,19,935.5457,19.5,954.1919,20,972.1719,20.5,989.5249,21,1006.2869,21.5,1022.4909,22,1038.1677,22.5,1053.3453,23,1068.0501,23.5,1082.3062,24,1096.1363,24.5,1109.5613,25,1122.6007,25.5,1135.273,26,1147.595,26.5,1159.5828,27,1171.2513,27.5,1182.6146,28,1193.6858,28.5,1204.4774,29,1215.0009,29.5,1225.4317,30,1235.5238)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.93455,4.5,0.84405,5,0.73132,5.5,0.59519,6,0.43487,6.5,0.32017,7,0.22897,7.5,0.16001,8,0.11446,8.5,0.09309,9,0.091561,9.5,0.091561,10,0.091561,10.5,0.091561,11,0.091561,11.5,0.091561,12,0.091561,12.5,0.091561,13,0.091561,13.5,0.091561,14,0.091561,14.5,0.091561,15,0.091561,15.5,0.091561,16,0.091561,16.5,0.091561,17,0.091561,17.5,0.091561,18,0.091561,18.5,0.091561,19,0.091561,19.5,0.091561,20,0.091561,20.5,0.091561,21,0.091561,21.5,0.091561,22,0.091561,22.5,0.091561,23,0.091561,23.5,0.091561,24,0.091561,24.5,0.091561,25,0.091561,25.5,0.091561,26,0.091561,26.5,0.091561,27,0.091561,27.5,0.091561,28,0.091561,28.5,0.091561,29,0.091561,29.5,0.091561,30,0.091561)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00025284,3,0.00091848,3.5,0.0023431,4,0.0050358,4.5,0.0094853,5,0.016292,5.5,0.025568,6,0.03853,6.5,0.0564,7,0.07748,7.5,0.095951,8,0.11154,8.5,0.12268,9,0.12765,9.5,0.12765,10,0.12765,10.5,0.12765,11,0.12765,11.5,0.12765,12,0.74911,12.5,1.3706,13,1.992,13.5,2.6135,14,3.2349,14.5,3.2349,15,3.2349,15.5,3.2349,16,3.2349,16.5,3.2349,17,3.2349,17.5,3.2349,18,3.2349,18.5,3.2349,19,3.2349,19.5,3.2349,20,3.2349,20.5,3.2349,21,3.2349,21.5,3.2349,22,3.2349,22.5,3.2349,23,3.2349,23.5,3.2349,24,3.2349,24.5,3.2349,25,3.2349,25.5,3.2349,26,3.2349,26.5,3.2349,27,3.2349,27.5,3.2349,28,3.2349,28.5,3.2349,29,3.2349,29.5,3.2349,30,3.2349)}
.func RTJ(Tj) {table(Tj,-40,-0.00062347,-30,-0.00046236,-20,-0.00025715,-10,-7.8696e-06,0,0.0002855,10,0.00062295,20,0.0010045,30,0.0014301,40,0.0018998,50,0.0024136,60,0.0029715,70,0.0035734,80,0.0042195,90,0.0049096,100,0.0056438,110,0.0064221,120,0.0072445,130,0.008111,140,0.0090215,150,0.0099761,160,0.010975,170,0.012018,270,0.022446,370,0.032874,470,0.043302,570,0.05373,670,0.064158,770,0.074586,870,0.085014,970,0.095442,1070,0.10587,1170,0.1163,1270,0.12673,1370,0.13715,1470,0.14758,1570,0.15801,1670,0.16844,1770,0.17887,1870,0.18929,1970,0.19972)}
.func VthFwd(Tj) {table(Tj,-40,-0.95487,-30,-0.78931,-20,-0.62422,-10,-0.45961,0,-0.29547,10,-0.1318,20,0.031383,30,0.1941,40,0.35633,50,0.51809,60,0.67938,70,0.84019,80,1.0005,90,1.1604,100,1.3198,110,1.4787,120,1.6371,130,1.7951,140,1.9526,150,2.1096,160,2.2661,170,2.4221,270,3.9827,370,5.5433,470,6,570,6,670,6,770,6,870,6,970,6,1070,6,1170,6,1270,6,1370,6,1470,6,1570,6,1670,6,1770,6,1870,6,1970,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.28874,-4,0.2721,-3,0.24379,-2,0.2079,-1,0.17556,0,0.15616,1,0.21373,2,0.2707,3,0.28662,4,0.24236,5,0.20129,6,0.17497,7,0.14952,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0293,-4,0.0277,-3,0.028129,-2,0.029416,-1,0.027655,0,0.020938,1,0.012249,2,0.010995,3,0.012014,4,0.015076,5,0.018082,6,0.021439,7,0.026689,8,0.026698,9,0.0242,10,0.028401,11,0.03357,12,0.037167,13,0.041355,14,0.044785,15,0.047263,16,0.049116,17,0.048925,18,0.053694)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.00085096,2,0.017744,3,0.076937,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,1.0594,-30,1.0198,-20,0.99134,-10,0.97392,0,0.96755,10,0.97224,20,0.98798,30,1.0148,40,1.0526,50,1.1016,60,1.1615,70,1.2326,80,1.3146,90,1.4078,100,1.512,110,1.6272,120,1.7535,130,1.8909,140,2.0393,150,2.1988,160,2.3693,170,2.5509,270,4.3668,370,6.1828,470,7.9987,570,9.8146,670,11.6305,770,13.4464,870,15.2624,970,17.0783,1070,18.8942,1170,20.7101,1270,22.526,1370,24.342,1470,26.1579,1570,27.9738,1670,29.7897,1770,31.6056,1870,33.4215,1970,35.2375)}
.func nscal(Tj) {table(Tj,-40,1.0145,-30,1.012,-20,1.0095,-10,1.0072,0,1.005,10,1.0029,20,1.0009,30,0.99909,40,0.99735,50,0.99573,60,0.99423,70,0.99284,80,0.99157,90,0.99042,100,0.98938,110,0.98846,120,0.98766,130,0.98697,140,0.9864,150,0.98595,160,0.98561,170,0.98539,270,0.9832,370,0.98101,470,0.97881,570,0.97662,670,0.97443,770,0.97224,870,0.97004,970,0.96785,1070,0.96566,1170,0.96347,1270,0.96127,1370,0.95908,1470,0.95689,1570,0.9547,1670,0.9525,1770,0.95031,1870,0.94812,1970,0.94592)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,3.749,0.015,3.747,0.018,3.749,0.022,3.750,0.027,3.748,0.033,3.747,0.040,3.741,0.049,3.735,0.059,3.726,0.072,3.721,0.087,3.712,0.106,3.704,0.129,3.693,0.156,3.679,0.190,3.662,0.231,3.645,0.280,3.624,0.341,3.602,0.414,3.577,0.502,3.546,0.610,3.508,0.741,3.461,0.900,3.404,1.093,3.336,1.328,3.256,1.613,3.168,1.959,3.069,2.380,2.960,2.890,2.844,3.511,2.718,4.264,2.581,5.179,2.418,6.291,2.221,7.641,2.022,9.280,1.827,11.272,1.640,13.690,1.478,16.628,1.352,20.197,1.230,24.531,1.111,29.795,0.998,36.188,0.893,43.954,0.799,53.386,0.718,64.843,0.648,78.758,0.587,95.658,0.533,116.186,0.485,141.119,0.441,171.402,0.401,208.183,0.365,252.858,0.333,307.120,0.304,373.025,0.278,453.074,0.254,550.300,0.233,668.391,0.214,811.823,0.198,986.034,0.183,1197.630,0.171)}

.func Cdg(V) {table(V,0.013,3.579,0.015,3.572,0.018,3.563,0.022,3.552,0.027,3.538,0.033,3.523,0.040,3.509,0.049,3.486,0.059,3.460,0.072,3.430,0.087,3.390,0.106,3.342,0.129,3.282,0.156,3.212,0.190,3.124,0.231,3.018,0.280,2.895,0.341,2.751,0.414,2.586,0.502,2.407,0.610,2.224,0.741,2.042,0.900,1.870,1.093,1.712,1.328,1.563,1.613,1.422,1.959,1.284,2.380,1.150,2.890,1.021,3.511,0.897,4.264,0.777,5.179,0.644,6.291,0.492,7.641,0.360,9.280,0.249,11.272,0.159,13.690,0.106,16.628,0.095,20.197,0.086,24.531,0.078,29.795,0.070,36.188,0.063,43.954,0.056,53.386,0.051,64.843,0.046,78.758,0.042,95.658,0.039,116.186,0.036,141.119,0.033,171.402,0.031,208.183,0.029,252.858,0.026,307.120,0.025,373.025,0.023,453.074,0.021,550.300,0.020,668.391,0.018,811.823,0.017,986.034,0.016,1197.630,0.016)}

.func Cgs(V) {table(V,-5.410,7.545,-4.617,5.830,-3.824,5.531,-3.032,5.122,-2.239,5.444,-1.446,6.039,-0.653,6.772,0.139,7.577,0.932,8.365,1.725,8.944,2.518,9.291,3.310,9.492,4.103,9.590,4.896,9.645,5.689,9.683,6.481,9.709,7.274,9.731,8.067,9.751,8.860,9.767,9.652,9.783,10.445,9.797,11.238,9.810,12.031,9.822,12.823,9.833,13.616,9.842,14.409,9.851,15.202,9.860,15.994,9.867,16.787,9.875,17.580,9.880)}


.ENDS 63

.SUBCKT 71 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.6532e-05,1,0.00068152,1.5,0.0056441,2,0.019036,2.5,0.077074,3,0.26277,3.5,0.71545,4,1.6535,4.5,3.3724,5,6.161,5.5,10.4244,6,16.507,6.5,24.7676,7,35.2357,7.5,48.3539,8,64.0259,8.5,82.5583,9,103.5407,9.5,127.0899,10,152.8366,10.5,178.6131,11,200.0959,11.5,217.9223,12,233.0551,12.5,245.779,13,256.5067,13.5,269.1015,14,282.3252,14.5,293.6994,15,303.0389,15.5,312.709,16,322.3001,16.5,332.1685,17,343.3134,17.5,355.171,18,366.6762,18.5,377.8485,19,388.7059,19.5,399.265,20,409.5411,20.5,419.5486,21,429.3004,21.5,438.8089,22,448.0854,22.5,457.1406,23,465.9843,23.5,474.6259,24,483.0741,24.5,491.3369,25,499.4221,25.5,507.3368,26,515.0878,26.5,522.6815,27,530.1238,27.5,537.4206,28,544.5771,28.5,551.5984,29,558.4894,29.5,565.3354,30,572.0155)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.9907,4.5,0.96196,5,0.91446,5.5,0.84507,6,0.75865,6.5,0.66604,7,0.58329,7.5,0.5074,8,0.44544,8.5,0.39143,9,0.34373,9.5,0.30196,10,0.26639,10.5,0.23711,11,0.2169,11.5,0.20587,12,0.19828,12.5,0.1946,13,0.19259,13.5,0.19001,14,0.18717,14.5,0.18456,15,0.18373,15.5,0.1829,16,0.18264,16.5,0.18264,17,0.18264,17.5,0.18264,18,0.18264,18.5,0.18264,19,0.18264,19.5,0.18264,20,0.18264,20.5,0.18264,21,0.18264,21.5,0.18264,22,0.18264,22.5,0.18264,23,0.18264,23.5,0.18264,24,0.18264,24.5,0.18264,25,0.18264,25.5,0.18264,26,0.18264,26.5,0.18264,27,0.18264,27.5,0.18264,28,0.18264,28.5,0.18264,29,0.18264,29.5,0.18264,30,0.18264)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,1.2932e-05,2,5.1091e-05,2.5,0.00019766,3,0.00058355,3.5,0.0014094,4,0.0029575,4.5,0.0054988,5,0.0094446,5.5,0.014822,6,0.022337,6.5,0.032706,7,0.044932,7.5,0.058998,8,0.076036,8.5,0.09689,9,0.12029,9.5,0.14977,10,0.19851,10.5,0.31312,11,0.67496,11.5,1.2122,12,1.8109,12.5,2.407,13,2.9379,13.5,3.2166,14,3.3142,14.5,3.3412,15,3.3484,15.5,3.3502,16,3.3505,16.5,3.3505,17,3.3505,17.5,3.3505,18,3.3505,18.5,3.3505,19,3.3505,19.5,3.3505,20,3.3505,20.5,3.3505,21,3.3505,21.5,3.3505,22,3.3505,22.5,3.3505,23,3.3505,23.5,3.3505,24,3.3505,24.5,3.3505,25,3.3505,25.5,3.3505,26,3.3505,26.5,3.3505,27,3.3505,27.5,3.3505,28,3.3505,28.5,3.3505,29,3.3505,29.5,3.3505,30,3.3505)}
.func RTJ(Tj) {table(Tj,25,-0.0016035,35,-0.00090125,45,-0.00017123,55,0.00058656,65,0.0013721,75,0.0021855,85,0.0030266,95,0.0038955,105,0.0047922,115,0.0057166,125,0.0066689,135,0.0076489,145,0.0086567,155,0.0096922,165,0.010756,175,0.011847,275,0.022758,375,0.033669,475,0.04458,575,0.055492,675,0.066403,775,0.077314,875,0.088225,975,0.099136,1075,0.11005,1175,0.12096,1275,0.13187,1375,0.14278,1475,0.15369,1575,0.1646,1675,0.17551,1775,0.18643,1875,0.19734,1975,0.20825)}
.func VthFwd(Tj) {table(Tj,25,-0.43914,35,-0.39667,45,-0.35311,55,-0.30845,65,-0.26269,75,-0.21584,85,-0.16789,95,-0.11885,105,-0.068713,115,-0.017478,125,0.034851,135,0.088277,145,0.1428,155,0.19842,165,0.25513,175,0.31294,275,0.89102,375,1.4691,475,2.0472,575,2.6253,675,3.2034,775,3.7815,875,4.3596,975,4.9376,1075,5.5157,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,4.406,0.117,4.391,0.137,4.375,0.160,4.357,0.187,4.337,0.218,4.313,0.255,4.286,0.298,4.253,0.349,4.217,0.407,4.177,0.476,4.133,0.557,4.084,0.651,4.030,0.761,3.970,0.889,3.905,1.039,3.832,1.215,3.753,1.420,3.668,1.660,3.577,1.940,3.480,2.268,3.376,2.651,3.267,3.099,3.154,3.623,3.035,4.234,2.911,4.950,2.780,5.786,2.629,6.763,2.429,7.906,2.224,9.241,2.018,10.802,1.817,12.627,1.635,14.759,1.503,17.252,1.378,20.167,1.259,23.573,1.147,27.555,1.044,32.209,0.950,37.650,0.868,44.010,0.796,51.444,0.732,60.134,0.674,70.291,0.622,82.164,0.574,96.043,0.530,112.267,0.489,131.230,0.452,153.397,0.418,179.308,0.387,209.596,0.358,245.000,0.332,286.385,0.307,334.760,0.285,391.306,0.264,457.404,0.247,534.667,0.234,624.981,0.225,730.550,0.219,853.952,0.217,998.198,0.216)}

.func Cdg(V) {table(V,0.100,2.051,0.117,2.022,0.137,1.986,0.160,1.948,0.187,1.905,0.218,1.856,0.255,1.800,0.298,1.740,0.349,1.673,0.407,1.603,0.476,1.530,0.557,1.456,0.651,1.384,0.761,1.313,0.889,1.245,1.039,1.178,1.215,1.111,1.420,1.043,1.660,0.975,1.940,0.906,2.268,0.839,2.651,0.773,3.099,0.709,3.623,0.647,4.234,0.587,4.950,0.526,5.786,0.457,6.763,0.358,7.906,0.268,9.241,0.187,10.802,0.118,12.627,0.069,14.759,0.060,17.252,0.055,20.167,0.049,23.573,0.045,27.555,0.040,32.209,0.036,37.650,0.033,44.010,0.031,51.444,0.029,60.134,0.027,70.291,0.025,82.164,0.024,96.043,0.023,112.267,0.021,131.230,0.020,153.397,0.019,179.308,0.018,209.596,0.017,245.000,0.016,286.385,0.015,334.760,0.015,391.306,0.014,457.404,0.013,534.667,0.013,624.981,0.013,730.550,0.013,853.952,0.013,998.198,0.013)}

.func Cgs(V) {table(V,-5.170,7.094,-4.480,5.940,-3.789,5.691,-3.099,5.372,-2.409,5.428,-1.718,5.684,-1.028,6.099,-0.338,6.618,0.353,7.193,1.043,7.759,1.733,8.191,2.424,8.471,3.114,8.640,3.804,8.731,4.495,8.787,5.185,8.828,5.876,8.861,6.566,8.889,7.256,8.913,7.947,8.934,8.637,8.953,9.327,8.970,10.018,8.985,10.708,8.998,11.398,9.011,12.089,9.022,12.779,9.033,13.469,9.042,14.160,9.052,14.850,9.060)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.523244e-01
.param Rs_ideal=2.196376e-02
.ENDS 71

.SUBCKT 72 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.6532e-05,1,0.00068152,1.5,0.0056441,2,0.019036,2.5,0.077074,3,0.26277,3.5,0.71545,4,1.6535,4.5,3.3724,5,6.161,5.5,10.4244,6,16.507,6.5,24.7676,7,35.2357,7.5,48.3539,8,64.0259,8.5,82.5583,9,103.5407,9.5,127.0899,10,152.8366,10.5,178.6131,11,200.0959,11.5,217.9223,12,233.0551,12.5,245.779,13,256.5067,13.5,269.1015,14,282.3252,14.5,293.6994,15,303.0389,15.5,312.709,16,322.3001,16.5,332.1685,17,343.3134,17.5,355.171,18,366.6762,18.5,377.8485,19,388.7059,19.5,399.265,20,409.5411,20.5,419.5486,21,429.3004,21.5,438.8089,22,448.0854,22.5,457.1406,23,465.9843,23.5,474.6259,24,483.0741,24.5,491.3369,25,499.4221,25.5,507.3368,26,515.0878,26.5,522.6815,27,530.1238,27.5,537.4206,28,544.5771,28.5,551.5984,29,558.4894,29.5,565.3354,30,572.0155)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.9907,4.5,0.96196,5,0.91446,5.5,0.84507,6,0.75865,6.5,0.66604,7,0.58329,7.5,0.5074,8,0.44544,8.5,0.39143,9,0.34373,9.5,0.30196,10,0.26639,10.5,0.23711,11,0.2169,11.5,0.20587,12,0.19828,12.5,0.1946,13,0.19259,13.5,0.19001,14,0.18717,14.5,0.18456,15,0.18373,15.5,0.1829,16,0.18264,16.5,0.18264,17,0.18264,17.5,0.18264,18,0.18264,18.5,0.18264,19,0.18264,19.5,0.18264,20,0.18264,20.5,0.18264,21,0.18264,21.5,0.18264,22,0.18264,22.5,0.18264,23,0.18264,23.5,0.18264,24,0.18264,24.5,0.18264,25,0.18264,25.5,0.18264,26,0.18264,26.5,0.18264,27,0.18264,27.5,0.18264,28,0.18264,28.5,0.18264,29,0.18264,29.5,0.18264,30,0.18264)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,1.2932e-05,2,5.1091e-05,2.5,0.00019766,3,0.00058355,3.5,0.0014094,4,0.0029575,4.5,0.0054988,5,0.0094446,5.5,0.014822,6,0.022337,6.5,0.032706,7,0.044932,7.5,0.058998,8,0.076036,8.5,0.09689,9,0.12029,9.5,0.14977,10,0.19851,10.5,0.31312,11,0.67496,11.5,1.2122,12,1.8109,12.5,2.407,13,2.9379,13.5,3.2166,14,3.3142,14.5,3.3412,15,3.3484,15.5,3.3502,16,3.3505,16.5,3.3505,17,3.3505,17.5,3.3505,18,3.3505,18.5,3.3505,19,3.3505,19.5,3.3505,20,3.3505,20.5,3.3505,21,3.3505,21.5,3.3505,22,3.3505,22.5,3.3505,23,3.3505,23.5,3.3505,24,3.3505,24.5,3.3505,25,3.3505,25.5,3.3505,26,3.3505,26.5,3.3505,27,3.3505,27.5,3.3505,28,3.3505,28.5,3.3505,29,3.3505,29.5,3.3505,30,3.3505)}
.func RTJ(Tj) {table(Tj,25,-0.0016035,35,-0.00090125,45,-0.00017123,55,0.00058656,65,0.0013721,75,0.0021855,85,0.0030266,95,0.0038955,105,0.0047922,115,0.0057166,125,0.0066689,135,0.0076489,145,0.0086567,155,0.0096922,165,0.010756,175,0.011847,275,0.022758,375,0.033669,475,0.04458,575,0.055492,675,0.066403,775,0.077314,875,0.088225,975,0.099136,1075,0.11005,1175,0.12096,1275,0.13187,1375,0.14278,1475,0.15369,1575,0.1646,1675,0.17551,1775,0.18643,1875,0.19734,1975,0.20825)}
.func VthFwd(Tj) {table(Tj,25,-0.43914,35,-0.39667,45,-0.35311,55,-0.30845,65,-0.26269,75,-0.21584,85,-0.16789,95,-0.11885,105,-0.068713,115,-0.017478,125,0.034851,135,0.088277,145,0.1428,155,0.19842,165,0.25513,175,0.31294,275,0.89102,375,1.4691,475,2.0472,575,2.6253,675,3.2034,775,3.7815,875,4.3596,975,4.9376,1075,5.5157,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.25232,-4,0.24229,-3,0.22325,-2,0.19456,-1,0.164,0,0.13989,1,0.21147,2,0.30003,3,0.22434,4,0.15657,5,0.11395,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.021964,-4,0.021343,-3,0.022789,-2,0.026566,-1,0.029405,0,0.028364,1,0.021571,2,0.018207,3,0.023692,4,0.028898,5,0.034605,6,0.041434,7,0.050252,8,0.064251,9,0.083844,10,0.09606,11,0.089444,12,0.095332,13,0.12,14,0.16964,15,0.2123,16,0.301)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0031022,2,0.089892,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2485,35,1.1058,45,0.99674,55,0.92145,65,0.87989,75,0.87205,85,0.89793,95,0.95755,105,1.0509,115,1.178,125,1.3387,135,1.5333,145,1.7615,155,2.0235,165,2.3192,175,2.6486,275,5.9428,375,9.237,475,12.5312,575,15.8255,675,19.1197,775,22.4139,875,25.7081,975,29.0023,1075,32.2965,1175,35.5907,1275,38.885,1375,42.1792,1475,45.4734,1575,48.7676,1675,52.0618,1775,55.356,1875,58.6503,1975,61.9445)}
.func nscal(Tj) {table(Tj,25,1.0566,35,1.0346,45,1.017,55,1.0039,65,0.99519,75,0.99099,85,0.99125,95,0.99597,105,1.0051,115,1.0188,125,1.0369,135,1.0594,145,1.0865,155,1.1179,165,1.1539,175,1.1943,275,1.5983,375,2.0023,475,2.4063,575,2.8104,675,3.2144,775,3.6184,875,4.0224,975,4.4264,1075,4.8305,1175,5.2345,1275,5.6385,1375,6.0425,1475,6.4465,1575,6.8505,1675,7.2546,1775,7.6586,1875,8.0626,1975,8.4666)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,4.406,0.117,4.391,0.137,4.375,0.160,4.357,0.187,4.337,0.218,4.313,0.255,4.286,0.298,4.253,0.349,4.217,0.407,4.177,0.476,4.133,0.557,4.084,0.651,4.030,0.761,3.970,0.889,3.905,1.039,3.832,1.215,3.753,1.420,3.668,1.660,3.577,1.940,3.480,2.268,3.376,2.651,3.267,3.099,3.154,3.623,3.035,4.234,2.911,4.950,2.780,5.786,2.629,6.763,2.429,7.906,2.224,9.241,2.018,10.802,1.817,12.627,1.635,14.759,1.503,17.252,1.378,20.167,1.259,23.573,1.147,27.555,1.044,32.209,0.950,37.650,0.868,44.010,0.796,51.444,0.732,60.134,0.674,70.291,0.622,82.164,0.574,96.043,0.530,112.267,0.489,131.230,0.452,153.397,0.418,179.308,0.387,209.596,0.358,245.000,0.332,286.385,0.307,334.760,0.285,391.306,0.264,457.404,0.247,534.667,0.234,624.981,0.225,730.550,0.219,853.952,0.217,998.198,0.216)}

.func Cdg(V) {table(V,0.100,2.051,0.117,2.022,0.137,1.986,0.160,1.948,0.187,1.905,0.218,1.856,0.255,1.800,0.298,1.740,0.349,1.673,0.407,1.603,0.476,1.530,0.557,1.456,0.651,1.384,0.761,1.313,0.889,1.245,1.039,1.178,1.215,1.111,1.420,1.043,1.660,0.975,1.940,0.906,2.268,0.839,2.651,0.773,3.099,0.709,3.623,0.647,4.234,0.587,4.950,0.526,5.786,0.457,6.763,0.358,7.906,0.268,9.241,0.187,10.802,0.118,12.627,0.069,14.759,0.060,17.252,0.055,20.167,0.049,23.573,0.045,27.555,0.040,32.209,0.036,37.650,0.033,44.010,0.031,51.444,0.029,60.134,0.027,70.291,0.025,82.164,0.024,96.043,0.023,112.267,0.021,131.230,0.020,153.397,0.019,179.308,0.018,209.596,0.017,245.000,0.016,286.385,0.015,334.760,0.015,391.306,0.014,457.404,0.013,534.667,0.013,624.981,0.013,730.550,0.013,853.952,0.013,998.198,0.013)}

.func Cgs(V) {table(V,-5.170,7.094,-4.480,5.940,-3.789,5.691,-3.099,5.372,-2.409,5.428,-1.718,5.684,-1.028,6.099,-0.338,6.618,0.353,7.193,1.043,7.759,1.733,8.191,2.424,8.471,3.114,8.640,3.804,8.731,4.495,8.787,5.185,8.828,5.876,8.861,6.566,8.889,7.256,8.913,7.947,8.934,8.637,8.953,9.327,8.970,10.018,8.985,10.708,8.998,11.398,9.011,12.089,9.022,12.779,9.033,13.469,9.042,14.160,9.052,14.850,9.060)}


.ENDS 72

.SUBCKT 73 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.6532e-05,1,0.00068152,1.5,0.0056441,2,0.019036,2.5,0.077074,3,0.26277,3.5,0.71545,4,1.6535,4.5,3.3724,5,6.161,5.5,10.4244,6,16.507,6.5,24.7676,7,35.2357,7.5,48.3539,8,64.0259,8.5,82.5583,9,103.5407,9.5,127.0899,10,152.8366,10.5,178.6131,11,200.0959,11.5,217.9223,12,233.0551,12.5,245.779,13,256.5067,13.5,269.1015,14,282.3252,14.5,293.6994,15,303.0389,15.5,312.709,16,322.3001,16.5,332.1685,17,343.3134,17.5,355.171,18,366.6762,18.5,377.8485,19,388.7059,19.5,399.265,20,409.5411,20.5,419.5486,21,429.3004,21.5,438.8089,22,448.0854,22.5,457.1406,23,465.9843,23.5,474.6259,24,483.0741,24.5,491.3369,25,499.4221,25.5,507.3368,26,515.0878,26.5,522.6815,27,530.1238,27.5,537.4206,28,544.5771,28.5,551.5984,29,558.4894,29.5,565.3354,30,572.0155)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.9907,4.5,0.96196,5,0.91446,5.5,0.84507,6,0.75865,6.5,0.66604,7,0.58329,7.5,0.5074,8,0.44544,8.5,0.39143,9,0.34373,9.5,0.30196,10,0.26639,10.5,0.23711,11,0.2169,11.5,0.20587,12,0.19828,12.5,0.1946,13,0.19259,13.5,0.19001,14,0.18717,14.5,0.18456,15,0.18373,15.5,0.1829,16,0.18264,16.5,0.18264,17,0.18264,17.5,0.18264,18,0.18264,18.5,0.18264,19,0.18264,19.5,0.18264,20,0.18264,20.5,0.18264,21,0.18264,21.5,0.18264,22,0.18264,22.5,0.18264,23,0.18264,23.5,0.18264,24,0.18264,24.5,0.18264,25,0.18264,25.5,0.18264,26,0.18264,26.5,0.18264,27,0.18264,27.5,0.18264,28,0.18264,28.5,0.18264,29,0.18264,29.5,0.18264,30,0.18264)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,1.2932e-05,2,5.1091e-05,2.5,0.00019766,3,0.00058355,3.5,0.0014094,4,0.0029575,4.5,0.0054988,5,0.0094446,5.5,0.014822,6,0.022337,6.5,0.032706,7,0.044932,7.5,0.058998,8,0.076036,8.5,0.09689,9,0.12029,9.5,0.14977,10,0.19851,10.5,0.31312,11,0.67496,11.5,1.2122,12,1.8109,12.5,2.407,13,2.9379,13.5,3.2166,14,3.3142,14.5,3.3412,15,3.3484,15.5,3.3502,16,3.3505,16.5,3.3505,17,3.3505,17.5,3.3505,18,3.3505,18.5,3.3505,19,3.3505,19.5,3.3505,20,3.3505,20.5,3.3505,21,3.3505,21.5,3.3505,22,3.3505,22.5,3.3505,23,3.3505,23.5,3.3505,24,3.3505,24.5,3.3505,25,3.3505,25.5,3.3505,26,3.3505,26.5,3.3505,27,3.3505,27.5,3.3505,28,3.3505,28.5,3.3505,29,3.3505,29.5,3.3505,30,3.3505)}
.func RTJ(Tj) {table(Tj,25,-0.0016035,35,-0.00090125,45,-0.00017123,55,0.00058656,65,0.0013721,75,0.0021855,85,0.0030266,95,0.0038955,105,0.0047922,115,0.0057166,125,0.0066689,135,0.0076489,145,0.0086567,155,0.0096922,165,0.010756,175,0.011847,275,0.022758,375,0.033669,475,0.04458,575,0.055492,675,0.066403,775,0.077314,875,0.088225,975,0.099136,1075,0.11005,1175,0.12096,1275,0.13187,1375,0.14278,1475,0.15369,1575,0.1646,1675,0.17551,1775,0.18643,1875,0.19734,1975,0.20825)}
.func VthFwd(Tj) {table(Tj,25,-0.43914,35,-0.39667,45,-0.35311,55,-0.30845,65,-0.26269,75,-0.21584,85,-0.16789,95,-0.11885,105,-0.068713,115,-0.017478,125,0.034851,135,0.088277,145,0.1428,155,0.19842,165,0.25513,175,0.31294,275,0.89102,375,1.4691,475,2.0472,575,2.6253,675,3.2034,775,3.7815,875,4.3596,975,4.9376,1075,5.5157,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.25232,-4,0.24229,-3,0.22325,-2,0.19456,-1,0.164,0,0.13989,1,0.21147,2,0.30003,3,0.22434,4,0.15657,5,0.11395,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.021964,-4,0.021343,-3,0.022789,-2,0.026566,-1,0.029405,0,0.028364,1,0.021571,2,0.018207,3,0.023692,4,0.028898,5,0.034605,6,0.041434,7,0.050252,8,0.064251,9,0.083844,10,0.09606,11,0.089444,12,0.095332,13,0.12,14,0.16964,15,0.2123,16,0.301)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0031022,2,0.089892,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rscal(Tj) {table(Tj,25,1.2485,35,1.1058,45,0.99674,55,0.92145,65,0.87989,75,0.87205,85,0.89793,95,0.95755,105,1.0509,115,1.178,125,1.3387,135,1.5333,145,1.7615,155,2.0235,165,2.3192,175,2.6486,275,5.9428,375,9.237,475,12.5312,575,15.8255,675,19.1197,775,22.4139,875,25.7081,975,29.0023,1075,32.2965,1175,35.5907,1275,38.885,1375,42.1792,1475,45.4734,1575,48.7676,1675,52.0618,1775,55.356,1875,58.6503,1975,61.9445)}
.func nscal(Tj) {table(Tj,25,1.0566,35,1.0346,45,1.017,55,1.0039,65,0.99519,75,0.99099,85,0.99125,95,0.99597,105,1.0051,115,1.0188,125,1.0369,135,1.0594,145,1.0865,155,1.1179,165,1.1539,175,1.1943,275,1.5983,375,2.0023,475,2.4063,575,2.8104,675,3.2144,775,3.6184,875,4.0224,975,4.4264,1075,4.8305,1175,5.2345,1275,5.6385,1375,6.0425,1475,6.4465,1575,6.8505,1675,7.2546,1775,7.6586,1875,8.0626,1975,8.4666)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,4.406,0.117,4.391,0.137,4.375,0.160,4.357,0.187,4.337,0.218,4.313,0.255,4.286,0.298,4.253,0.349,4.217,0.407,4.177,0.476,4.133,0.557,4.084,0.651,4.030,0.761,3.970,0.889,3.905,1.039,3.832,1.215,3.753,1.420,3.668,1.660,3.577,1.940,3.480,2.268,3.376,2.651,3.267,3.099,3.154,3.623,3.035,4.234,2.911,4.950,2.780,5.786,2.629,6.763,2.429,7.906,2.224,9.241,2.018,10.802,1.817,12.627,1.635,14.759,1.503,17.252,1.378,20.167,1.259,23.573,1.147,27.555,1.044,32.209,0.950,37.650,0.868,44.010,0.796,51.444,0.732,60.134,0.674,70.291,0.622,82.164,0.574,96.043,0.530,112.267,0.489,131.230,0.452,153.397,0.418,179.308,0.387,209.596,0.358,245.000,0.332,286.385,0.307,334.760,0.285,391.306,0.264,457.404,0.247,534.667,0.234,624.981,0.225,730.550,0.219,853.952,0.217,998.198,0.216)}

.func Cdg(V) {table(V,0.100,2.051,0.117,2.022,0.137,1.986,0.160,1.948,0.187,1.905,0.218,1.856,0.255,1.800,0.298,1.740,0.349,1.673,0.407,1.603,0.476,1.530,0.557,1.456,0.651,1.384,0.761,1.313,0.889,1.245,1.039,1.178,1.215,1.111,1.420,1.043,1.660,0.975,1.940,0.906,2.268,0.839,2.651,0.773,3.099,0.709,3.623,0.647,4.234,0.587,4.950,0.526,5.786,0.457,6.763,0.358,7.906,0.268,9.241,0.187,10.802,0.118,12.627,0.069,14.759,0.060,17.252,0.055,20.167,0.049,23.573,0.045,27.555,0.040,32.209,0.036,37.650,0.033,44.010,0.031,51.444,0.029,60.134,0.027,70.291,0.025,82.164,0.024,96.043,0.023,112.267,0.021,131.230,0.020,153.397,0.019,179.308,0.018,209.596,0.017,245.000,0.016,286.385,0.015,334.760,0.015,391.306,0.014,457.404,0.013,534.667,0.013,624.981,0.013,730.550,0.013,853.952,0.013,998.198,0.013)}

.func Cgs(V) {table(V,-5.170,7.094,-4.480,5.940,-3.789,5.691,-3.099,5.372,-2.409,5.428,-1.718,5.684,-1.028,6.099,-0.338,6.618,0.353,7.193,1.043,7.759,1.733,8.191,2.424,8.471,3.114,8.640,3.804,8.731,4.495,8.787,5.185,8.828,5.876,8.861,6.566,8.889,7.256,8.913,7.947,8.934,8.637,8.953,9.327,8.970,10.018,8.985,10.708,8.998,11.398,9.011,12.089,9.022,12.779,9.033,13.469,9.042,14.160,9.052,14.850,9.060)}


.ENDS 73

.SUBCKT 81 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,9.9493e-06,1,0.00023715,1.5,0.0014918,2,0.0093841,2.5,0.059031,3,0.23368,3.5,0.69386,4,1.6798,4.5,3.5306,5,6.5558,5.5,11.0751,6,17.5483,6.5,26.4207,7,38.0521,7.5,52.8163,8,70.6949,8.5,91.8647,9,116.2287,9.5,144.0201,10,174.5695,10.5,206.7878,11,238.2839,11.5,271.5739,12,301.7969,12.5,329.2898,13,353.0701,13.5,375.2166,14,392.2818,14.5,407.8213,15,421.4218,15.5,434.2569,16,445.8057,16.5,456.3899,17,465.9877,17.5,476.0298,18,486.9564,18.5,498.7338,19,511.3163,19.5,525.0305,20,538.4131,20.5,551.4802,21,564.2469,21.5,576.7273,22,588.9343,22.5,600.88,23,612.576,23.5,624.0327,24,635.2602,24.5,646.2679,25,657.0645,25.5,667.6584,26,678.0573,26.5,688.2687,27,698.2994,27.5,708.156,28,717.8448,28.5,727.3717,29,736.7422,29.5,746.0589,30,755.1761)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.95386,4.5,0.90772,5,0.86158,5.5,0.81544,6,0.75262,6.5,0.71716,7,0.66548,7.5,0.60065,8,0.52745,8.5,0.46142,9,0.40607,9.5,0.35933,10,0.32005,10.5,0.28552,11,0.25843,11.5,0.23519,12,0.21957,12.5,0.20915,13,0.20236,13.5,0.19763,14,0.19715,14.5,0.19666,15,0.19666,15.5,0.19666,16,0.19666,16.5,0.19666,17,0.19666,17.5,0.19666,18,0.19666,18.5,0.19666,19,0.19666,19.5,0.19666,20,0.19666,20.5,0.19666,21,0.19666,21.5,0.19666,22,0.19666,22.5,0.19666,23,0.19666,23.5,0.19666,24,0.19666,24.5,0.19666,25,0.19666,25.5,0.19666,26,0.19666,26.5,0.19666,27,0.19666,27.5,0.19666,28,0.19666,28.5,0.19666,29,0.19666,29.5,0.19666,30,0.19666)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00012485,3,0.00051407,3.5,0.0010454,4,0.002205,4.5,0.0039871,5,0.0080363,5.5,0.016973,6,0.030649,6.5,0.049861,7,0.076663,7.5,0.10829,8,0.15026,8.5,0.20444,9,0.28016,9.5,0.36853,10,0.4852,10.5,0.66336,11,0.98771,11.5,1.2976,12,1.6058,12.5,1.8795,13,2.0762,13.5,2.1097,14,2.1299,14.5,2.1308,15,2.1308,15.5,2.1308,16,2.1308,16.5,2.1308,17,2.1308,17.5,2.1308,18,2.1308,18.5,2.1308,19,2.1308,19.5,2.1308,20,2.1308,20.5,2.1308,21,2.1308,21.5,2.1308,22,2.1308,22.5,2.1308,23,2.1308,23.5,2.1308,24,2.1308,24.5,2.1308,25,2.1308,25.5,2.1308,26,2.1308,26.5,2.1308,27,2.1308,27.5,2.1308,28,2.1308,28.5,2.1308,29,2.1308,29.5,2.1308,30,2.1308)}
.func RTJ(Tj) {table(Tj,25,0.0004339,35,0.0006989,45,0.0010294,55,0.0014253,65,0.0018868,75,0.0024137,85,0.0030061,95,0.003664,105,0.0043873,115,0.0051762,125,0.0060305,135,0.0069503,145,0.0079355,155,0.0089863,165,0.010102,175,0.011284,275,0.023101,375,0.034918,475,0.046735,575,0.058552,675,0.070369,775,0.082186,875,0.094003,975,0.10582,1075,0.11764,1175,0.12945,1275,0.14127,1375,0.15309,1475,0.16491,1575,0.17672,1675,0.18854,1775,0.20036,1875,0.21217,1975,0.22399)}
.func VthFwd(Tj) {table(Tj,25,-0.6932,35,-0.59756,45,-0.50557,55,-0.41723,65,-0.33253,75,-0.25149,85,-0.17409,95,-0.10034,105,-0.030245,115,0.036204,125,0.099004,135,0.15816,145,0.21366,155,0.26551,165,0.31371,175,0.35827,275,0.80382,375,1.2494,475,1.6949,575,2.1405,675,2.586,775,3.0316,875,3.4771,975,3.9227,1075,4.3682,1175,4.8138,1275,5.2593,1375,5.7049,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.470,0.004,5.469,0.005,5.469,0.006,5.469,0.007,5.469,0.009,5.468,0.012,5.465,0.014,5.459,0.018,5.453,0.022,5.449,0.028,5.441,0.034,5.435,0.043,5.429,0.053,5.420,0.066,5.407,0.083,5.391,0.103,5.371,0.128,5.350,0.159,5.321,0.198,5.285,0.246,5.247,0.307,5.199,0.381,5.138,0.475,5.070,0.591,4.992,0.735,4.899,0.915,4.791,1.138,4.669,1.416,4.533,1.762,4.379,2.193,4.210,2.728,4.028,3.395,3.834,4.225,3.627,5.257,3.404,6.541,3.115,8.140,2.805,10.128,2.493,12.603,2.185,15.683,1.888,19.514,1.661,24.282,1.464,30.215,1.288,37.598,1.133,46.784,1.000,58.215,0.889,72.439,0.792,90.139,0.708,112.163,0.634,139.568,0.568,173.669,0.510,216.102,0.458,268.903,0.412,334.606,0.371,416.361,0.334,518.092,0.307,644.680,0.287,802.197,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.004,2.433,0.005,2.431,0.006,2.430,0.007,2.426,0.009,2.421,0.012,2.417,0.014,2.413,0.018,2.406,0.022,2.398,0.028,2.388,0.034,2.372,0.043,2.355,0.053,2.334,0.066,2.309,0.083,2.277,0.103,2.241,0.128,2.194,0.159,2.136,0.198,2.069,0.246,1.989,0.307,1.900,0.381,1.805,0.475,1.706,0.591,1.606,0.735,1.509,0.915,1.410,1.138,1.311,1.416,1.210,1.762,1.107,2.193,1.004,2.728,0.903,3.395,0.804,4.225,0.707,5.257,0.611,6.541,0.480,8.140,0.357,10.128,0.251,12.603,0.162,15.683,0.091,19.514,0.072,24.282,0.062,30.215,0.055,37.598,0.048,46.784,0.042,58.215,0.038,72.439,0.035,90.139,0.032,112.163,0.030,139.568,0.028,173.669,0.026,216.102,0.024,268.903,0.022,334.606,0.021,416.361,0.020,518.092,0.019,644.680,0.018,802.197,0.018,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.947,-3.781,7.597,-3.091,7.181,-2.401,7.198,-1.712,7.480,-1.022,7.959,-0.332,8.558,0.357,9.233,1.047,9.917,1.737,10.460,2.426,10.816,3.116,11.044,3.806,11.170,4.495,11.240,5.185,11.289,5.874,11.325,6.564,11.355,7.254,11.381,7.943,11.403,8.633,11.423,9.323,11.442,10.012,11.458,10.702,11.474,11.392,11.489,12.081,11.502,12.771,11.515,13.461,11.527,14.150,11.539,14.840,11.550)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.435253e-01
.param Rs_ideal=1.854832e-02
.ENDS 81

.SUBCKT 82 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,9.9493e-06,1,0.00023715,1.5,0.0014918,2,0.0093841,2.5,0.059031,3,0.23368,3.5,0.69386,4,1.6798,4.5,3.5306,5,6.5558,5.5,11.0751,6,17.5483,6.5,26.4207,7,38.0521,7.5,52.8163,8,70.6949,8.5,91.8647,9,116.2287,9.5,144.0201,10,174.5695,10.5,206.7878,11,238.2839,11.5,271.5739,12,301.7969,12.5,329.2898,13,353.0701,13.5,375.2166,14,392.2818,14.5,407.8213,15,421.4218,15.5,434.2569,16,445.8057,16.5,456.3899,17,465.9877,17.5,476.0298,18,486.9564,18.5,498.7338,19,511.3163,19.5,525.0305,20,538.4131,20.5,551.4802,21,564.2469,21.5,576.7273,22,588.9343,22.5,600.88,23,612.576,23.5,624.0327,24,635.2602,24.5,646.2679,25,657.0645,25.5,667.6584,26,678.0573,26.5,688.2687,27,698.2994,27.5,708.156,28,717.8448,28.5,727.3717,29,736.7422,29.5,746.0589,30,755.1761)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.95386,4.5,0.90772,5,0.86158,5.5,0.81544,6,0.75262,6.5,0.71716,7,0.66548,7.5,0.60065,8,0.52745,8.5,0.46142,9,0.40607,9.5,0.35933,10,0.32005,10.5,0.28552,11,0.25843,11.5,0.23519,12,0.21957,12.5,0.20915,13,0.20236,13.5,0.19763,14,0.19715,14.5,0.19666,15,0.19666,15.5,0.19666,16,0.19666,16.5,0.19666,17,0.19666,17.5,0.19666,18,0.19666,18.5,0.19666,19,0.19666,19.5,0.19666,20,0.19666,20.5,0.19666,21,0.19666,21.5,0.19666,22,0.19666,22.5,0.19666,23,0.19666,23.5,0.19666,24,0.19666,24.5,0.19666,25,0.19666,25.5,0.19666,26,0.19666,26.5,0.19666,27,0.19666,27.5,0.19666,28,0.19666,28.5,0.19666,29,0.19666,29.5,0.19666,30,0.19666)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00012485,3,0.00051407,3.5,0.0010454,4,0.002205,4.5,0.0039871,5,0.0080363,5.5,0.016973,6,0.030649,6.5,0.049861,7,0.076663,7.5,0.10829,8,0.15026,8.5,0.20444,9,0.28016,9.5,0.36853,10,0.4852,10.5,0.66336,11,0.98771,11.5,1.2976,12,1.6058,12.5,1.8795,13,2.0762,13.5,2.1097,14,2.1299,14.5,2.1308,15,2.1308,15.5,2.1308,16,2.1308,16.5,2.1308,17,2.1308,17.5,2.1308,18,2.1308,18.5,2.1308,19,2.1308,19.5,2.1308,20,2.1308,20.5,2.1308,21,2.1308,21.5,2.1308,22,2.1308,22.5,2.1308,23,2.1308,23.5,2.1308,24,2.1308,24.5,2.1308,25,2.1308,25.5,2.1308,26,2.1308,26.5,2.1308,27,2.1308,27.5,2.1308,28,2.1308,28.5,2.1308,29,2.1308,29.5,2.1308,30,2.1308)}
.func RTJ(Tj) {table(Tj,25,0.0004339,35,0.0006989,45,0.0010294,55,0.0014253,65,0.0018868,75,0.0024137,85,0.0030061,95,0.003664,105,0.0043873,115,0.0051762,125,0.0060305,135,0.0069503,145,0.0079355,155,0.0089863,165,0.010102,175,0.011284,275,0.023101,375,0.034918,475,0.046735,575,0.058552,675,0.070369,775,0.082186,875,0.094003,975,0.10582,1075,0.11764,1175,0.12945,1275,0.14127,1375,0.15309,1475,0.16491,1575,0.17672,1675,0.18854,1775,0.20036,1875,0.21217,1975,0.22399)}
.func VthFwd(Tj) {table(Tj,25,-0.6932,35,-0.59756,45,-0.50557,55,-0.41723,65,-0.33253,75,-0.25149,85,-0.17409,95,-0.10034,105,-0.030245,115,0.036204,125,0.099004,135,0.15816,145,0.21366,155,0.26551,165,0.31371,175,0.35827,275,0.80382,375,1.2494,475,1.6949,575,2.1405,675,2.586,775,3.0316,875,3.4771,975,3.9227,1075,4.3682,1175,4.8138,1275,5.2593,1375,5.7049,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.24353,-4,0.23381,-3,0.21596,-2,0.18835,-1,0.16013,0,0.13958,1,0.23485,2,0.27116,3,0.22193,4,0.16273,5,0.11038,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.018548,-4,0.017952,-3,0.019052,-2,0.022233,-1,0.023622,0,0.020928,1,0.013974,2,0.014135,3,0.017971,4,0.021299,5,0.026576,6,0.02804,7,0.034183,8,0.043704,9,0.050078,10,0.056007,11,0.051084,12,0.046805,13,0.046519,14,0.051157,15,0.060432,16,0.069887,17,0.076208,18,0.092229)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0066665,2,0.060819,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.1476,35,1.1036,45,1.0671,55,1.038,65,1.0165,75,1.0024,85,0.99583,95,0.99674,105,1.0051,115,1.021,125,1.0444,135,1.0753,145,1.1136,155,1.1595,165,1.2128,175,1.2736,275,1.8818,375,2.49,475,3.0982,575,3.7064,675,4.3146,775,4.9227,875,5.5309,975,6.1391,1075,6.7473,1175,7.3555,1275,7.9637,1375,8.5719,1475,9.1801,1575,9.7883,1675,10.3964,1775,11.0046,1875,11.6128,1975,12.221)}
.func nscal(Tj) {table(Tj,25,1.0094,35,1.0081,45,1.0069,55,1.0056,65,1.0044,75,1.0031,85,1.0019,95,1.0006,105,0.99937,115,0.99812,125,0.99686,135,0.99561,145,0.99435,155,0.99309,165,0.99183,175,0.99057,275,0.97797,375,0.96536,475,0.95276,575,0.94015,675,0.92755,775,0.91494,875,0.90234,975,0.88974,1075,0.87713,1175,0.86453,1275,0.85192,1375,0.83932,1475,0.82671,1575,0.81411,1675,0.8015,1775,0.7889,1875,0.7763,1975,0.76369)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.470,0.004,5.469,0.005,5.469,0.006,5.469,0.007,5.469,0.009,5.468,0.012,5.465,0.014,5.459,0.018,5.453,0.022,5.449,0.028,5.441,0.034,5.435,0.043,5.429,0.053,5.420,0.066,5.407,0.083,5.391,0.103,5.371,0.128,5.350,0.159,5.321,0.198,5.285,0.246,5.247,0.307,5.199,0.381,5.138,0.475,5.070,0.591,4.992,0.735,4.899,0.915,4.791,1.138,4.669,1.416,4.533,1.762,4.379,2.193,4.210,2.728,4.028,3.395,3.834,4.225,3.627,5.257,3.404,6.541,3.115,8.140,2.805,10.128,2.493,12.603,2.185,15.683,1.888,19.514,1.661,24.282,1.464,30.215,1.288,37.598,1.133,46.784,1.000,58.215,0.889,72.439,0.792,90.139,0.708,112.163,0.634,139.568,0.568,173.669,0.510,216.102,0.458,268.903,0.412,334.606,0.371,416.361,0.334,518.092,0.307,644.680,0.287,802.197,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.004,2.433,0.005,2.431,0.006,2.430,0.007,2.426,0.009,2.421,0.012,2.417,0.014,2.413,0.018,2.406,0.022,2.398,0.028,2.388,0.034,2.372,0.043,2.355,0.053,2.334,0.066,2.309,0.083,2.277,0.103,2.241,0.128,2.194,0.159,2.136,0.198,2.069,0.246,1.989,0.307,1.900,0.381,1.805,0.475,1.706,0.591,1.606,0.735,1.509,0.915,1.410,1.138,1.311,1.416,1.210,1.762,1.107,2.193,1.004,2.728,0.903,3.395,0.804,4.225,0.707,5.257,0.611,6.541,0.480,8.140,0.357,10.128,0.251,12.603,0.162,15.683,0.091,19.514,0.072,24.282,0.062,30.215,0.055,37.598,0.048,46.784,0.042,58.215,0.038,72.439,0.035,90.139,0.032,112.163,0.030,139.568,0.028,173.669,0.026,216.102,0.024,268.903,0.022,334.606,0.021,416.361,0.020,518.092,0.019,644.680,0.018,802.197,0.018,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.947,-3.781,7.597,-3.091,7.181,-2.401,7.198,-1.712,7.480,-1.022,7.959,-0.332,8.558,0.357,9.233,1.047,9.917,1.737,10.460,2.426,10.816,3.116,11.044,3.806,11.170,4.495,11.240,5.185,11.289,5.874,11.325,6.564,11.355,7.254,11.381,7.943,11.403,8.633,11.423,9.323,11.442,10.012,11.458,10.702,11.474,11.392,11.489,12.081,11.502,12.771,11.515,13.461,11.527,14.150,11.539,14.840,11.550)}


.ENDS 82

.SUBCKT 83 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,9.9493e-06,1,0.00023715,1.5,0.0014918,2,0.0093841,2.5,0.059031,3,0.23368,3.5,0.69386,4,1.6798,4.5,3.5306,5,6.5558,5.5,11.0751,6,17.5483,6.5,26.4207,7,38.0521,7.5,52.8163,8,70.6949,8.5,91.8647,9,116.2287,9.5,144.0201,10,174.5695,10.5,206.7878,11,238.2839,11.5,271.5739,12,301.7969,12.5,329.2898,13,353.0701,13.5,375.2166,14,392.2818,14.5,407.8213,15,421.4218,15.5,434.2569,16,445.8057,16.5,456.3899,17,465.9877,17.5,476.0298,18,486.9564,18.5,498.7338,19,511.3163,19.5,525.0305,20,538.4131,20.5,551.4802,21,564.2469,21.5,576.7273,22,588.9343,22.5,600.88,23,612.576,23.5,624.0327,24,635.2602,24.5,646.2679,25,657.0645,25.5,667.6584,26,678.0573,26.5,688.2687,27,698.2994,27.5,708.156,28,717.8448,28.5,727.3717,29,736.7422,29.5,746.0589,30,755.1761)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.95386,4.5,0.90772,5,0.86158,5.5,0.81544,6,0.75262,6.5,0.71716,7,0.66548,7.5,0.60065,8,0.52745,8.5,0.46142,9,0.40607,9.5,0.35933,10,0.32005,10.5,0.28552,11,0.25843,11.5,0.23519,12,0.21957,12.5,0.20915,13,0.20236,13.5,0.19763,14,0.19715,14.5,0.19666,15,0.19666,15.5,0.19666,16,0.19666,16.5,0.19666,17,0.19666,17.5,0.19666,18,0.19666,18.5,0.19666,19,0.19666,19.5,0.19666,20,0.19666,20.5,0.19666,21,0.19666,21.5,0.19666,22,0.19666,22.5,0.19666,23,0.19666,23.5,0.19666,24,0.19666,24.5,0.19666,25,0.19666,25.5,0.19666,26,0.19666,26.5,0.19666,27,0.19666,27.5,0.19666,28,0.19666,28.5,0.19666,29,0.19666,29.5,0.19666,30,0.19666)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00012485,3,0.00051407,3.5,0.0010454,4,0.002205,4.5,0.0039871,5,0.0080363,5.5,0.016973,6,0.030649,6.5,0.049861,7,0.076663,7.5,0.10829,8,0.15026,8.5,0.20444,9,0.28016,9.5,0.36853,10,0.4852,10.5,0.66336,11,0.98771,11.5,1.2976,12,1.6058,12.5,1.8795,13,2.0762,13.5,2.1097,14,2.1299,14.5,2.1308,15,2.1308,15.5,2.1308,16,2.1308,16.5,2.1308,17,2.1308,17.5,2.1308,18,2.1308,18.5,2.1308,19,2.1308,19.5,2.1308,20,2.1308,20.5,2.1308,21,2.1308,21.5,2.1308,22,2.1308,22.5,2.1308,23,2.1308,23.5,2.1308,24,2.1308,24.5,2.1308,25,2.1308,25.5,2.1308,26,2.1308,26.5,2.1308,27,2.1308,27.5,2.1308,28,2.1308,28.5,2.1308,29,2.1308,29.5,2.1308,30,2.1308)}
.func RTJ(Tj) {table(Tj,25,0.0004339,35,0.0006989,45,0.0010294,55,0.0014253,65,0.0018868,75,0.0024137,85,0.0030061,95,0.003664,105,0.0043873,115,0.0051762,125,0.0060305,135,0.0069503,145,0.0079355,155,0.0089863,165,0.010102,175,0.011284,275,0.023101,375,0.034918,475,0.046735,575,0.058552,675,0.070369,775,0.082186,875,0.094003,975,0.10582,1075,0.11764,1175,0.12945,1275,0.14127,1375,0.15309,1475,0.16491,1575,0.17672,1675,0.18854,1775,0.20036,1875,0.21217,1975,0.22399)}
.func VthFwd(Tj) {table(Tj,25,-0.6932,35,-0.59756,45,-0.50557,55,-0.41723,65,-0.33253,75,-0.25149,85,-0.17409,95,-0.10034,105,-0.030245,115,0.036204,125,0.099004,135,0.15816,145,0.21366,155,0.26551,165,0.31371,175,0.35827,275,0.80382,375,1.2494,475,1.6949,575,2.1405,675,2.586,775,3.0316,875,3.4771,975,3.9227,1075,4.3682,1175,4.8138,1275,5.2593,1375,5.7049,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.24353,-4,0.23381,-3,0.21596,-2,0.18835,-1,0.16013,0,0.13958,1,0.23485,2,0.27116,3,0.22193,4,0.16273,5,0.11038,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.018548,-4,0.017952,-3,0.019052,-2,0.022233,-1,0.023622,0,0.020928,1,0.013974,2,0.014135,3,0.017971,4,0.021299,5,0.026576,6,0.02804,7,0.034183,8,0.043704,9,0.050078,10,0.056007,11,0.051084,12,0.046805,13,0.046519,14,0.051157,15,0.060432,16,0.069887,17,0.076208,18,0.092229)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0066665,2,0.060819,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.1476,35,1.1036,45,1.0671,55,1.038,65,1.0165,75,1.0024,85,0.99583,95,0.99674,105,1.0051,115,1.021,125,1.0444,135,1.0753,145,1.1136,155,1.1595,165,1.2128,175,1.2736,275,1.8818,375,2.49,475,3.0982,575,3.7064,675,4.3146,775,4.9227,875,5.5309,975,6.1391,1075,6.7473,1175,7.3555,1275,7.9637,1375,8.5719,1475,9.1801,1575,9.7883,1675,10.3964,1775,11.0046,1875,11.6128,1975,12.221)}
.func nscal(Tj) {table(Tj,25,1.0094,35,1.0081,45,1.0069,55,1.0056,65,1.0044,75,1.0031,85,1.0019,95,1.0006,105,0.99937,115,0.99812,125,0.99686,135,0.99561,145,0.99435,155,0.99309,165,0.99183,175,0.99057,275,0.97797,375,0.96536,475,0.95276,575,0.94015,675,0.92755,775,0.91494,875,0.90234,975,0.88974,1075,0.87713,1175,0.86453,1275,0.85192,1375,0.83932,1475,0.82671,1575,0.81411,1675,0.8015,1775,0.7889,1875,0.7763,1975,0.76369)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.470,0.004,5.469,0.005,5.469,0.006,5.469,0.007,5.469,0.009,5.468,0.012,5.465,0.014,5.459,0.018,5.453,0.022,5.449,0.028,5.441,0.034,5.435,0.043,5.429,0.053,5.420,0.066,5.407,0.083,5.391,0.103,5.371,0.128,5.350,0.159,5.321,0.198,5.285,0.246,5.247,0.307,5.199,0.381,5.138,0.475,5.070,0.591,4.992,0.735,4.899,0.915,4.791,1.138,4.669,1.416,4.533,1.762,4.379,2.193,4.210,2.728,4.028,3.395,3.834,4.225,3.627,5.257,3.404,6.541,3.115,8.140,2.805,10.128,2.493,12.603,2.185,15.683,1.888,19.514,1.661,24.282,1.464,30.215,1.288,37.598,1.133,46.784,1.000,58.215,0.889,72.439,0.792,90.139,0.708,112.163,0.634,139.568,0.568,173.669,0.510,216.102,0.458,268.903,0.412,334.606,0.371,416.361,0.334,518.092,0.307,644.680,0.287,802.197,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.004,2.433,0.005,2.431,0.006,2.430,0.007,2.426,0.009,2.421,0.012,2.417,0.014,2.413,0.018,2.406,0.022,2.398,0.028,2.388,0.034,2.372,0.043,2.355,0.053,2.334,0.066,2.309,0.083,2.277,0.103,2.241,0.128,2.194,0.159,2.136,0.198,2.069,0.246,1.989,0.307,1.900,0.381,1.805,0.475,1.706,0.591,1.606,0.735,1.509,0.915,1.410,1.138,1.311,1.416,1.210,1.762,1.107,2.193,1.004,2.728,0.903,3.395,0.804,4.225,0.707,5.257,0.611,6.541,0.480,8.140,0.357,10.128,0.251,12.603,0.162,15.683,0.091,19.514,0.072,24.282,0.062,30.215,0.055,37.598,0.048,46.784,0.042,58.215,0.038,72.439,0.035,90.139,0.032,112.163,0.030,139.568,0.028,173.669,0.026,216.102,0.024,268.903,0.022,334.606,0.021,416.361,0.020,518.092,0.019,644.680,0.018,802.197,0.018,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.947,-3.781,7.597,-3.091,7.181,-2.401,7.198,-1.712,7.480,-1.022,7.959,-0.332,8.558,0.357,9.233,1.047,9.917,1.737,10.460,2.426,10.816,3.116,11.044,3.806,11.170,4.495,11.240,5.185,11.289,5.874,11.325,6.564,11.355,7.254,11.381,7.943,11.403,8.633,11.423,9.323,11.442,10.012,11.458,10.702,11.474,11.392,11.489,12.081,11.502,12.771,11.515,13.461,11.527,14.150,11.539,14.840,11.550)}


.ENDS 83

.SUBCKT 91 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,8.8528e-06,1,0.00018572,1.5,0.0010955,2,0.0064625,2.5,0.058224,3,0.24032,3.5,0.72017,4,1.7485,4.5,3.6809,5,6.8352,5.5,11.5482,6,18.295,6.5,27.5415,7,39.6618,7.5,55.044,8,73.6671,8.5,95.7178,9,121.0917,9.5,150.03,10,181.8349,10.5,215.3494,11,248.0853,11.5,282.6791,12,314.0891,12.5,342.6129,13,367.2983,13.5,390.3249,14,408.087,14.5,424.2684,15,438.495,15.5,451.939,16,464.0435,16.5,475.1448,17,485.2172,17.5,495.6815,18,506.9952,18.5,519.12,19,532.0043,19.5,545.9895,20,559.617,20.5,572.9047,21,585.8691,21.5,598.5254,22,610.8881,22.5,622.9704,23,634.7847,23.5,646.3428,24,657.6554,24.5,668.7329,25,679.5848,25.5,690.2202,26,700.6475,26.5,710.8748,27,720.9097,27.5,730.7593,28,740.4303,28.5,749.9291,29,759.2619,29.5,768.5374,30,777.6013)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.95396,4.5,0.90792,5,0.86188,5.5,0.81584,6,0.75355,6.5,0.71856,7,0.66736,7.5,0.60301,8,0.53033,8.5,0.46438,9,0.40905,9.5,0.36228,10,0.32295,10.5,0.28836,11,0.26125,11.5,0.23797,12,0.22234,12.5,0.212,13,0.20526,13.5,0.20057,14,0.20015,14.5,0.19974,15,0.19974,15.5,0.19974,16,0.19974,16.5,0.19974,17,0.19974,17.5,0.19974,18,0.19974,18.5,0.19974,19,0.19974,19.5,0.19974,20,0.19974,20.5,0.19974,21,0.19974,21.5,0.19974,22,0.19974,22.5,0.19974,23,0.19974,23.5,0.19974,24,0.19974,24.5,0.19974,25,0.19974,25.5,0.19974,26,0.19974,26.5,0.19974,27,0.19974,27.5,0.19974,28,0.19974,28.5,0.19974,29,0.19974,29.5,0.19974,30,0.19974)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,5.9618e-05,2.5,0.00018978,3,0.00059552,3.5,0.0011491,4,0.0023588,4.5,0.0041569,5,0.0083725,5.5,0.017667,6,0.031956,6.5,0.05204,7,0.080077,7.5,0.11321,8,0.1572,8.5,0.21398,9,0.29333,9.5,0.38599,10,0.50831,10.5,0.69574,11,1.037,11.5,1.3632,12,1.6877,12.5,1.9761,13,2.1831,13.5,2.2184,14,2.2396,14.5,2.2406,15,2.2406,15.5,2.2406,16,2.2406,16.5,2.2406,17,2.2406,17.5,2.2406,18,2.2406,18.5,2.2406,19,2.2406,19.5,2.2406,20,2.2406,20.5,2.2406,21,2.2406,21.5,2.2406,22,2.2406,22.5,2.2406,23,2.2406,23.5,2.2406,24,2.2406,24.5,2.2406,25,2.2406,25.5,2.2406,26,2.2406,26.5,2.2406,27,2.2406,27.5,2.2406,28,2.2406,28.5,2.2406,29,2.2406,29.5,2.2406,30,2.2406)}
.func RTJ(Tj) {table(Tj,25,0.00093159,35,0.0011715,45,0.0014635,55,0.0018075,65,0.0022036,75,0.0026518,85,0.003152,95,0.0037042,105,0.0043086,115,0.004965,125,0.0056734,135,0.0064339,145,0.0072465,155,0.0081111,165,0.0090278,175,0.0099966,275,0.019684,375,0.029372,475,0.039059,575,0.048747,675,0.058434,775,0.068121,875,0.077809,975,0.087496,1075,0.097184,1175,0.10687,1275,0.11656,1375,0.12625,1475,0.13593,1575,0.14562,1675,0.15531,1775,0.165,1875,0.17468,1975,0.18437)}
.func VthFwd(Tj) {table(Tj,25,-0.88859,35,-0.76143,45,-0.63956,55,-0.52299,65,-0.41172,75,-0.30574,85,-0.20507,95,-0.1097,105,-0.019619,115,0.065158,125,0.14464,135,0.21882,145,0.2877,155,0.35128,165,0.40956,175,0.46254,275,0.99238,375,1.5222,475,2.0521,575,2.5819,675,3.1117,775,3.6416,875,4.1714,975,4.7013,1075,5.2311,1175,5.7609,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.470,0.004,5.469,0.005,5.469,0.006,5.469,0.007,5.469,0.009,5.468,0.012,5.465,0.014,5.459,0.018,5.453,0.022,5.449,0.028,5.441,0.034,5.435,0.043,5.429,0.053,5.420,0.066,5.407,0.083,5.391,0.103,5.371,0.128,5.350,0.159,5.321,0.198,5.285,0.246,5.247,0.307,5.199,0.381,5.138,0.475,5.070,0.591,4.992,0.735,4.899,0.915,4.791,1.138,4.669,1.416,4.533,1.762,4.379,2.193,4.210,2.728,4.028,3.395,3.834,4.225,3.627,5.257,3.404,6.541,3.115,8.140,2.805,10.128,2.493,12.603,2.185,15.683,1.888,19.514,1.661,24.282,1.464,30.215,1.288,37.598,1.133,46.784,1.000,58.215,0.889,72.439,0.792,90.139,0.708,112.163,0.634,139.568,0.568,173.669,0.510,216.102,0.458,268.903,0.412,334.606,0.371,416.361,0.334,518.092,0.307,644.680,0.287,802.197,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.004,2.433,0.005,2.431,0.006,2.430,0.007,2.426,0.009,2.421,0.012,2.417,0.014,2.413,0.018,2.406,0.022,2.398,0.028,2.388,0.034,2.372,0.043,2.355,0.053,2.334,0.066,2.309,0.083,2.277,0.103,2.241,0.128,2.194,0.159,2.136,0.198,2.069,0.246,1.989,0.307,1.900,0.381,1.805,0.475,1.706,0.591,1.606,0.735,1.509,0.915,1.410,1.138,1.311,1.416,1.210,1.762,1.107,2.193,1.004,2.728,0.903,3.395,0.804,4.225,0.707,5.257,0.611,6.541,0.480,8.140,0.357,10.128,0.251,12.603,0.162,15.683,0.091,19.514,0.072,24.282,0.062,30.215,0.055,37.598,0.048,46.784,0.042,58.215,0.038,72.439,0.035,90.139,0.032,112.163,0.030,139.568,0.028,173.669,0.026,216.102,0.024,268.903,0.022,334.606,0.021,416.361,0.020,518.092,0.019,644.680,0.018,802.197,0.018,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.947,-3.781,7.597,-3.091,7.181,-2.401,7.198,-1.712,7.480,-1.022,7.959,-0.332,8.558,0.357,9.233,1.047,9.917,1.737,10.460,2.426,10.816,3.116,11.044,3.806,11.170,4.495,11.240,5.185,11.289,5.874,11.325,6.564,11.355,7.254,11.381,7.943,11.403,8.633,11.423,9.323,11.442,10.012,11.458,10.702,11.474,11.392,11.489,12.081,11.502,12.771,11.515,13.461,11.527,14.150,11.539,14.840,11.550)}


.param Is_ideal=1.000000e-05
.param n_ideal=2.423884e-01
.param Rs_ideal=1.807860e-02
.ENDS 91

.SUBCKT 92 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,8.8528e-06,1,0.00018572,1.5,0.0010955,2,0.0064625,2.5,0.058224,3,0.24032,3.5,0.72017,4,1.7485,4.5,3.6809,5,6.8352,5.5,11.5482,6,18.295,6.5,27.5415,7,39.6618,7.5,55.044,8,73.6671,8.5,95.7178,9,121.0917,9.5,150.03,10,181.8349,10.5,215.3494,11,248.0853,11.5,282.6791,12,314.0891,12.5,342.6129,13,367.2983,13.5,390.3249,14,408.087,14.5,424.2684,15,438.495,15.5,451.939,16,464.0435,16.5,475.1448,17,485.2172,17.5,495.6815,18,506.9952,18.5,519.12,19,532.0043,19.5,545.9895,20,559.617,20.5,572.9047,21,585.8691,21.5,598.5254,22,610.8881,22.5,622.9704,23,634.7847,23.5,646.3428,24,657.6554,24.5,668.7329,25,679.5848,25.5,690.2202,26,700.6475,26.5,710.8748,27,720.9097,27.5,730.7593,28,740.4303,28.5,749.9291,29,759.2619,29.5,768.5374,30,777.6013)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.95396,4.5,0.90792,5,0.86188,5.5,0.81584,6,0.75355,6.5,0.71856,7,0.66736,7.5,0.60301,8,0.53033,8.5,0.46438,9,0.40905,9.5,0.36228,10,0.32295,10.5,0.28836,11,0.26125,11.5,0.23797,12,0.22234,12.5,0.212,13,0.20526,13.5,0.20057,14,0.20015,14.5,0.19974,15,0.19974,15.5,0.19974,16,0.19974,16.5,0.19974,17,0.19974,17.5,0.19974,18,0.19974,18.5,0.19974,19,0.19974,19.5,0.19974,20,0.19974,20.5,0.19974,21,0.19974,21.5,0.19974,22,0.19974,22.5,0.19974,23,0.19974,23.5,0.19974,24,0.19974,24.5,0.19974,25,0.19974,25.5,0.19974,26,0.19974,26.5,0.19974,27,0.19974,27.5,0.19974,28,0.19974,28.5,0.19974,29,0.19974,29.5,0.19974,30,0.19974)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,5.9618e-05,2.5,0.00018978,3,0.00059552,3.5,0.0011491,4,0.0023588,4.5,0.0041569,5,0.0083725,5.5,0.017667,6,0.031956,6.5,0.05204,7,0.080077,7.5,0.11321,8,0.1572,8.5,0.21398,9,0.29333,9.5,0.38599,10,0.50831,10.5,0.69574,11,1.037,11.5,1.3632,12,1.6877,12.5,1.9761,13,2.1831,13.5,2.2184,14,2.2396,14.5,2.2406,15,2.2406,15.5,2.2406,16,2.2406,16.5,2.2406,17,2.2406,17.5,2.2406,18,2.2406,18.5,2.2406,19,2.2406,19.5,2.2406,20,2.2406,20.5,2.2406,21,2.2406,21.5,2.2406,22,2.2406,22.5,2.2406,23,2.2406,23.5,2.2406,24,2.2406,24.5,2.2406,25,2.2406,25.5,2.2406,26,2.2406,26.5,2.2406,27,2.2406,27.5,2.2406,28,2.2406,28.5,2.2406,29,2.2406,29.5,2.2406,30,2.2406)}
.func RTJ(Tj) {table(Tj,25,0.00093159,35,0.0011715,45,0.0014635,55,0.0018075,65,0.0022036,75,0.0026518,85,0.003152,95,0.0037042,105,0.0043086,115,0.004965,125,0.0056734,135,0.0064339,145,0.0072465,155,0.0081111,165,0.0090278,175,0.0099966,275,0.019684,375,0.029372,475,0.039059,575,0.048747,675,0.058434,775,0.068121,875,0.077809,975,0.087496,1075,0.097184,1175,0.10687,1275,0.11656,1375,0.12625,1475,0.13593,1575,0.14562,1675,0.15531,1775,0.165,1875,0.17468,1975,0.18437)}
.func VthFwd(Tj) {table(Tj,25,-0.88859,35,-0.76143,45,-0.63956,55,-0.52299,65,-0.41172,75,-0.30574,85,-0.20507,95,-0.1097,105,-0.019619,115,0.065158,125,0.14464,135,0.21882,145,0.2877,155,0.35128,165,0.40956,175,0.46254,275,0.99238,375,1.5222,475,2.0521,575,2.5819,675,3.1117,775,3.6416,875,4.1714,975,4.7013,1075,5.2311,1175,5.7609,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.24239,-4,0.23273,-3,0.21491,-2,0.18732,-1,0.1595,0,0.1394,1,0.23576,2,0.26794,3,0.21851,4,0.15974,5,0.1076,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.018079,-4,0.017481,-3,0.01856,-2,0.021651,-1,0.022776,0,0.019919,1,0.013344,2,0.013765,3,0.017615,4,0.020839,5,0.026009,6,0.026731,7,0.032392,8,0.041257,9,0.04712,10,0.052088,11,0.047037,12,0.042735,13,0.042819,14,0.04676,15,0.055615,16,0.063856,17,0.068817,18,0.082985)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0071242,2,0.06029,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.1783,35,1.1334,45,1.0951,55,1.0632,65,1.0378,75,1.0189,85,1.0065,95,1.0005,105,1.0011,115,1.0081,125,1.0216,135,1.0415,145,1.068,155,1.1009,165,1.1403,175,1.1862,275,1.6449,375,2.1037,475,2.5625,575,3.0212,675,3.48,775,3.9388,875,4.3976,975,4.8563,1075,5.3151,1175,5.7739,1275,6.2326,1375,6.6914,1475,7.1502,1575,7.6089,1675,8.0677,1775,8.5265,1875,8.9853,1975,9.444)}
.func nscal(Tj) {table(Tj,25,1.0101,35,1.0087,45,1.0074,55,1.006,65,1.0047,75,1.0033,85,1.002,95,1.0007,105,0.99933,115,0.998,125,0.99667,135,0.99535,145,0.99403,155,0.99271,165,0.9914,175,0.99008,275,0.97697,375,0.96386,475,0.95075,575,0.93763,675,0.92452,775,0.91141,875,0.8983,975,0.88518,1075,0.87207,1175,0.85896,1275,0.84585,1375,0.83273,1475,0.81962,1575,0.80651,1675,0.7934,1775,0.78028,1875,0.76717,1975,0.75406)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.470,0.004,5.469,0.005,5.469,0.006,5.469,0.007,5.469,0.009,5.468,0.012,5.465,0.014,5.459,0.018,5.453,0.022,5.449,0.028,5.441,0.034,5.435,0.043,5.429,0.053,5.420,0.066,5.407,0.083,5.391,0.103,5.371,0.128,5.350,0.159,5.321,0.198,5.285,0.246,5.247,0.307,5.199,0.381,5.138,0.475,5.070,0.591,4.992,0.735,4.899,0.915,4.791,1.138,4.669,1.416,4.533,1.762,4.379,2.193,4.210,2.728,4.028,3.395,3.834,4.225,3.627,5.257,3.404,6.541,3.115,8.140,2.805,10.128,2.493,12.603,2.185,15.683,1.888,19.514,1.661,24.282,1.464,30.215,1.288,37.598,1.133,46.784,1.000,58.215,0.889,72.439,0.792,90.139,0.708,112.163,0.634,139.568,0.568,173.669,0.510,216.102,0.458,268.903,0.412,334.606,0.371,416.361,0.334,518.092,0.307,644.680,0.287,802.197,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.004,2.433,0.005,2.431,0.006,2.430,0.007,2.426,0.009,2.421,0.012,2.417,0.014,2.413,0.018,2.406,0.022,2.398,0.028,2.388,0.034,2.372,0.043,2.355,0.053,2.334,0.066,2.309,0.083,2.277,0.103,2.241,0.128,2.194,0.159,2.136,0.198,2.069,0.246,1.989,0.307,1.900,0.381,1.805,0.475,1.706,0.591,1.606,0.735,1.509,0.915,1.410,1.138,1.311,1.416,1.210,1.762,1.107,2.193,1.004,2.728,0.903,3.395,0.804,4.225,0.707,5.257,0.611,6.541,0.480,8.140,0.357,10.128,0.251,12.603,0.162,15.683,0.091,19.514,0.072,24.282,0.062,30.215,0.055,37.598,0.048,46.784,0.042,58.215,0.038,72.439,0.035,90.139,0.032,112.163,0.030,139.568,0.028,173.669,0.026,216.102,0.024,268.903,0.022,334.606,0.021,416.361,0.020,518.092,0.019,644.680,0.018,802.197,0.018,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.947,-3.781,7.597,-3.091,7.181,-2.401,7.198,-1.712,7.480,-1.022,7.959,-0.332,8.558,0.357,9.233,1.047,9.917,1.737,10.460,2.426,10.816,3.116,11.044,3.806,11.170,4.495,11.240,5.185,11.289,5.874,11.325,6.564,11.355,7.254,11.381,7.943,11.403,8.633,11.423,9.323,11.442,10.012,11.458,10.702,11.474,11.392,11.489,12.081,11.502,12.771,11.515,13.461,11.527,14.150,11.539,14.840,11.550)}


.ENDS 92

.SUBCKT 93 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,8.8528e-06,1,0.00018572,1.5,0.0010955,2,0.0064625,2.5,0.058224,3,0.24032,3.5,0.72017,4,1.7485,4.5,3.6809,5,6.8352,5.5,11.5482,6,18.295,6.5,27.5415,7,39.6618,7.5,55.044,8,73.6671,8.5,95.7178,9,121.0917,9.5,150.03,10,181.8349,10.5,215.3494,11,248.0853,11.5,282.6791,12,314.0891,12.5,342.6129,13,367.2983,13.5,390.3249,14,408.087,14.5,424.2684,15,438.495,15.5,451.939,16,464.0435,16.5,475.1448,17,485.2172,17.5,495.6815,18,506.9952,18.5,519.12,19,532.0043,19.5,545.9895,20,559.617,20.5,572.9047,21,585.8691,21.5,598.5254,22,610.8881,22.5,622.9704,23,634.7847,23.5,646.3428,24,657.6554,24.5,668.7329,25,679.5848,25.5,690.2202,26,700.6475,26.5,710.8748,27,720.9097,27.5,730.7593,28,740.4303,28.5,749.9291,29,759.2619,29.5,768.5374,30,777.6013)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.95396,4.5,0.90792,5,0.86188,5.5,0.81584,6,0.75355,6.5,0.71856,7,0.66736,7.5,0.60301,8,0.53033,8.5,0.46438,9,0.40905,9.5,0.36228,10,0.32295,10.5,0.28836,11,0.26125,11.5,0.23797,12,0.22234,12.5,0.212,13,0.20526,13.5,0.20057,14,0.20015,14.5,0.19974,15,0.19974,15.5,0.19974,16,0.19974,16.5,0.19974,17,0.19974,17.5,0.19974,18,0.19974,18.5,0.19974,19,0.19974,19.5,0.19974,20,0.19974,20.5,0.19974,21,0.19974,21.5,0.19974,22,0.19974,22.5,0.19974,23,0.19974,23.5,0.19974,24,0.19974,24.5,0.19974,25,0.19974,25.5,0.19974,26,0.19974,26.5,0.19974,27,0.19974,27.5,0.19974,28,0.19974,28.5,0.19974,29,0.19974,29.5,0.19974,30,0.19974)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,5.9618e-05,2.5,0.00018978,3,0.00059552,3.5,0.0011491,4,0.0023588,4.5,0.0041569,5,0.0083725,5.5,0.017667,6,0.031956,6.5,0.05204,7,0.080077,7.5,0.11321,8,0.1572,8.5,0.21398,9,0.29333,9.5,0.38599,10,0.50831,10.5,0.69574,11,1.037,11.5,1.3632,12,1.6877,12.5,1.9761,13,2.1831,13.5,2.2184,14,2.2396,14.5,2.2406,15,2.2406,15.5,2.2406,16,2.2406,16.5,2.2406,17,2.2406,17.5,2.2406,18,2.2406,18.5,2.2406,19,2.2406,19.5,2.2406,20,2.2406,20.5,2.2406,21,2.2406,21.5,2.2406,22,2.2406,22.5,2.2406,23,2.2406,23.5,2.2406,24,2.2406,24.5,2.2406,25,2.2406,25.5,2.2406,26,2.2406,26.5,2.2406,27,2.2406,27.5,2.2406,28,2.2406,28.5,2.2406,29,2.2406,29.5,2.2406,30,2.2406)}
.func RTJ(Tj) {table(Tj,25,0.00093159,35,0.0011715,45,0.0014635,55,0.0018075,65,0.0022036,75,0.0026518,85,0.003152,95,0.0037042,105,0.0043086,115,0.004965,125,0.0056734,135,0.0064339,145,0.0072465,155,0.0081111,165,0.0090278,175,0.0099966,275,0.019684,375,0.029372,475,0.039059,575,0.048747,675,0.058434,775,0.068121,875,0.077809,975,0.087496,1075,0.097184,1175,0.10687,1275,0.11656,1375,0.12625,1475,0.13593,1575,0.14562,1675,0.15531,1775,0.165,1875,0.17468,1975,0.18437)}
.func VthFwd(Tj) {table(Tj,25,-0.88859,35,-0.76143,45,-0.63956,55,-0.52299,65,-0.41172,75,-0.30574,85,-0.20507,95,-0.1097,105,-0.019619,115,0.065158,125,0.14464,135,0.21882,145,0.2877,155,0.35128,165,0.40956,175,0.46254,275,0.99238,375,1.5222,475,2.0521,575,2.5819,675,3.1117,775,3.6416,875,4.1714,975,4.7013,1075,5.2311,1175,5.7609,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.24239,-4,0.23273,-3,0.21491,-2,0.18732,-1,0.1595,0,0.1394,1,0.23576,2,0.26794,3,0.21851,4,0.15974,5,0.1076,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.018079,-4,0.017481,-3,0.01856,-2,0.021651,-1,0.022776,0,0.019919,1,0.013344,2,0.013765,3,0.017615,4,0.020839,5,0.026009,6,0.026731,7,0.032392,8,0.041257,9,0.04712,10,0.052088,11,0.047037,12,0.042735,13,0.042819,14,0.04676,15,0.055615,16,0.063856,17,0.068817,18,0.082985)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0071242,2,0.06029,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,25,1.1783,35,1.1334,45,1.0951,55,1.0632,65,1.0378,75,1.0189,85,1.0065,95,1.0005,105,1.0011,115,1.0081,125,1.0216,135,1.0415,145,1.068,155,1.1009,165,1.1403,175,1.1862,275,1.6449,375,2.1037,475,2.5625,575,3.0212,675,3.48,775,3.9388,875,4.3976,975,4.8563,1075,5.3151,1175,5.7739,1275,6.2326,1375,6.6914,1475,7.1502,1575,7.6089,1675,8.0677,1775,8.5265,1875,8.9853,1975,9.444)}
.func nscal(Tj) {table(Tj,25,1.0101,35,1.0087,45,1.0074,55,1.006,65,1.0047,75,1.0033,85,1.002,95,1.0007,105,0.99933,115,0.998,125,0.99667,135,0.99535,145,0.99403,155,0.99271,165,0.9914,175,0.99008,275,0.97697,375,0.96386,475,0.95075,575,0.93763,675,0.92452,775,0.91141,875,0.8983,975,0.88518,1075,0.87207,1175,0.85896,1275,0.84585,1375,0.83273,1475,0.81962,1575,0.80651,1675,0.7934,1775,0.78028,1875,0.76717,1975,0.75406)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.470,0.004,5.469,0.005,5.469,0.006,5.469,0.007,5.469,0.009,5.468,0.012,5.465,0.014,5.459,0.018,5.453,0.022,5.449,0.028,5.441,0.034,5.435,0.043,5.429,0.053,5.420,0.066,5.407,0.083,5.391,0.103,5.371,0.128,5.350,0.159,5.321,0.198,5.285,0.246,5.247,0.307,5.199,0.381,5.138,0.475,5.070,0.591,4.992,0.735,4.899,0.915,4.791,1.138,4.669,1.416,4.533,1.762,4.379,2.193,4.210,2.728,4.028,3.395,3.834,4.225,3.627,5.257,3.404,6.541,3.115,8.140,2.805,10.128,2.493,12.603,2.185,15.683,1.888,19.514,1.661,24.282,1.464,30.215,1.288,37.598,1.133,46.784,1.000,58.215,0.889,72.439,0.792,90.139,0.708,112.163,0.634,139.568,0.568,173.669,0.510,216.102,0.458,268.903,0.412,334.606,0.371,416.361,0.334,518.092,0.307,644.680,0.287,802.197,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.004,2.433,0.005,2.431,0.006,2.430,0.007,2.426,0.009,2.421,0.012,2.417,0.014,2.413,0.018,2.406,0.022,2.398,0.028,2.388,0.034,2.372,0.043,2.355,0.053,2.334,0.066,2.309,0.083,2.277,0.103,2.241,0.128,2.194,0.159,2.136,0.198,2.069,0.246,1.989,0.307,1.900,0.381,1.805,0.475,1.706,0.591,1.606,0.735,1.509,0.915,1.410,1.138,1.311,1.416,1.210,1.762,1.107,2.193,1.004,2.728,0.903,3.395,0.804,4.225,0.707,5.257,0.611,6.541,0.480,8.140,0.357,10.128,0.251,12.603,0.162,15.683,0.091,19.514,0.072,24.282,0.062,30.215,0.055,37.598,0.048,46.784,0.042,58.215,0.038,72.439,0.035,90.139,0.032,112.163,0.030,139.568,0.028,173.669,0.026,216.102,0.024,268.903,0.022,334.606,0.021,416.361,0.020,518.092,0.019,644.680,0.018,802.197,0.018,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.947,-3.781,7.597,-3.091,7.181,-2.401,7.198,-1.712,7.480,-1.022,7.959,-0.332,8.558,0.357,9.233,1.047,9.917,1.737,10.460,2.426,10.816,3.116,11.044,3.806,11.170,4.495,11.240,5.185,11.289,5.874,11.325,6.564,11.355,7.254,11.381,7.943,11.403,8.633,11.423,9.323,11.442,10.012,11.458,10.702,11.474,11.392,11.489,12.081,11.502,12.771,11.515,13.461,11.527,14.150,11.539,14.840,11.550)}


.ENDS 93

.SUBCKT 101 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
EVRev Rev 0 Value {0}
*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.0914e-05,1,0.00028773,1.5,0.001904,2,0.012599,2.5,0.083375,3,0.32481,3.5,0.94672,4,2.308,4.5,4.8094,5,8.8985,5.5,15.2195,6,24.3565,6.5,37.0528,7,53.0202,7.5,72.7562,8,96.6349,8.5,124.376,9,157.2032,9.5,191.8396,10,223.8417,10.5,252.3274,11,276.1886,11.5,292.7447,12,305.1887,12.5,316.4007,13,326.0315,13.5,334.5839,14,342.1513,14.5,348.6404,15,354.6325,15.5,360.6563,16,365.4444,16.5,369.7968,17,373.5539,17.5,377.0205,18,379.7049,18.5,382.9068,19,386.0339,19.5,389.2545,20,392.2068,20.5,394.9176,21,397.4102,21.5,399.7058,22,401.8229,22.5,403.7784,23,405.587,23.5,407.262,24,408.8154,24.5,410.2579,25,411.5991,25.5,412.8476,26,414.0112,26.5,415.097,27,416.1113,27.5,417.0599,28,417.9479,28.5,418.7801,29,419.5608,29.5,420.3231,30,421.0236)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,0.96775,4,0.90104,4.5,0.81962,5,0.72721,5.5,0.6186,6,0.52876,6.5,0.45877,7,0.40017,7.5,0.34483,8,0.29857,8.5,0.25977,9,0.22812,9.5,0.19781,10,0.17521,10.5,0.15974,11,0.15028,11.5,0.14829,12,0.14829,12.5,0.14829,13,0.14829,13.5,0.14829,14,0.14829,14.5,0.14829,15,0.14829,15.5,0.14829,16,0.14829,16.5,0.14829,17,0.14829,17.5,0.14829,18,0.14829,18.5,0.14829,19,0.14829,19.5,0.14829,20,0.14829,20.5,0.14829,21,0.14829,21.5,0.14829,22,0.14829,22.5,0.14829,23,0.14829,23.5,0.14829,24,0.14829,24.5,0.14829,25,0.14829,25.5,0.14829,26,0.14829,26.5,0.14829,27,0.14829,27.5,0.14829,28,0.14829,28.5,0.14829,29,0.14829,29.5,0.14829,30,0.14829)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00027647,3,0.00098767,3.5,0.0024781,4,0.0048841,4.5,0.0089764,5,0.015912,5.5,0.026263,6,0.040952,6.5,0.059176,7,0.087372,7.5,0.12435,8,0.17298,8.5,0.23532,9,0.29505,9.5,0.34481,10,0.38267,10.5,0.40503,11,0.40856,11.5,0.41025,12,0.41025,12.5,0.41025,13,0.41025,13.5,0.41025,14,0.41025,14.5,0.41025,15,0.41025,15.5,0.41025,16,0.41025,16.5,0.41025,17,0.41025,17.5,0.41025,18,0.41025,18.5,0.41025,19,0.41025,19.5,0.41025,20,0.41025,20.5,0.41025,21,0.41025,21.5,0.41025,22,0.41025,22.5,0.41025,23,0.41025,23.5,0.41025,24,0.41025,24.5,0.41025,25,0.41025,25.5,0.41025,26,0.41025,26.5,0.41025,27,0.41025,27.5,0.41025,28,0.41025,28.5,0.41025,29,0.41025,29.5,0.41025,30,0.41025)}
.func RTJ(Tj) {table(Tj,-40,0.0020757,-30,0.0025294,-20,0.003233,-10,0.0041865,0,0.0053899,10,0.0068433,20,0.0085465,30,0.0105,40,0.012703,50,0.015156,60,0.017859,70,0.020811,80,0.024014,90,0.027467,100,0.031169,110,0.035122,120,0.039324,130,0.043776,140,0.048478,150,0.053431,160,0.058633,170,0.064084,180,0.069786,190,0.075738,200,0.08194,300,0.14396,400,0.20597,500,0.26799,600,0.33,700,0.39202,800,0.45404,900,0.51605,1000,0.57807,1100,0.64009,1200,0.7021,1300,0.76412,1400,0.82613,1500,0.88815,1600,0.95017,1700,1.0122,1800,1.0742,1900,1.1362,2000,1.1982)}
.func VthFwd(Tj) {table(Tj,-40,-2.1829,-30,-1.9901,-20,-1.8036,-10,-1.6233,0,-1.4493,10,-1.2816,20,-1.1201,30,-0.96498,40,-0.8161,50,-0.6735,60,-0.53718,70,-0.40713,80,-0.28336,90,-0.16587,100,-0.054663,110,0.050269,120,0.14892,130,0.2413,140,0.3274,150,0.40722,160,0.48076,170,0.54802,180,0.609,190,0.66371,200,0.71214,300,1.1964,400,1.6807,500,2.165,600,2.6492,700,3.1335,800,3.6178,900,4.1021,1000,4.5864,1100,5.0706,1200,5.5549,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.039,3.865,0.047,3.869,0.057,3.856,0.068,3.848,0.082,3.851,0.099,3.844,0.119,3.844,0.144,3.839,0.173,3.822,0.208,3.788,0.251,3.765,0.302,3.724,0.364,3.682,0.439,3.651,0.528,3.613,0.636,3.555,0.767,3.498,0.923,3.433,1.112,3.352,1.340,3.264,1.614,3.166,1.944,3.063,2.342,2.952,2.821,2.832,3.399,2.705,4.094,2.571,4.932,2.428,5.941,2.261,7.156,2.061,8.620,1.858,10.384,1.654,12.509,1.455,15.068,1.277,18.151,1.124,21.864,0.976,26.338,0.838,31.727,0.716,38.218,0.611,46.038,0.530,55.457,0.468,66.804,0.417,80.472,0.373,96.936,0.335,116.770,0.301,140.661,0.272,169.440,0.245,204.108,0.222,245.869,0.201,296.174,0.182,356.771,0.165,429.767,0.150,517.698,0.136,623.620,0.123,751.213,0.112,904.913,0.103,1090.059,0.095,1313.087,0.088,1581.746,0.082,1905.374,0.076,2295.216,0.070)}

.func Cdg(V) {table(V,0.039,2.969,0.047,2.947,0.057,2.920,0.068,2.889,0.082,2.850,0.099,2.801,0.119,2.746,0.144,2.681,0.173,2.608,0.208,2.529,0.251,2.433,0.302,2.328,0.364,2.211,0.439,2.082,0.528,1.950,0.636,1.826,0.767,1.705,0.923,1.590,1.112,1.480,1.340,1.372,1.614,1.265,1.944,1.157,2.342,1.051,2.821,0.948,3.399,0.848,4.094,0.752,4.932,0.656,5.941,0.548,7.156,0.426,8.620,0.320,10.384,0.229,12.509,0.156,15.068,0.113,18.151,0.099,21.864,0.087,26.338,0.075,31.727,0.064,38.218,0.055,46.038,0.048,55.457,0.044,66.804,0.040,80.472,0.038,96.936,0.035,116.770,0.033,140.661,0.031,169.440,0.029,204.108,0.028,245.869,0.026,296.174,0.025,356.771,0.024,429.767,0.023,517.698,0.022,623.620,0.021,751.213,0.020,904.913,0.019,1090.059,0.019,1313.087,0.018,1581.746,0.018,1905.374,0.018,2295.216,0.017)}

.func Cgs(V) {table(V,-8.870,6.940,-8.076,5.087,-7.282,4.724,-6.489,4.243,-5.695,4.456,-4.901,4.990,-4.107,5.677,-3.313,6.431,-2.520,7.177,-1.726,7.780,-0.932,8.125,-0.138,8.313,0.656,8.408,1.449,8.461,2.243,8.497,3.037,8.524,3.831,8.546,4.624,8.564,5.418,8.579,6.212,8.592,7.006,8.604,7.800,8.614,8.593,8.624,9.387,8.635,10.181,8.643,10.975,8.651,11.769,8.659,12.562,8.666,13.356,8.673,14.150,8.679)}


.param Is_ideal=9.999998e-06
.param n_ideal=2.636325e-01
.param Rs_ideal=4.626250e-02
.ENDS 101

.SUBCKT 102 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
*GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*uplim(Is(V(G,S))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nn(V(G,S))*nscal(V(Tj))))),1e5,1)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.0914e-05,1,0.00028773,1.5,0.001904,2,0.012599,2.5,0.083375,3,0.32481,3.5,0.94672,4,2.308,4.5,4.8094,5,8.8985,5.5,15.2195,6,24.3565,6.5,37.0528,7,53.0202,7.5,72.7562,8,96.6349,8.5,124.376,9,157.2032,9.5,191.8396,10,223.8417,10.5,252.3274,11,276.1886,11.5,292.7447,12,305.1887,12.5,316.4007,13,326.0315,13.5,334.5839,14,342.1513,14.5,348.6404,15,354.6325,15.5,360.6563,16,365.4444,16.5,369.7968,17,373.5539,17.5,377.0205,18,379.7049,18.5,382.9068,19,386.0339,19.5,389.2545,20,392.2068,20.5,394.9176,21,397.4102,21.5,399.7058,22,401.8229,22.5,403.7784,23,405.587,23.5,407.262,24,408.8154,24.5,410.2579,25,411.5991,25.5,412.8476,26,414.0112,26.5,415.097,27,416.1113,27.5,417.0599,28,417.9479,28.5,418.7801,29,419.5608,29.5,420.3231,30,421.0236)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,0.96775,4,0.90104,4.5,0.81962,5,0.72721,5.5,0.6186,6,0.52876,6.5,0.45877,7,0.40017,7.5,0.34483,8,0.29857,8.5,0.25977,9,0.22812,9.5,0.19781,10,0.17521,10.5,0.15974,11,0.15028,11.5,0.14829,12,0.14829,12.5,0.14829,13,0.14829,13.5,0.14829,14,0.14829,14.5,0.14829,15,0.14829,15.5,0.14829,16,0.14829,16.5,0.14829,17,0.14829,17.5,0.14829,18,0.14829,18.5,0.14829,19,0.14829,19.5,0.14829,20,0.14829,20.5,0.14829,21,0.14829,21.5,0.14829,22,0.14829,22.5,0.14829,23,0.14829,23.5,0.14829,24,0.14829,24.5,0.14829,25,0.14829,25.5,0.14829,26,0.14829,26.5,0.14829,27,0.14829,27.5,0.14829,28,0.14829,28.5,0.14829,29,0.14829,29.5,0.14829,30,0.14829)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00027647,3,0.00098767,3.5,0.0024781,4,0.0048841,4.5,0.0089764,5,0.015912,5.5,0.026263,6,0.040952,6.5,0.059176,7,0.087372,7.5,0.12435,8,0.17298,8.5,0.23532,9,0.29505,9.5,0.34481,10,0.38267,10.5,0.40503,11,0.40856,11.5,0.41025,12,0.41025,12.5,0.41025,13,0.41025,13.5,0.41025,14,0.41025,14.5,0.41025,15,0.41025,15.5,0.41025,16,0.41025,16.5,0.41025,17,0.41025,17.5,0.41025,18,0.41025,18.5,0.41025,19,0.41025,19.5,0.41025,20,0.41025,20.5,0.41025,21,0.41025,21.5,0.41025,22,0.41025,22.5,0.41025,23,0.41025,23.5,0.41025,24,0.41025,24.5,0.41025,25,0.41025,25.5,0.41025,26,0.41025,26.5,0.41025,27,0.41025,27.5,0.41025,28,0.41025,28.5,0.41025,29,0.41025,29.5,0.41025,30,0.41025)}
.func RTJ(Tj) {table(Tj,-40,0.0020757,-30,0.0025294,-20,0.003233,-10,0.0041865,0,0.0053899,10,0.0068433,20,0.0085465,30,0.0105,40,0.012703,50,0.015156,60,0.017859,70,0.020811,80,0.024014,90,0.027467,100,0.031169,110,0.035122,120,0.039324,130,0.043776,140,0.048478,150,0.053431,160,0.058633,170,0.064084,180,0.069786,190,0.075738,200,0.08194,300,0.14396,400,0.20597,500,0.26799,600,0.33,700,0.39202,800,0.45404,900,0.51605,1000,0.57807,1100,0.64009,1200,0.7021,1300,0.76412,1400,0.82613,1500,0.88815,1600,0.95017,1700,1.0122,1800,1.0742,1900,1.1362,2000,1.1982)}
.func VthFwd(Tj) {table(Tj,-40,-2.1829,-30,-1.9901,-20,-1.8036,-10,-1.6233,0,-1.4493,10,-1.2816,20,-1.1201,30,-0.96498,40,-0.8161,50,-0.6735,60,-0.53718,70,-0.40713,80,-0.28336,90,-0.16587,100,-0.054663,110,0.050269,120,0.14892,130,0.2413,140,0.3274,150,0.40722,160,0.48076,170,0.54802,180,0.609,190,0.66371,200,0.71214,300,1.1964,400,1.6807,500,2.165,600,2.6492,700,3.1335,800,3.6178,900,4.1021,1000,4.5864,1100,5.0706,1200,5.5549,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.26363,-4,0.25118,-3,0.22843,-2,0.19765,-1,0.16684,0,0.14491,1,0.20942,2,0.25233,3,0.2461,4,0.19356,5,0.17409,6,0.16742,7,0.18264,8,0.18798,9,0.19093,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.046263,-4,0.046819,-3,0.050023,-2,0.054574,-1,0.056965,0,0.054402,1,0.04801,2,0.047739,3,0.050706,4,0.059681,5,0.077974,6,0.11398,7,0.18769,8,0.3181,9,0.56969,10,0.72457,11,0.65574,12,0.80741,13,1.0022,14,1.1772,15,1.2982,16,1.4426,17,1.4586,18,1.4787)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0019449,2,0.029775,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,0.65905,-30,0.66296,-20,0.67002,-10,0.68023,0,0.69358,10,0.71007,20,0.72971,30,0.75249,40,0.77841,50,0.80748,60,0.8397,70,0.87506,80,0.91356,90,0.95521,100,1,110,1.0479,120,1.099,130,1.1532,140,1.2106,150,1.2711,160,1.3348,170,1.4016,180,1.4715,190,1.5446,200,1.6208,300,2.3832,400,3.1455,500,3.9079,600,4.6702,700,5.4325,800,6.1949,900,6.9572,1000,7.7196,1100,8.4819,1200,9.2442,1300,10.0066,1400,10.7689,1500,11.5313,1600,12.2936,1700,13.0559,1800,13.8183,1900,14.5806,2000,15.343)}
.func nscal(Tj) {table(Tj,-40,1.2004,-30,1.1724,-20,1.1465,-10,1.1227,0,1.101,10,1.0814,20,1.064,30,1.0486,40,1.0353,50,1.0242,60,1.0151,70,1.0082,80,1.0034,90,1.0006,100,1,110,1.0015,120,1.0051,130,1.0108,140,1.0186,150,1.0285,160,1.0405,170,1.0546,180,1.0709,190,1.0892,200,1.1096,300,1.3141,400,1.5185,500,1.723,600,1.9274,700,2.1319,800,2.3363,900,2.5408,1000,2.7452,1100,2.9496,1200,3.1541,1300,3.3585,1400,3.563,1500,3.7674,1600,3.9719,1700,4.1763,1800,4.3808,1900,4.5852,2000,4.7896)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.039,3.865,0.047,3.869,0.057,3.856,0.068,3.848,0.082,3.851,0.099,3.844,0.119,3.844,0.144,3.839,0.173,3.822,0.208,3.788,0.251,3.765,0.302,3.724,0.364,3.682,0.439,3.651,0.528,3.613,0.636,3.555,0.767,3.498,0.923,3.433,1.112,3.352,1.340,3.264,1.614,3.166,1.944,3.063,2.342,2.952,2.821,2.832,3.399,2.705,4.094,2.571,4.932,2.428,5.941,2.261,7.156,2.061,8.620,1.858,10.384,1.654,12.509,1.455,15.068,1.277,18.151,1.124,21.864,0.976,26.338,0.838,31.727,0.716,38.218,0.611,46.038,0.530,55.457,0.468,66.804,0.417,80.472,0.373,96.936,0.335,116.770,0.301,140.661,0.272,169.440,0.245,204.108,0.222,245.869,0.201,296.174,0.182,356.771,0.165,429.767,0.150,517.698,0.136,623.620,0.123,751.213,0.112,904.913,0.103,1090.059,0.095,1313.087,0.088,1581.746,0.082,1905.374,0.076,2295.216,0.070)}

.func Cdg(V) {table(V,0.039,2.969,0.047,2.947,0.057,2.920,0.068,2.889,0.082,2.850,0.099,2.801,0.119,2.746,0.144,2.681,0.173,2.608,0.208,2.529,0.251,2.433,0.302,2.328,0.364,2.211,0.439,2.082,0.528,1.950,0.636,1.826,0.767,1.705,0.923,1.590,1.112,1.480,1.340,1.372,1.614,1.265,1.944,1.157,2.342,1.051,2.821,0.948,3.399,0.848,4.094,0.752,4.932,0.656,5.941,0.548,7.156,0.426,8.620,0.320,10.384,0.229,12.509,0.156,15.068,0.113,18.151,0.099,21.864,0.087,26.338,0.075,31.727,0.064,38.218,0.055,46.038,0.048,55.457,0.044,66.804,0.040,80.472,0.038,96.936,0.035,116.770,0.033,140.661,0.031,169.440,0.029,204.108,0.028,245.869,0.026,296.174,0.025,356.771,0.024,429.767,0.023,517.698,0.022,623.620,0.021,751.213,0.020,904.913,0.019,1090.059,0.019,1313.087,0.018,1581.746,0.018,1905.374,0.018,2295.216,0.017)}

.func Cgs(V) {table(V,-8.870,6.940,-8.076,5.087,-7.282,4.724,-6.489,4.243,-5.695,4.456,-4.901,4.990,-4.107,5.677,-3.313,6.431,-2.520,7.177,-1.726,7.780,-0.932,8.125,-0.138,8.313,0.656,8.408,1.449,8.461,2.243,8.497,3.037,8.524,3.831,8.546,4.624,8.564,5.418,8.579,6.212,8.592,7.006,8.604,7.800,8.614,8.593,8.624,9.387,8.635,10.181,8.643,10.975,8.651,11.769,8.659,12.562,8.666,13.356,8.673,14.150,8.679)}


.ENDS 102

.SUBCKT 103 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+dnlim(V(G,S)-10,0,1m)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D S 1G
Cbypass D 0 10p

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*dnlim(Vds,0,1m)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*uplim(Vds,0,1m)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {uplim((1+TM(V(Tj))/tau(V(Tj)))*Is(V(G,S))*tau(V(Tj))*(-1+exp(dnlim(V(Sd2),-1n,1m)/(nscal(V(Tj))*nn(V(G,S))))),1e2,1)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
*GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

EVSD2 Sd2 0 Value {V(S,d2)}
.ic V(Sd2) = 0

*** CV Model ***

Cg0 G 0 1p
Rg0 G 0 100Meg
G_cdg    D    G    Value {(AFm*(agd*Cdg(V(D,G))+{1e9*CgdOffset}))*ddt(1e-9*V(D,G))}
G_cds    d2   S    Value {AFm*ads*Cds(V(d2,S))*ddt(1e-9*V(d2,S)) - V(Rev)}
G_cgs    G    S    Value {AFm*ags*Cgs(dnlim(V(G,S),0,1m))*ddt(1e-9*V(G,S))}
.ic V(G,S) = 0

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,6.3694e-07,0.5,1.0914e-05,1,0.00028773,1.5,0.001904,2,0.012599,2.5,0.083375,3,0.32481,3.5,0.94672,4,2.308,4.5,4.8094,5,8.8985,5.5,15.2195,6,24.3565,6.5,37.0528,7,53.0202,7.5,72.7562,8,96.6349,8.5,124.376,9,157.2032,9.5,191.8396,10,223.8417,10.5,252.3274,11,276.1886,11.5,292.7447,12,305.1887,12.5,316.4007,13,326.0315,13.5,334.5839,14,342.1513,14.5,348.6404,15,354.6325,15.5,360.6563,16,365.4444,16.5,369.7968,17,373.5539,17.5,377.0205,18,379.7049,18.5,382.9068,19,386.0339,19.5,389.2545,20,392.2068,20.5,394.9176,21,397.4102,21.5,399.7058,22,401.8229,22.5,403.7784,23,405.587,23.5,407.262,24,408.8154,24.5,410.2579,25,411.5991,25.5,412.8476,26,414.0112,26.5,415.097,27,416.1113,27.5,417.0599,28,417.9479,28.5,418.7801,29,419.5608,29.5,420.3231,30,421.0236)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,0.96775,4,0.90104,4.5,0.81962,5,0.72721,5.5,0.6186,6,0.52876,6.5,0.45877,7,0.40017,7.5,0.34483,8,0.29857,8.5,0.25977,9,0.22812,9.5,0.19781,10,0.17521,10.5,0.15974,11,0.15028,11.5,0.14829,12,0.14829,12.5,0.14829,13,0.14829,13.5,0.14829,14,0.14829,14.5,0.14829,15,0.14829,15.5,0.14829,16,0.14829,16.5,0.14829,17,0.14829,17.5,0.14829,18,0.14829,18.5,0.14829,19,0.14829,19.5,0.14829,20,0.14829,20.5,0.14829,21,0.14829,21.5,0.14829,22,0.14829,22.5,0.14829,23,0.14829,23.5,0.14829,24,0.14829,24.5,0.14829,25,0.14829,25.5,0.14829,26,0.14829,26.5,0.14829,27,0.14829,27.5,0.14829,28,0.14829,28.5,0.14829,29,0.14829,29.5,0.14829,30,0.14829)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.00027647,3,0.00098767,3.5,0.0024781,4,0.0048841,4.5,0.0089764,5,0.015912,5.5,0.026263,6,0.040952,6.5,0.059176,7,0.087372,7.5,0.12435,8,0.17298,8.5,0.23532,9,0.29505,9.5,0.34481,10,0.38267,10.5,0.40503,11,0.40856,11.5,0.41025,12,0.41025,12.5,0.41025,13,0.41025,13.5,0.41025,14,0.41025,14.5,0.41025,15,0.41025,15.5,0.41025,16,0.41025,16.5,0.41025,17,0.41025,17.5,0.41025,18,0.41025,18.5,0.41025,19,0.41025,19.5,0.41025,20,0.41025,20.5,0.41025,21,0.41025,21.5,0.41025,22,0.41025,22.5,0.41025,23,0.41025,23.5,0.41025,24,0.41025,24.5,0.41025,25,0.41025,25.5,0.41025,26,0.41025,26.5,0.41025,27,0.41025,27.5,0.41025,28,0.41025,28.5,0.41025,29,0.41025,29.5,0.41025,30,0.41025)}
.func RTJ(Tj) {table(Tj,-40,0.0020757,-30,0.0025294,-20,0.003233,-10,0.0041865,0,0.0053899,10,0.0068433,20,0.0085465,30,0.0105,40,0.012703,50,0.015156,60,0.017859,70,0.020811,80,0.024014,90,0.027467,100,0.031169,110,0.035122,120,0.039324,130,0.043776,140,0.048478,150,0.053431,160,0.058633,170,0.064084,180,0.069786,190,0.075738,200,0.08194,300,0.14396,400,0.20597,500,0.26799,600,0.33,700,0.39202,800,0.45404,900,0.51605,1000,0.57807,1100,0.64009,1200,0.7021,1300,0.76412,1400,0.82613,1500,0.88815,1600,0.95017,1700,1.0122,1800,1.0742,1900,1.1362,2000,1.1982)}
.func VthFwd(Tj) {table(Tj,-40,-2.1829,-30,-1.9901,-20,-1.8036,-10,-1.6233,0,-1.4493,10,-1.2816,20,-1.1201,30,-0.96498,40,-0.8161,50,-0.6735,60,-0.53718,70,-0.40713,80,-0.28336,90,-0.16587,100,-0.054663,110,0.050269,120,0.14892,130,0.2413,140,0.3274,150,0.40722,160,0.48076,170,0.54802,180,0.609,190,0.66371,200,0.71214,300,1.1964,400,1.6807,500,2.165,600,2.6492,700,3.1335,800,3.6178,900,4.1021,1000,4.5864,1100,5.0706,1200,5.5549,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.26363,-4,0.25118,-3,0.22843,-2,0.19765,-1,0.16684,0,0.14491,1,0.20942,2,0.25233,3,0.2461,4,0.19356,5,0.17409,6,0.16742,7,0.18264,8,0.18798,9,0.19093,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.046263,-4,0.046819,-3,0.050023,-2,0.054574,-1,0.056965,0,0.054402,1,0.04801,2,0.047739,3,0.050706,4,0.059681,5,0.077974,6,0.11398,7,0.18769,8,0.3181,9,0.56969,10,0.72457,11,0.65574,12,0.80741,13,1.0022,14,1.1772,15,1.2982,16,1.4426,17,1.4586,18,1.4787)}
.func Is(Vgs) {table(Vgs,-5,1e-05,-4,1e-05,-3,1e-05,-2,1e-05,-1,1e-05,0,1e-05,1,0.0019449,2,0.029775,3,0.1,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rscal(Tj) {table(Tj,-40,0.65905,-30,0.66296,-20,0.67002,-10,0.68023,0,0.69358,10,0.71007,20,0.72971,30,0.75249,40,0.77841,50,0.80748,60,0.8397,70,0.87506,80,0.91356,90,0.95521,100,1,110,1.0479,120,1.099,130,1.1532,140,1.2106,150,1.2711,160,1.3348,170,1.4016,180,1.4715,190,1.5446,200,1.6208,300,2.3832,400,3.1455,500,3.9079,600,4.6702,700,5.4325,800,6.1949,900,6.9572,1000,7.7196,1100,8.4819,1200,9.2442,1300,10.0066,1400,10.7689,1500,11.5313,1600,12.2936,1700,13.0559,1800,13.8183,1900,14.5806,2000,15.343)}
.func nscal(Tj) {table(Tj,-40,1.2004,-30,1.1724,-20,1.1465,-10,1.1227,0,1.101,10,1.0814,20,1.064,30,1.0486,40,1.0353,50,1.0242,60,1.0151,70,1.0082,80,1.0034,90,1.0006,100,1,110,1.0015,120,1.0051,130,1.0108,140,1.0186,150,1.0285,160,1.0405,170,1.0546,180,1.0709,190,1.0892,200,1.1096,300,1.3141,400,1.5185,500,1.723,600,1.9274,700,2.1319,800,2.3363,900,2.5408,1000,2.7452,1100,2.9496,1200,3.1541,1300,3.3585,1400,3.563,1500,3.7674,1600,3.9719,1700,4.1763,1800,4.3808,1900,4.5852,2000,4.7896)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.039,3.865,0.047,3.869,0.057,3.856,0.068,3.848,0.082,3.851,0.099,3.844,0.119,3.844,0.144,3.839,0.173,3.822,0.208,3.788,0.251,3.765,0.302,3.724,0.364,3.682,0.439,3.651,0.528,3.613,0.636,3.555,0.767,3.498,0.923,3.433,1.112,3.352,1.340,3.264,1.614,3.166,1.944,3.063,2.342,2.952,2.821,2.832,3.399,2.705,4.094,2.571,4.932,2.428,5.941,2.261,7.156,2.061,8.620,1.858,10.384,1.654,12.509,1.455,15.068,1.277,18.151,1.124,21.864,0.976,26.338,0.838,31.727,0.716,38.218,0.611,46.038,0.530,55.457,0.468,66.804,0.417,80.472,0.373,96.936,0.335,116.770,0.301,140.661,0.272,169.440,0.245,204.108,0.222,245.869,0.201,296.174,0.182,356.771,0.165,429.767,0.150,517.698,0.136,623.620,0.123,751.213,0.112,904.913,0.103,1090.059,0.095,1313.087,0.088,1581.746,0.082,1905.374,0.076,2295.216,0.070)}

.func Cdg(V) {table(V,0.039,2.969,0.047,2.947,0.057,2.920,0.068,2.889,0.082,2.850,0.099,2.801,0.119,2.746,0.144,2.681,0.173,2.608,0.208,2.529,0.251,2.433,0.302,2.328,0.364,2.211,0.439,2.082,0.528,1.950,0.636,1.826,0.767,1.705,0.923,1.590,1.112,1.480,1.340,1.372,1.614,1.265,1.944,1.157,2.342,1.051,2.821,0.948,3.399,0.848,4.094,0.752,4.932,0.656,5.941,0.548,7.156,0.426,8.620,0.320,10.384,0.229,12.509,0.156,15.068,0.113,18.151,0.099,21.864,0.087,26.338,0.075,31.727,0.064,38.218,0.055,46.038,0.048,55.457,0.044,66.804,0.040,80.472,0.038,96.936,0.035,116.770,0.033,140.661,0.031,169.440,0.029,204.108,0.028,245.869,0.026,296.174,0.025,356.771,0.024,429.767,0.023,517.698,0.022,623.620,0.021,751.213,0.020,904.913,0.019,1090.059,0.019,1313.087,0.018,1581.746,0.018,1905.374,0.018,2295.216,0.017)}

.func Cgs(V) {table(V,-8.870,6.940,-8.076,5.087,-7.282,4.724,-6.489,4.243,-5.695,4.456,-4.901,4.990,-4.107,5.677,-3.313,6.431,-2.520,7.177,-1.726,7.780,-0.932,8.125,-0.138,8.313,0.656,8.408,1.449,8.461,2.243,8.497,3.037,8.524,3.831,8.546,4.624,8.564,5.418,8.579,6.212,8.592,7.006,8.604,7.800,8.614,8.593,8.624,9.387,8.635,10.181,8.643,10.975,8.651,11.769,8.659,12.562,8.666,13.356,8.673,14.150,8.679)}


.ENDS 103



**********************************************************************
******************** SiC Schottky Models *****************************
**********************************************************************
*** SiC Schottky Diode Model ***
*CPW6-1200-Z050A

.SUBCKT 1001 A K Tj Id

** Conduction **
GRbd a1 K Value {V(a1,K)/((Rs(V(Tj)))/AF)}
Rbypass1 a1 K 1k
Rbypass2 A K 1G
GDiode A a1 Value {V(N)}
EDiode N 0 Value {AF*min(Is*(-1+exp(max(V(aa1),-1n)/(nn(V(Tj))))),1e5)}
Ea1 aa1 0 Value {V(A,a1)}
.ic V(aa1) = 0
** Capacitance **
G_CJ A a1 Value {AF*1e-9*Cj(V(a1,A))*ddt(V(A,a1))}

Ecurr Id 0 Value {V(N)}

.param Is = 1e-06
.func nn(Tj) {table(Tj,25,0.057469,75,0.054122,125,0.050427,175,0.047074)}
.func Rs(Tj) {table(Tj,25,0.0090095,75,0.01181,125,0.015862,175,0.020941)}

.func Cj(V) {table(V,0.0010,4.3938,0.0016,4.3933,0.0026,4.3926,0.0043,4.3914,0.0069,4.3895,0.0112,4.3864,0.0181,4.3813,0.0293,4.3731,0.0475,4.3599,0.0770,4.3384,0.1248,4.3035,0.2023,4.2150,0.3277,4.0832,0.5311,3.8945,0.8606,3.6466,1.3945,3.3299,2.2596,2.9618,3.6615,2.5628,5.9331,2.1609,9.6142,1.7864,15.5790,1.4551,25.2444,1.1339,40.9065,0.8111,66.2857,0.6079,107.4105,0.4685,174.0498,0.3651,282.0333,0.2865,457.0118,0.2265,740.5499,0.1928,1200.0000,0.1907)}

.ENDS 1001
*** SiC Schottky Diode Model ***
*CPW6-1700-Z050A

.SUBCKT 1002 A K Tj Id

** Conduction **
GRbd a1 K Value {V(a1,K)/((Rs(V(Tj)))/AF)}
Rbypass1 a1 K 1k
Rbypass2 A K 1G
GDiode A a1 Value {V(N)}
EDiode N 0 Value {AF*min(Is*(-1+exp(max(V(aa1),-1n)/(nn(V(Tj))))),1e5)}
Ea1 aa1 0 Value {V(A,a1)}
.ic V(aa1) = 0
** Capacitance **
G_CJ A a1 Value {AF*1e-9*Cj(V(a1,A))*ddt(V(A,a1))}

Ecurr Id 0 Value {V(N)}

.param Is = 1e-06
.func nn(Tj) {table(Tj,25,0.056239,75,0.052506,125,0.048934,175,0.051446)}
.func Rs(Tj) {table(Tj,25,0.009767,75,0.013228,125,0.017929,175,0.022621)}

.func Cj(V) {table(V,0.0010,5.9067,0.0016,5.9066,0.0026,5.9063,0.0043,5.9059,0.0069,5.9052,0.0112,5.9041,0.0181,5.9024,0.0293,5.8995,0.0475,5.8948,0.0770,5.8873,0.1248,5.8508,0.2023,5.7541,0.3277,5.6057,0.5311,5.3997,0.8606,5.1030,1.3945,4.7105,2.2596,4.2477,3.6615,3.7294,5.9331,3.2006,9.6142,2.6984,15.5790,2.2437,25.2444,1.8363,40.9065,1.4578,66.2857,0.9332,107.4105,0.6621,174.0498,0.4950,282.0333,0.3787,457.0118,0.2945,740.5499,0.2556,1200.0000,0.2535)}

.ENDS 1002
